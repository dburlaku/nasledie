<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nadi - –î–∏–∞–ª–æ–≥ —Å –ø–æ–º–æ—â–Ω–∏–∫–æ–º –ø–∞–º—è—Ç–∏</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ú®</text></svg>">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const NadiChatApp = () => {
          const [step, setStep] = useState(0);
          const [messages, setMessages] = useState([]);
          const [isTyping, setIsTyping] = useState(false);
          const [photos, setPhotos] = useState([]);
          const [currentPhotoIndex, setCurrentPhotoIndex] = useState(0);
          const [showResult, setShowResult] = useState(false);
          const [activeSection, setActiveSection] = useState('home');
          const [savedToCapsula, setSavedToCapsula] = useState(false);
          const [showProfile, setShowProfile] = useState(false);
          const [showShareMenu, setShowShareMenu] = useState(false);
          const [copied, setCopied] = useState(false);
          const [generatedStory, setGeneratedStory] = useState('');
          const [isGeneratingStory, setIsGeneratingStory] = useState(false);
          const [userInput, setUserInput] = useState('');
          const [isRecording, setIsRecording] = useState(false);
          const [mediaView, setMediaView] = useState('all'); // all, people, events, dates, places
          const [mediaFilter, setMediaFilter] = useState('all');
          const [displayMode, setDisplayMode] = useState('smartFeed'); // smartFeed, grid, list, timeline
          const [showFilters, setShowFilters] = useState(false);
          const [searchQuery, setSearchQuery] = useState('');
          const [selectedItems, setSelectedItems] = useState([]);
          const [selectedMediaItem, setSelectedMediaItem] = useState(null);
          const [showMediaDetail, setShowMediaDetail] = useState(false);
          const messagesEndRef = useRef(null);

          // Photo Greeting states
          const [showPhotoGreeting, setShowPhotoGreeting] = useState(false);
          const [greetingPhotos, setGreetingPhotos] = useState([]);
          const [greetingTheme, setGreetingTheme] = useState('');
          const [greetingStyle, setGreetingStyle] = useState('');
          const [greetingDetails, setGreetingDetails] = useState('');
          const [isGeneratingGreeting, setIsGeneratingGreeting] = useState(false);
          const [generatedGreetingUrl, setGeneratedGreetingUrl] = useState('');
          const [greetingMessages, setGreetingMessages] = useState([]);
          const [greetingInput, setGreetingInput] = useState('');
          const [showGreetingEditor, setShowGreetingEditor] = useState(false);
          const greetingMessagesEndRef = useRef(null);

          // Photo Story states
          const [showPhotoStory, setShowPhotoStory] = useState(false);
          const [storyPhotos, setStoryPhotos] = useState([]);
          const [currentStoryPhotoIndex, setCurrentStoryPhotoIndex] = useState(0);
          const [storyMessages, setStoryMessages] = useState([]);
          const [storyInput, setStoryInput] = useState('');
          const [storyStep, setStoryStep] = useState('intro'); // intro, uploading, chatting, reviewing, completed
          const [isProcessingPhotos, setIsProcessingPhotos] = useState(false);
          const [showStoryReview, setShowStoryReview] = useState(false);
          const [selectedStoryPhoto, setSelectedStoryPhoto] = useState(null);
          const [showExifDetails, setShowExifDetails] = useState(false);
          const storyMessagesEndRef = useRef(null);

          // Sidebar collapse state
          const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);

          // Photo source selection modal
          const [showPhotoSourceModal, setShowPhotoSourceModal] = useState(false);
          const [photoSourceContext, setPhotoSourceContext] = useState(''); // 'story' or 'greeting'

          const scrollToBottom = () => {
            messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
          };

          const scrollGreetingToBottom = () => {
            greetingMessagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
          };

          useEffect(() => {
            scrollToBottom();
          }, [messages]);

          useEffect(() => {
            scrollGreetingToBottom();
          }, [greetingMessages]);

          const addMessage = (sender, text) => {
            setMessages(prev => [...prev, { sender, text, id: Date.now() + Math.random() }]);
          };

          const addPhoto = (emoji, gradient) => {
            const photoId = Date.now();
            const newPhoto = {
              id: photoId,
              emoji: emoji,
              gradient: gradient,
              imageUrl: `https://picsum.photos/seed/photo${photoId}/400/400`,
              location: '',
              people: '',
              event: '',
              date: '–ê–≤–≥—É—Å—Ç 2025',
              tags: []
            };
            setPhotos(prev => [...prev, newPhoto]);
            setCurrentPhotoIndex(photos.length);
            return newPhoto;
          };

          const updateCurrentPhoto = (field, value) => {
            setPhotos(prev => prev.map((photo, idx) => 
              idx === currentPhotoIndex ? { ...photo, [field]: value } : photo
            ));
          };

          const nextPhoto = () => {
            if (currentPhotoIndex < photos.length - 1) {
              setCurrentPhotoIndex(currentPhotoIndex + 1);
            }
          };

          const prevPhoto = () => {
            if (currentPhotoIndex > 0) {
              setCurrentPhotoIndex(currentPhotoIndex - 1);
            }
          };

          const handleShare = () => {
            setShowShareMenu(!showShareMenu);
          };

          const handleCopy = () => {
            const currentPhoto = photos[currentPhotoIndex];
            const storyText = `
üì∏ ${currentPhoto.location || '–ú–µ—Å—Ç–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ'}
üë• ${currentPhoto.people || '–õ—é–¥–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã'}
üéâ ${currentPhoto.event || '–°–æ–±—ã—Ç–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ'}
üìÖ ${currentPhoto.date}

${currentPhoto.tags.join(' ')}
            `.trim();
            
            navigator.clipboard.writeText(storyText).then(() => {
              setCopied(true);
              setTimeout(() => setCopied(false), 2000);
            });
          };

          const generateStory = () => {
            if (!currentPhoto) return;
            
            setIsGeneratingStory(true);
            setTimeout(() => {
              const stories = [
                `–≠—Ç–æ –±—ã–ª–æ –≤–æ–ª—à–µ–±–Ω–æ–µ –ª–µ—Ç–æ 2025 –≥–æ–¥–∞. –ú—ã —Å –ª—é–±–∏–º–æ–π –æ—Ç–ø—Ä–∞–≤–∏–ª–∏—Å—å –≤ ${currentPhoto.location || '–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ'}, —á—Ç–æ–±—ã –æ—Ç–º–µ—Ç–∏—Ç—å –Ω–∞—à—É ${currentPhoto.event || '–≥–æ–¥–æ–≤—â–∏–Ω—É'}. –ó–∞–∫–∞—Ç –æ–∫—Ä–∞—Å–∏–ª –Ω–µ–±–æ –≤ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ —Ä–æ–∑–æ–≤–æ–≥–æ –∏ –æ—Ä–∞–Ω–∂–µ–≤–æ–≥–æ, –≤–æ–ª–Ω—ã —Ç–∏—Ö–æ —à–µ–ø—Ç–∞–ª–∏ —Å–≤–æ–∏ –∏—Å—Ç–æ—Ä–∏–∏, –∞ –º—ã –ø—Ä–æ—Å—Ç–æ —Å—Ç–æ—è–ª–∏ —Ä—è–¥–æ–º, –Ω–∞—Å–ª–∞–∂–¥–∞—è—Å—å –º–æ–º–µ–Ω—Ç–æ–º. –≠—Ç–æ –±—ã–ª–∏ —Ç–µ —Å–∞–º—ã–µ –º–≥–Ω–æ–≤–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ —Å—á–∞—Å—Ç—å–µ ‚Äî —ç—Ç–æ –Ω–µ –º–µ—Å—Ç–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –∞ –¥–æ—Ä–æ–≥–∞, –∫–æ—Ç–æ—Ä—É—é —Ç—ã –ø—Ä–æ—Ö–æ–¥–∏—à—å —Å –ª—é–±–∏–º—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º.`,
                
                `${currentPhoto.location || '–≠—Ç–æ –º–µ—Å—Ç–æ'} —Å—Ç–∞–ª–æ —Å–≤–∏–¥–µ—Ç–µ–ª–µ–º –Ω–∞—à–µ–π –ª—é–±–≤–∏. ${currentPhoto.event} ‚Äî –¥–µ–Ω—å, –∫–æ—Ç–æ—Ä—ã–π –º—ã –±—É–¥–µ–º –ø–æ–º–Ω–∏—Ç—å –≤—Å–µ–≥–¥–∞. –ú–æ—Ä–µ, –ø–µ—Å–æ–∫ –ø–æ–¥ –Ω–æ–≥–∞–º–∏, –∏ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ —Ä—è–¥–æ–º. –ú—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ –Ω–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Å–∞–º—ã–µ –ø—Ä–æ—Å—Ç—ã–µ –º–æ–º–µ–Ω—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–∞–º—ã–º–∏ —Ü–µ–Ω–Ω—ã–º–∏. –≠—Ç–æ—Ç –∑–∞–∫–∞—Ç, —ç—Ç–∏ —ç–º–æ—Ü–∏–∏ ‚Äî –≤—Å—ë —ç—Ç–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å –Ω–∞–º–∏ –Ω–∞–≤—Å–µ–≥–¥–∞.`,
                
                `–ö–æ–≥–¥–∞ –º—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ ${currentPhoto.event || '—ç—Ç—É –ø–æ–µ–∑–¥–∫—É'}, —è –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª, —á—Ç–æ ${currentPhoto.location || '—ç—Ç–æ –º–µ—Å—Ç–æ'} —Ç–∞–∫ –∑–∞–ø–æ–º–Ω–∏—Ç—Å—è. ${currentPhoto.people || '–ú—ã'} –≥—É–ª—è–ª–∏ –≤–¥–æ–ª—å –±–µ—Ä–µ–≥–∞, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–ª–∏ –∑–∞–∫–∞—Ç, —Å–º–µ—è–ª–∏—Å—å –Ω–∞–¥ –≥–ª—É–ø–æ—Å—Ç—è–º–∏. –í —Ç–∞–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –ø–∞–º—è—Ç—å ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –∞ —á—É–≤—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –∏—Å–ø—ã—Ç—ã–≤–∞–ª –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç.`
              ];
              
              setGeneratedStory(stories[Math.floor(Math.random() * stories.length)]);
              setIsGeneratingStory(false);
            }, 1500);
          };

          const handleNewChat = () => {
            setStep(0);
            setMessages([]);
            setPhotos([]);
            setCurrentPhotoIndex(0);
            setShowResult(false);
            setIsTyping(false);
            setSavedToCapsula(false);
            setGeneratedStory('');
            setUserInput('');
          };

          const handleSendMessage = () => {
            if (!userInput.trim()) return;
            
            addMessage('user', userInput);
            setUserInput('');
            
            setTimeout(() => {
              addMessage('nadi', '–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ! –Ø —Å–æ—Ö—Ä–∞–Ω–∏–ª —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–∞–ø—Å—É–ª—É –≤—Ä–µ–º–µ–Ω–∏. –ß—Ç–æ –µ—â—ë —Ö–æ—á–µ—à—å —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å?');
            }, 1000);
          };

          const handleKeyPress = (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              handleSendMessage();
            }
          };

          const handleVoiceRecord = () => {
            if (!isRecording) {
              setIsRecording(true);
              setTimeout(() => {
                setIsRecording(false);
                setUserInput('–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ! –•–æ—á—É –¥–æ–±–∞–≤–∏—Ç—å, —á—Ç–æ —ç—Ç–æ –±—ã–ª –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–π –¥–µ–Ω—å.');
              }, 3000);
            }
          };

          // Photo Greeting functions
          const handleOpenPhotoGreeting = () => {
            setShowPhotoGreeting(true);
            setActiveSection('photo-greeting');
          };

          const handleClosePhotoGreeting = () => {
            setShowPhotoGreeting(false);
            setActiveSection('artifacts');
            setGreetingPhotos([]);
            setGreetingTheme('');
            setGreetingStyle('');
            setGreetingDetails('');
            setGeneratedGreetingUrl('');
            setGreetingMessages([]);
            setGreetingInput('');
            setShowGreetingEditor(false);
          };

          const handleAddGreetingPhoto = () => {
            if (greetingPhotos.length < 20) {
              setPhotoSourceContext('greeting');
              setShowPhotoSourceModal(true);
            }
          };

          const handleRemoveGreetingPhoto = (id) => {
            setGreetingPhotos(greetingPhotos.filter(photo => photo.id !== id));
          };

          const handleGenerateGreeting = () => {
            if (greetingPhotos.length === 0 || !greetingTheme || !greetingStyle) {
              alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Ñ–æ—Ç–æ, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –∏ —Å—Ç–∏–ª—å');
              return;
            }

            setIsGeneratingGreeting(true);

            // Create initial prompt message
            const themeNames = {
              birthday: '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è',
              wedding: '–°–≤–∞–¥—å–±–∞',
              anniversary: '–ì–æ–¥–æ–≤—â–∏–Ω–∞',
              graduation: '–í—ã–ø—É—Å–∫–Ω–æ–π',
              newYear: '–ù–æ–≤—ã–π –≥–æ–¥',
              valentines: '–î–µ–Ω—å –°–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞',
              mothers: '–î–µ–Ω—å –º–∞—Ç–µ—Ä–∏',
              fathers: '–î–µ–Ω—å –æ—Ç—Ü–∞',
              baby: '–†–æ–∂–¥–µ–Ω–∏–µ —Ä–µ–±–µ–Ω–∫–∞',
              other: '–î—Ä—É–≥–æ–µ'
            };

            const styleNames = {
              festive: '–¢–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π',
              fun: '–í–µ—Å–µ–ª—ã–π',
              romantic: '–†–æ–º–∞–Ω—Ç–∏—á–Ω—ã–π',
              warm: '–¢–µ–ø–ª—ã–π',
              elegant: '–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π',
              playful: '–ò–≥—Ä–∏–≤—ã–π'
            };

            const promptText = `–°–æ–∑–¥–∞–π —Ñ–æ—Ç–æ–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

üì∏ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π: ${greetingPhotos.length}
üéØ –¢–µ–º–∞: ${themeNames[greetingTheme]}
‚ú® –°—Ç–∏–ª—å: ${styleNames[greetingStyle]}
${greetingDetails ? `\nüìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: ${greetingDetails}` : ''}`;

            // Simulate generation
            setTimeout(() => {
              setIsGeneratingGreeting(false);
              setShowGreetingEditor(true);
              setGeneratedGreetingUrl('https://dburlaku.github.io/dasha-birthday/');

              setGreetingMessages([
                { sender: 'user', text: promptText, id: Date.now() },
                { sender: 'ai', text: '‚ú® –û—Ç–ª–∏—á–Ω–æ! –Ø —Å–æ–∑–¥–∞–ª –¥–ª—è –≤–∞—Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ø—Ä–∞–≤–∞.\n\n–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –º–µ–Ω—è –∏–∑–º–µ–Ω–∏—Ç—å:\n‚Ä¢ –¶–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É\n‚Ä¢ –¢–µ–∫—Å—Ç –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è\n‚Ä¢ –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π\n‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å –º—É–∑—ã–∫—É –∏–ª–∏ –∞–Ω–∏–º–∞—Ü–∏—é\n\n–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å!', id: Date.now() + 1 }
              ]);
            }, 3000);
          };

          const handleSendGreetingMessage = () => {
            if (!greetingInput.trim()) return;

            const newMessage = { sender: 'user', text: greetingInput, id: Date.now() };
            setGreetingMessages(prev => [...prev, newMessage]);
            setGreetingInput('');

            // Simulate AI response
            setTimeout(() => {
              const responses = [
                '–û—Ç–ª–∏—á–Ω–æ! –Ø –æ–±–Ω–æ–≤–∏–ª –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∞.',
                '–ì–æ—Ç–æ–≤–æ! –í–Ω–µ—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∏–∑–∞–π–Ω –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è.',
                '–û–±–Ω–æ–≤–∏–ª —Ç–µ–∫—Å—Ç –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è. –ö–∞–∫ –≤–∞–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç?',
                '–ò–∑–º–µ–Ω–∏–ª —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É –Ω–∞ –±–æ–ª–µ–µ —è—Ä–∫—É—é. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ø—Ä–∞–≤–∞!'
              ];
              const aiResponse = {
                sender: 'ai',
                text: responses[Math.floor(Math.random() * responses.length)],
                id: Date.now()
              };
              setGreetingMessages(prev => [...prev, aiResponse]);
            }, 1000);
          };

          const handleGreetingKeyPress = (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              handleSendGreetingMessage();
            }
          };

          // Photo Story functions
          const scrollStoryToBottom = () => {
            storyMessagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
          };

          useEffect(() => {
            scrollStoryToBottom();
          }, [storyMessages]);

          const addStoryMessage = (sender, text) => {
            setStoryMessages(prev => [...prev, { sender, text, id: Date.now() + Math.random() }]);
          };

          const handleOpenPhotoStory = () => {
            setShowPhotoStory(true);
            setActiveSection('photo-story');
            setStoryStep('intro');
            // Add intro messages
            setTimeout(() => {
              addStoryMessage('nadi', '–û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è! –°–µ–π—á–∞—Å —è —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ —è –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å –æ–ø–∏—Å–∞—Ç—å –≤–∞—à–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ üì∏');
            }, 500);
            setTimeout(() => {
              addStoryMessage('nadi', '–ù–∞–∂–º–∏—Ç–µ –ø–ª—é—Å–∏–∫ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –æ—Ç 1 –¥–æ 6 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏–∑:\n\nüì± –ú–µ–¥–∏–∞—Ç–µ–∫–∏ NaDi\nüñºÔ∏è –ì–∞–ª–µ—Ä–µ–∏ –∫–∞–ø—Å—É–ª—ã\nüíæ –° –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞');
            }, 2000);
          };

          const handleClosePhotoStory = () => {
            setShowPhotoStory(false);
            setActiveSection('artifacts');
            setStoryPhotos([]);
            setCurrentStoryPhotoIndex(0);
            setStoryMessages([]);
            setStoryInput('');
            setStoryStep('intro');
            setIsProcessingPhotos(false);
            setShowStoryReview(false);
            setSelectedStoryPhoto(null);
          };

          const handleAddStoryPhoto = () => {
            if (storyPhotos.length < 6) {
              setPhotoSourceContext('story');
              setShowPhotoSourceModal(true);
            }
          };

          const handleAddPhotoFromSource = (source) => {
            const photoId = Date.now() + Math.random();
            const newPhoto = {
              id: photoId,
              emoji: ['üì∏', 'üåÖ', 'üèñÔ∏è', 'üéâ', 'üéÇ', 'üéà', 'üíê', 'üå∏'][Math.floor(Math.random() * 8)],
              gradient: [
                'from-purple-400 to-pink-400',
                'from-blue-400 to-cyan-400',
                'from-green-400 to-emerald-400',
                'from-orange-400 to-red-400',
                'from-yellow-400 to-orange-400'
              ][Math.floor(Math.random() * 5)],
              imageUrl: `https://picsum.photos/seed/${source}${photoId}/400/400`,
              source: source,
              // AI-generated metadata
              aiDescription: '',
              aiEntities: [],
              shortSpeech: '',
              // User-provided data
              date: '',
              place: '',
              people: '',
              event: '',
              story: '',
              // Final metadata
              title: '',
              finalDescription: '',
              tags: [],
              // EXIF data (simulated)
              exif: {
                camera: ['iPhone 14 Pro', 'Canon EOS R5', 'Sony A7 III', 'Nikon Z6'][Math.floor(Math.random() * 4)],
                lens: ['50mm f/1.8', '24-70mm f/2.8', '85mm f/1.4', '16-35mm f/4'][Math.floor(Math.random() * 4)],
                aperture: ['f/1.8', 'f/2.8', 'f/4.0', 'f/5.6'][Math.floor(Math.random() * 4)],
                shutterSpeed: ['1/125', '1/250', '1/500', '1/1000'][Math.floor(Math.random() * 4)],
                iso: ['100', '200', '400', '800'][Math.floor(Math.random() * 4)],
                focalLength: ['50mm', '24mm', '85mm', '35mm'][Math.floor(Math.random() * 4)],
                dateTime: new Date(Date.now() - Math.random() * 365 * 24 * 60 * 60 * 1000).toLocaleString('ru-RU'),
                gps: Math.random() > 0.5 ? '–î–æ—Å—Ç—É–ø–Ω—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã' : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö GPS'
              }
            };

            if (photoSourceContext === 'story') {
              setStoryPhotos(prev => [...prev, newPhoto]);
              if (storyPhotos.length === 0) {
                setStoryStep('uploading');
              }
            } else if (photoSourceContext === 'greeting') {
              setGreetingPhotos(prev => [...prev, newPhoto]);
            }

            setShowPhotoSourceModal(false);
          };

          const handleRemoveStoryPhoto = (id) => {
            setStoryPhotos(storyPhotos.filter(photo => photo.id !== id));
            if (storyPhotos.length === 1) {
              setStoryStep('intro');
            }
          };

          const handleStartPhotoStory = () => {
            if (storyPhotos.length === 0) {
              alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é');
              return;
            }

            setIsProcessingPhotos(true);
            setStoryStep('processing');

            // Find first unprocessed photo (photo without aiDescription)
            const firstUnprocessedIndex = storyPhotos.findIndex(photo => !photo.aiDescription);
            const startIndex = firstUnprocessedIndex !== -1 ? firstUnprocessedIndex : 0;
            const isReprocessing = firstUnprocessedIndex !== -1 && firstUnprocessedIndex > 0;

            addStoryMessage('nadi', isReprocessing ? '–û—Ç–ª–∏—á–Ω–æ! –ù–∞—á–∏–Ω–∞—é –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π...' : '–û—Ç–ª–∏—á–Ω–æ! –ù–∞—á–∏–Ω–∞—é –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–∞—à–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π...');

            // Simulate AI processing
            setTimeout(() => {
              // Generate AI descriptions only for unprocessed photos
              const processedPhotos = storyPhotos.map((photo, index) => {
                if (photo.aiDescription) {
                  // Already processed, keep as is
                  return photo;
                }
                // Process new photo
                return {
                  ...photo,
                  aiDescription: `–ù–∞ —ç—Ç–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —è –≤–∏–∂—É ${['–∫—Ä–∞—Å–∏–≤—ã–π –ø–µ–π–∑–∞–∂ —Å –ª—é–¥—å–º–∏ –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ', '–ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏–µ –≤–∞–∂–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è', '—Å–µ–º–µ–π–Ω—ã–π –º–æ–º–µ–Ω—Ç, –ø–æ–ª–Ω—ã–π —Ä–∞–¥–æ—Å—Ç–∏', '–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –º–µ—Å—Ç–æ'][Math.floor(Math.random() * 4)]}.`,
                  aiEntities: [
                    ['–ø—Ä–∏—Ä–æ–¥–∞', '–ª—é–¥–∏', '—Ä–∞–¥–æ—Å—Ç—å'],
                    ['–ø—Ä–∞–∑–¥–Ω–∏–∫', '—Å–µ–º—å—è', '—Ç–æ—Ä–∂–µ—Å—Ç–≤–æ'],
                    ['–¥–æ–º', '–±–ª–∏–∑–∫–∏–µ', '—É—é—Ç'],
                    ['–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ', '–ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ', '–≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è']
                  ][Math.floor(Math.random() * 4)],
                  shortSpeech: `–§–æ—Ç–æ ${index + 1}: ${['–¢—ë–ø–ª—ã–π —Å–µ–º–µ–π–Ω—ã–π –º–æ–º–µ–Ω—Ç', '–ù–µ–∑–∞–±—ã–≤–∞–µ–º–æ–µ —Å–æ–±—ã—Ç–∏–µ', '–û—Å–æ–±–µ–Ω–Ω—ã–π –¥–µ–Ω—å', '–Ø—Ä–∫–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ'][Math.floor(Math.random() * 4)]}`
                };
              });

              setStoryPhotos(processedPhotos);
              setIsProcessingPhotos(false);
              setStoryStep('chatting');
              setCurrentStoryPhotoIndex(startIndex);

              addStoryMessage('nadi', isReprocessing ? '–ì–æ—Ç–æ–≤–æ! –Ø –æ–±—Ä–∞–±–æ—Ç–∞–ª –Ω–æ–≤—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ üéØ' : '–ì–æ—Ç–æ–≤–æ! –Ø –æ–±—Ä–∞–±–æ—Ç–∞–ª –≤—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –ø—Ä–∏—Å–≤–æ–∏–ª –∫–∞–∂–¥–æ–π ID üéØ');
              setTimeout(() => {
                addStoryMessage('nadi', `${processedPhotos[startIndex].shortSpeech}\n\n${processedPhotos[startIndex].aiDescription}`);
                setTimeout(() => {
                  addStoryMessage('nadi', '–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å –ø–µ—Ä–≤–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –∞ –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –Ω–∏—Ö –≤—Å–µ—Ö —Å—Ä–∞–∑—É –∫–∞–∫ –æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏—Ç–µ –º–Ω–µ –æ–± —ç—Ç–æ–º.\n\n–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞:\n\nüìÖ –ö–æ–≥–¥–∞ —ç—Ç–æ –±—ã–ª–æ?\nüìç –ì–¥–µ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ?\nüë• –ö—Ç–æ –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏?\nüé¨ –ß—Ç–æ –¥–µ–ª–∞–ª–∏?\nüåü –ü—Ä–∏ –∫–∞–∫–∏—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö?\n‚èÆÔ∏è –ß—Ç–æ –±—ã–ª–æ –¥–æ?\n‚è≠Ô∏è –ß—Ç–æ –±—ã–ª–æ –ø–æ—Å–ª–µ?');
                }, 2000);
              }, 1500);
            }, 3000);
          };

          const handleSendStoryMessage = () => {
            if (!storyInput.trim()) return;

            addStoryMessage('user', storyInput);
            const userMessage = storyInput;
            setStoryInput('');

            // Simulate AI processing the answer
            setTimeout(() => {
              // Update current photo with user's story
              const updatedPhotos = [...storyPhotos];
              if (updatedPhotos[currentStoryPhotoIndex]) {
                updatedPhotos[currentStoryPhotoIndex].story =
                  (updatedPhotos[currentStoryPhotoIndex].story || '') + ' ' + userMessage;
                setStoryPhotos(updatedPhotos);
              }

              addStoryMessage('nadi', '–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å—Ç–æ—Ä–∏—é! –Ø —Å–æ—Ö—Ä–∞–Ω–∏–ª –≤—Å—ë –≤ –¢–≤–æ–∏ –∏—Å—Ç–æ—Ä–∏–∏ üíæ');

              // Ask if user wants to move to next photo
              if (currentStoryPhotoIndex < storyPhotos.length - 1) {
                setTimeout(() => {
                  addStoryMessage('nadi', '–•–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏?');
                  setStoryStep('waiting_next');
                }, 1500);
              } else {
                // All photos processed
                setTimeout(() => {
                  addStoryMessage('nadi', '–û—Ç–ª–∏—á–Ω–æ! –í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ–ø–∏—Å–∞–Ω—ã! üéâ\n\n–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –Ø —Å–æ–∑–¥–∞–ª –æ–ø–∏—Å–∞–Ω–∏—è, –æ–±—ä–µ–¥–∏–Ω–∏–≤ —Ç–æ, —á—Ç–æ —è —É–≤–∏–¥–µ–ª –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö –∏ –≤–∞—à–∏ –∏—Å—Ç–æ—Ä–∏–∏.');
                  setTimeout(() => {
                    setStoryStep('completed');
                    // Generate final descriptions
                    const finalPhotos = storyPhotos.map((photo, index) => ({
                      ...photo,
                      title: `–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è ${index + 1}`,
                      finalDescription: `${photo.aiDescription} ${photo.story || ''}`.trim(),
                      tags: [...photo.aiEntities]
                    }));
                    setStoryPhotos(finalPhotos);
                  }, 2000);
                }, 1500);
              }
            }, 1000);
          };

          const handleMoveToNextPhoto = () => {
            const nextIndex = currentStoryPhotoIndex + 1;
            setCurrentStoryPhotoIndex(nextIndex);
            const nextPhoto = storyPhotos[nextIndex];
            addStoryMessage('nadi', `–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏!\n\n${nextPhoto.shortSpeech}\n\n${nextPhoto.aiDescription}\n\n–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –æ–± —ç—Ç–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏:`);
            setStoryStep('chatting');
          };

          const handleContinueEditing = () => {
            addStoryMessage('nadi', '–•–æ—Ä–æ—à–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –∏—Å—Ç–æ—Ä–∏—é. –ß—Ç–æ –µ—â—ë —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å?');
            setStoryStep('chatting');
          };

          const handleStoryKeyPress = (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              handleSendStoryMessage();
            }
          };

          const handleEditPhotoDescription = (photoId, newDescription) => {
            setStoryPhotos(prev => prev.map(photo =>
              photo.id === photoId ? { ...photo, finalDescription: newDescription } : photo
            ));
          };

          const handleSelectStoryPhoto = (photo, index) => {
            setSelectedStoryPhoto(photo);
            setCurrentStoryPhotoIndex(index);

            // –ï—Å–ª–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –µ—â–µ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –Ω–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É
            if (storyStep === 'uploading' && !photo.aiDescription) {
              handleStartPhotoStory();
            }
          };

          const handleSaveToCapsula = () => {
            addStoryMessage('nadi', '–û—Ç–ª–∏—á–Ω–æ! –ú—ã –¥–ª—è –≤–∞—Å —Å–æ–∑–¥–∞–ª–∏ –ñ–∏–≤—É—é –¶–∏—Ñ—Ä–æ–≤—É—é –ö–∞–ø—Å—É–ª—É –í—Ä–µ–º–µ–Ω–∏, –∫—É–¥–∞ —è –≥–æ—Ç–æ–≤–∞ –ø–æ–ª–æ–∂–∏–ª–∞ —ç—Ç–∏ –≤–∞—à–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ üéÅ');
            setTimeout(() => {
              addStoryMessage('nadi', '–•–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ö –≤ –≥–∞–ª–µ—Ä–µ–µ? –ù–∞–∂–º–∏—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å –≤ –ì–∞–ª–µ—Ä–µ–µ" üëÜ');
              setStoryStep('completed');
            }, 1500);
          };

          const handleShowInGallery = () => {
            setActiveSection('media');
            handleClosePhotoStory();
          };

          const currentPhoto = photos[currentPhotoIndex];

          const handleNext = () => {
            if (step === 0) {
              addMessage('nadi', '–ü—Ä–∏–≤–µ—Ç! –Ø Nadi ‚Äî —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π üí´');
              setTimeout(() => {
                addMessage('nadi', '–£ —Ç–µ–±—è –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —Ç—ã—Å—è—á–∏ —Ñ–æ—Ç–æ –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, –Ω–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω–æ–µ ‚Äî —Ü–µ–ª–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –ø—Ä–∞–≤–¥–∞?');
              }, 2000);
              setTimeout(() => {
                addMessage('nadi', '–î–∞–≤–∞–π –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å ‚Äî –∑–∞–≥—Ä—É–∑–∏ –æ–¥–Ω–æ —Ñ–æ—Ç–æ, –∫–æ—Ç–æ—Ä–æ–µ —Ç–µ–±–µ –¥–æ—Ä–æ–≥–æ, –∏ —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚ú®');
              }, 4000);
              setStep(1);
            } else if (step === 1) {
              addPhoto('üåÖüèñÔ∏è', 'from-orange-300 via-pink-400 to-purple-400');
              addMessage('system', 'üì∏ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
              setIsTyping(true);
              setTimeout(() => {
                setIsTyping(false);
                setShowResult(true);
                setTimeout(() => {
                  addMessage('nadi', '–ö–∞–∫–æ–µ —Ç—ë–ø–ª–æ–µ —Ñ–æ—Ç–æ! üåä');
                  setTimeout(() => {
                    addMessage('nadi', '–Ø –≤–∏–∂—É: –º–æ—Ä–µ, –∑–∞–∫–∞—Ç, –¥–≤–æ–µ –ª—é–¥–µ–π –Ω–∞ –ø–ª—è–∂–µ... –ì–¥–µ —ç—Ç–æ –±—ã–ª–æ?');
                  }, 1500);
                }, 500);
              }, 2000);
              setStep(2);
            } else if (step === 2) {
              addMessage('user', '–≠—Ç–æ –ö—Ä—ã–º, –ö–æ–∫—Ç–µ–±–µ–ª—å');
              updateCurrentPhoto('location', '–ö—Ä—ã–º, –ö–æ–∫—Ç–µ–±–µ–ª—å');
              setTimeout(() => {
                addMessage('nadi', '–ö—Ä—ã–º ‚Äî –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ! üèñÔ∏è –ê —Å –∫–µ–º —Ç—ã –±—ã–ª?');
              }, 1500);
              setStep(3);
            } else if (step === 3) {
              addMessage('user', '–° –∂–µ–Ω–æ–π');
              updateCurrentPhoto('people', '–° –∂–µ–Ω–æ–π –î–∞—à–µ–π');
              setTimeout(() => {
                addMessage('nadi', '–ö–∞–∫ –∑–¥–æ—Ä–æ–≤–æ! –ê —ç—Ç–æ –±—ã–ª–æ —á—Ç–æ-—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ ‚Äî —é–±–∏–ª–µ–π, –≥–æ–¥–æ–≤—â–∏–Ω–∞?');
              }, 1500);
              setStep(4);
            } else if (step === 4) {
              addMessage('user', '–î–∞, –Ω–∞—à–∞ 10-—è –≥–æ–¥–æ–≤—â–∏–Ω–∞ —Å–≤–∞–¥—å–±—ã');
              updateCurrentPhoto('event', '10-—è –≥–æ–¥–æ–≤—â–∏–Ω–∞ —Å–≤–∞–¥—å–±—ã');
              updateCurrentPhoto('tags', ['#–æ—Ç–ø—É—Å–∫', '#–º–æ—Ä–µ', '#—Å–µ–º—å—è', '#–≥–æ–¥–æ–≤—â–∏–Ω–∞']);
              setSavedToCapsula(true);
              setTimeout(() => {
                addMessage('nadi', '–í–æ—Ç —ç—Ç–æ –¥–∞! 10 –ª–µ—Ç –≤–º–µ—Å—Ç–µ ‚Äî —ç—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! üíï');
                setTimeout(() => {
                  addMessage('nadi', '–Ø —Å–æ—Ö—Ä–∞–Ω–∏–ª –≤—Å—ë:\n\nüìç –ö—Ä—ã–º, –ö–æ–∫—Ç–µ–±–µ–ª—å\nüë´ –° –∂–µ–Ω–æ–π\nüéâ 10-—è –≥–æ–¥–æ–≤—â–∏–Ω–∞ —Å–≤–∞–¥—å–±—ã\nüìÖ –ê–≤–≥—É—Å—Ç 2025\n\n–¢–µ–ø–µ—Ä—å —ç—Ç–æ —Ñ–æ—Ç–æ ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞, –∞ —Ü–µ–ª–∞—è –∏—Å—Ç–æ—Ä–∏—è!');
                  setTimeout(() => {
                    generateStory();
                  }, 500);
                }, 2000);
                setTimeout(() => {
                  addMessage('nadi', '–ü—Ä–µ–¥—Å—Ç–∞–≤—å: —á–µ—Ä–µ–∑ 20 –ª–µ—Ç —Ç–≤–æ–∏ –¥–µ—Ç–∏ –∏–ª–∏ –≤–Ω—É–∫–∏ —É–≤–∏–¥—è—Ç —ç—Ç–æ —Ñ–æ—Ç–æ –∏ –ø—Ä–æ—á–∏—Ç–∞—é—Ç –Ω–∞—Å—Ç–æ—è—â—É—é –∏—Å—Ç–æ—Ä–∏—é ‚Äî —Ç–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, —Å —Ç–≤–æ–∏–º–∏ —ç–º–æ—Ü–∏—è–º–∏ ‚ú®');
                }, 5000);
              }, 1500);
              setStep(5);
            } else if (step === 5) {
              setTimeout(() => {
                addMessage('nadi', '–£ –º–µ–Ω—è –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ! üöÄ');
                setTimeout(() => {
                  addMessage('nadi', '–Ø –º–æ–≥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Ç–≤–æ–∏ –Ω–æ–≤—ã–µ —Ñ–æ—Ç–æ:\n\n‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –ª–∏—Ü–∞\n‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è\n‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏–∏\n‚úÖ –ù–∏–∫–æ–≥–¥–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å\n\n–ü–æ–¥–∫–ª—é—á–∏—Ç—å?');
                }, 1500);
              }, 2000);
              setStep(6);
            } else if (step === 6) {
              addMessage('user', '–î–∞, –ø–æ–¥–∫–ª—é—á–∏!');
              setIsTyping(true);
              setTimeout(() => {
                setIsTyping(false);
                addMessage('nadi', 'üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å:\n\n‚úì –¢–≤–æ–∏ —Ñ–æ—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è\n‚úì –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é —è –±—É–¥—É –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ\n‚úì –í—Å–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã\n‚úì –ü–æ–∏—Å–∫ –ª—é–±–æ–≥–æ —Ñ–æ—Ç–æ ‚Äî –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã');
              }, 2000);
              setTimeout(() => {
                addMessage('nadi', '–¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è –ø–æ–¥ –∑–∞—â–∏—Ç–æ–π. –ù–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è. –ù–∏—á–µ–≥–æ –Ω–µ –∑–∞–±—É–¥–µ—Ç—Å—è üíô');
              }, 4500);
              setTimeout(() => {
                addMessage('nadi', '–•–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë —Ñ–æ—Ç–æ? –ó–∞–≥—Ä—É–∑–∏ —Å–ª–µ–¥—É—é—â–µ–µ!');
              }, 6500);
              setStep(7);
            } else if (step === 7) {
              addPhoto('üéÇüéâ', 'from-pink-300 via-purple-400 to-blue-400');
              addMessage('system', 'üì∏ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
              setIsTyping(true);
              setTimeout(() => {
                setIsTyping(false);
                addMessage('nadi', '–û! –í–∏–∂—É —Ç–æ—Ä—Ç –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫! –ß–µ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è?');
              }, 1500);
              setStep(8);
            } else if (step === 8) {
              addMessage('user', '–≠—Ç–æ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ—á–µ—Ä–∏ –ê—Ä–∏–Ω—ã');
              updateCurrentPhoto('event', '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –ê—Ä–∏–Ω—ã');
              updateCurrentPhoto('people', '–ê—Ä–∏–Ω–∞');
              updateCurrentPhoto('tags', ['#—Å–µ–º—å—è', '#–ø—Ä–∞–∑–¥–Ω–∏–∫', '#–¥–µ–Ω—å—Ä–æ–∂–¥–µ–Ω–∏—è']);
              setTimeout(() => {
                addMessage('nadi', '–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ! –°–∫–æ–ª—å–∫–æ –µ–π –∏—Å–ø–æ–ª–Ω–∏–ª–æ—Å—å?');
              }, 1500);
              setStep(9);
            } else if (step === 9) {
              addMessage('user', '4 –≥–æ–¥–∏–∫–∞');
              updateCurrentPhoto('date', '–°–µ–Ω—Ç—è–±—Ä—å 2025');
              setTimeout(() => {
                addMessage('nadi', '–ö–∞–∫–∞—è –º–∏–ª–∞—è! üéà –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∫–∞–ø—Å—É–ª—É. –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è ' + photos.length + ' —Ñ–æ—Ç–æ —Å –ø–æ–ª–Ω—ã–º–∏ –∏—Å—Ç–æ—Ä–∏—è–º–∏!');
              }, 1500);
              setStep(10);
            } else if (step === 10) {
              // User can continue chatting
              return;
            }
          };

          const getButtonText = () => {
            if (step === 0) return '–ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥';
            if (step === 1) return 'üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ';
            if (step === 7) return 'üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë —Ñ–æ—Ç–æ';
            return '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí';
          };

          const totalSteps = 10;
          const progress = Math.min(step, totalSteps);

          const menuItems = [
            { id: 'chat', icon: 'üí¨', label: '–ß–∞—Ç —Å Nadi' },
            { id: 'media', icon: 'üì∏', label: '–¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è' },
            { id: 'artifacts', icon: 'üé®', label: 'AI –ö—Ä–µ–∞—Ç–æ—Ä' },
          ];

          const chatHistory = [
            { id: 1, title: '–û—Ç–ø—É—Å–∫ –≤ –ö—Ä—ã–º—É 2025', date: '21 –æ–∫—Ç', preview: '–ú–æ—Ä–µ, –∑–∞–∫–∞—Ç...' },
            { id: 2, title: '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ—á–µ—Ä–∏', date: '15 –æ–∫—Ç', preview: '–ê—Ä–∏–Ω–∞ 4 –≥–æ–¥–∞...' },
            { id: 3, title: '–°–µ–º–µ–π–Ω—ã–π –∞—Ä—Ö–∏–≤', date: '10 –æ–∫—Ç', preview: '–°—Ç–∞—Ä—ã–µ —Ñ–æ—Ç–æ...' },
          ];

          // Mock data for media library
          const mediaStats = {
            total: 1345,
            photos: 800,
            videos: 30,
            audio: 5,
            voice: 80,
            files: 85,
            links: 320,
            gifs: 25,
            people: 12,
            events: 28,
            places: 15,
            recent: 23,
            storageUsed: 5,
            storageTotal: 20
          };

          const peopleAlbums = [
            { id: 1, name: '–ê—Ä–∏–Ω–∞', count: 45, emoji: 'üëß', lastUpdate: '2 –¥–Ω—è –Ω–∞–∑–∞–¥' },
            { id: 2, name: '–ñ–µ–Ω–∞ (–î–∞—à–∞)', count: 67, emoji: 'üë©', lastUpdate: '1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥' },
            { id: 3, name: '–Ø', count: 89, emoji: 'üë®', lastUpdate: '–°–µ–≥–æ–¥–Ω—è' },
            { id: 4, name: '–†–æ–¥–∏—Ç–µ–ª–∏', count: 34, emoji: 'üë¥üëµ', lastUpdate: '1 –Ω–µ–¥–µ–ª—è –Ω–∞–∑–∞–¥' },
            { id: 5, name: '–î—Ä—É–∑—å—è', count: 28, emoji: 'üë•', lastUpdate: '3 –¥–Ω—è –Ω–∞–∑–∞–¥' },
            { id: 6, name: '–ö–æ–ª–ª–µ–≥–∏', count: 15, emoji: 'üíº', lastUpdate: '5 –¥–Ω–µ–π –Ω–∞–∑–∞–¥' },
          ];

          const eventAlbums = [
            { id: 1, name: '–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è', count: 23, emoji: 'üéÇ', lastUpdate: '2 –¥–Ω—è –Ω–∞–∑–∞–¥' },
            { id: 2, name: '–û—Ç–ø—É—Å–∫–∞', count: 38, emoji: 'üèñÔ∏è', lastUpdate: '1 –Ω–µ–¥–µ–ª—è –Ω–∞–∑–∞–¥' },
            { id: 3, name: '–ü—Ä–∞–∑–¥–Ω–∏–∫–∏', count: 31, emoji: 'üéâ', lastUpdate: '1 –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥' },
            { id: 4, name: '–°–≤–∞–¥—å–±–∞', count: 12, emoji: 'üíç', lastUpdate: '10 –ª–µ—Ç –Ω–∞–∑–∞–¥' },
            { id: 5, name: '–í—ã–ø—É—Å–∫–Ω—ã–µ', count: 8, emoji: 'üéì', lastUpdate: '2 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥' },
            { id: 6, name: '–°–ø–æ—Ä—Ç', count: 19, emoji: '‚öΩ', lastUpdate: '1 –Ω–µ–¥–µ–ª—è –Ω–∞–∑–∞–¥' },
          ];

          const placeAlbums = [
            { id: 1, name: '–ö—Ä—ã–º', count: 42, emoji: 'üèñÔ∏è', lastUpdate: '2 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥' },
            { id: 2, name: '–ú–æ—Å–∫–≤–∞', count: 58, emoji: 'üèôÔ∏è', lastUpdate: '–°–µ–≥–æ–¥–Ω—è' },
            { id: 3, name: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', count: 15, emoji: 'üèõÔ∏è', lastUpdate: '3 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥' },
            { id: 4, name: '–°–æ—á–∏', count: 28, emoji: 'üåä', lastUpdate: '1 –≥–æ–¥ –Ω–∞–∑–∞–¥' },
            { id: 5, name: '–ö–∞–∑–∞–Ω—å', count: 12, emoji: 'üïå', lastUpdate: '6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' },
          ];

          const dateAlbums = [
            { id: 1, name: '2025', count: 87, emoji: 'üìÖ', lastUpdate: '–°–µ–≥–æ–¥–Ω—è' },
            { id: 2, name: '2023', count: 45, emoji: 'üìÖ', lastUpdate: '1 –≥–æ–¥ –Ω–∞–∑–∞–¥' },
            { id: 3, name: '2022', count: 12, emoji: 'üìÖ', lastUpdate: '2 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥' },
            { id: 4, name: '2021', count: 6, emoji: 'üìÖ', lastUpdate: '3 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥' },
          ];

          const petAlbums = [
            { id: 1, name: '–ë–∞—Ä—Å–∏–∫ (–∫–æ—Ç)', count: 45, emoji: 'üê±', lastUpdate: '1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥' },
            { id: 2, name: '–†–µ–∫—Å (—Å–æ–±–∞–∫–∞)', count: 32, emoji: 'üêï', lastUpdate: '3 –¥–Ω—è –Ω–∞–∑–∞–¥' },
          ];

          const specialCategories = [
            { id: 1, name: '–ò–∑–±—Ä–∞–Ω–Ω–æ–µ', count: 67, emoji: '‚≠ê', lastUpdate: '–°–µ–≥–æ–¥–Ω—è', color: 'bg-yellow-50 border-yellow-200' },
            { id: 2, name: '–í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è', count: 42, emoji: 'üí´', lastUpdate: '2 –¥–Ω—è –Ω–∞–∑–∞–¥', color: 'bg-purple-50 border-purple-200' },
            { id: 3, name: '–î—É–±–ª–∏–∫–∞—Ç—ã', count: 28, emoji: 'üìã', lastUpdate: '1 –Ω–µ–¥–µ–ª—è –Ω–∞–∑–∞–¥', color: 'bg-gray-50 border-gray-300' },
          ];

          const recentPhotos = [
            { id: 1, emoji: 'üñºÔ∏è', title: '–ê—Ä–∏–Ω–∞ —Å –º–∞–º–æ–π', imageUrl: 'https://picsum.photos/seed/arina-mom/400/400' },
            { id: 2, emoji: 'üñºÔ∏è', title: '–ë–∞—Ä—Å–∏–∫ —Å–ø–∏—Ç –Ω–∞ –¥–∏–≤–∞–Ω–µ', imageUrl: 'https://picsum.photos/seed/barsik-sleeping/400/400' },
            { id: 3, emoji: 'üñºÔ∏è', title: '–°–µ–º–µ–π–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç', imageUrl: 'https://picsum.photos/seed/family-portrait/400/400' },
            { id: 4, emoji: 'üñºÔ∏è', title: '–†–µ–∫—Å –Ω–∞ –ø—Ä–æ–≥—É–ª–∫–µ', imageUrl: 'https://picsum.photos/seed/rex-walk/400/400' },
            { id: 5, emoji: 'üñºÔ∏è', title: '–° –î–∞—à–µ–π –Ω–∞ –º–æ—Ä–µ', imageUrl: 'https://picsum.photos/seed/dasha-sea/400/400' },
            { id: 6, emoji: 'üñºÔ∏è', title: '–ê—Ä–∏–Ω–∞ –∏–≥—Ä–∞–µ—Ç —Å –ë–∞—Ä—Å–∏–∫–æ–º', imageUrl: 'https://picsum.photos/seed/arina-barsik/400/400' },
            { id: 7, emoji: 'üñºÔ∏è', title: '–†–æ–¥–∏—Ç–µ–ª–∏ –≤ —Å–∞–¥—É', imageUrl: 'https://picsum.photos/seed/parents-garden/400/400' },
            { id: 8, emoji: 'üñºÔ∏è', title: '–î—Ä—É–∑—å—è –Ω–∞ –ø–∏–∫–Ω–∏–∫–µ', imageUrl: 'https://picsum.photos/seed/friends-picnic/400/400' },
            { id: 9, emoji: 'üñºÔ∏è', title: '–†–µ–∫—Å –∏ –ë–∞—Ä—Å–∏–∫ –≤–º–µ—Å—Ç–µ', imageUrl: 'https://picsum.photos/seed/rex-barsik/400/400' },
            { id: 10, emoji: 'üñºÔ∏è', title: '–ö–æ–ª–ª–µ–≥–∏ –Ω–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–µ', imageUrl: 'https://picsum.photos/seed/colleagues-party/400/400' },
            { id: 11, emoji: 'üñºÔ∏è', title: '–ê—Ä–∏–Ω–∞ –Ω–∞ –≤—ã–ø—É—Å–∫–Ω–æ–º', imageUrl: 'https://picsum.photos/seed/arina-graduate/400/400' },
            { id: 12, emoji: 'üñºÔ∏è', title: '–Ø –∏ –î–∞—à–∞ –Ω–∞ —Å–≤–∞–¥—å–±–µ', imageUrl: 'https://picsum.photos/seed/we-wedding/400/400' },
            { id: 13, emoji: 'üñºÔ∏è', title: '–ë–∞—Ä—Å–∏–∫ –æ—Ö–æ—Ç–∏—Ç—Å—è', imageUrl: 'https://picsum.photos/seed/barsik-hunt/400/400' },
            { id: 14, emoji: 'üñºÔ∏è', title: '–°–µ–º—å—è –Ω–∞ –¥–∞—á–µ', imageUrl: 'https://picsum.photos/seed/family-dacha/400/400' },
            { id: 15, emoji: 'üñºÔ∏è', title: '–†–µ–∫—Å –∏–≥—Ä–∞–µ—Ç —Å –º—è—á–æ–º', imageUrl: 'https://picsum.photos/seed/rex-ball/400/400' },
            { id: 16, emoji: 'üñºÔ∏è', title: '–ê—Ä–∏–Ω–∞ —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏', imageUrl: 'https://picsum.photos/seed/arina-grandparents/400/400' },
            { id: 17, emoji: 'üñºÔ∏è', title: '–î—Ä—É–∑—å—è –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç–µ', imageUrl: 'https://picsum.photos/seed/friends-concert/400/400' },
            { id: 18, emoji: 'üñºÔ∏è', title: '–î–∞—à–∞ —Å –ë–∞—Ä—Å–∏–∫–æ–º', imageUrl: 'https://picsum.photos/seed/dasha-barsik/400/400' },
            { id: 19, emoji: 'üñºÔ∏è', title: '–í—Å—è —Å–µ–º—å—è –≤–º–µ—Å—Ç–µ', imageUrl: 'https://picsum.photos/seed/whole-family/400/400' },
            { id: 20, emoji: 'üñºÔ∏è', title: '–†–µ–∫—Å –Ω–∞ –ø–ª—è–∂–µ', imageUrl: 'https://picsum.photos/seed/rex-beach/400/400' },
          ];

          // Smart Feed Data
          const allSmartFeedData = [
            {
              period: '–û–∫—Ç—è–±—Ä—å 2025',
              items: [
                { id: 101, type: 'photos', emoji: 'üñºÔ∏è', title: '–°–µ–º—å—è –Ω–∞ –ø–ª—è–∂–µ –≤ –ö—Ä—ã–º—É', imageUrl: 'https://picsum.photos/seed/family-crimea-beach/400/400' },
                { id: 102, type: 'photos', emoji: 'üñºÔ∏è', title: '–ê—Ä–∏–Ω–∞ —Å—Ç—Ä–æ–∏—Ç –∑–∞–º–æ–∫ –∏–∑ –ø–µ—Å–∫–∞', imageUrl: 'https://picsum.photos/seed/arina-sand-castle/400/400' },
                { id: 103, type: 'videos', emoji: 'üé¨', title: '–í–∏–¥–µ–æ –∑–∞–∫–∞—Ç–∞ –≤ –ö—Ä—ã–º—É', imageUrl: 'https://picsum.photos/seed/couple-sunset-crimea/400/400' },
                { id: 104, type: 'links', emoji: 'üîó', title: '–û—Ç–µ–ª—å –≤ –ö—Ä—ã–º—É' },
                { id: 105, type: 'gifs', emoji: 'GIF', title: '–°–µ–º–µ–π–Ω–æ–µ –≤–µ—Å–µ–ª—å–µ', imageUrl: 'https://picsum.photos/seed/family-fun-gif/400/400' },
              ],
              totalCount: 18,
              suggestion: '–ü–æ—Ö–æ–∂–µ, —ç—Ç–æ –±—ã–ª –æ—Ç–ø—É—Å–∫'
            },
            {
              period: '–°–µ–Ω—Ç—è–±—Ä—å 2025',
              event: '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –ê—Ä–∏–Ω—ã',
              items: [
                { id: 201, type: 'photos', emoji: 'üñºÔ∏è', title: '–ê—Ä–∏–Ω–∞ –∑–∞–¥—É–≤–∞–µ—Ç —Å–≤–µ—á–∏', imageUrl: 'https://picsum.photos/seed/arina-blowing-candles/400/400' },
                { id: 202, type: 'photos', emoji: 'üñºÔ∏è', title: '–ë–∞—Ä—Å–∏–∫ –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–µ', imageUrl: 'https://picsum.photos/seed/barsik-birthday-party/400/400' },
                { id: 203, type: 'videos', emoji: 'üé¨', title: '–í–∏–¥–µ–æ —Å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏', imageUrl: 'https://picsum.photos/seed/grandparents-arina-bday/400/400' },
                { id: 204, type: 'audio', emoji: 'üéµ', title: '–ü–µ—Å–Ω—è –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è' },
                { id: 205, type: 'links', emoji: 'üîó', title: '–†–µ—Ü–µ–ø—Ç —Ç–æ—Ä—Ç–∞' },
                { id: 206, type: 'gifs', emoji: 'GIF', title: '–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è', imageUrl: 'https://picsum.photos/seed/birthday-gif/400/400' },
                { id: 207, type: 'files', emoji: 'üìÑ', title: '–®–∫–æ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã', imageUrl: 'https://picsum.photos/seed/documents-school/400/400' },
              ],
              totalCount: 11
            },
            {
              period: '–ê–≤–≥—É—Å—Ç 2025',
              items: [
                { id: 301, type: 'photos', emoji: 'üñºÔ∏è', title: '–ü–∏–∫–Ω–∏–∫ —Å –¥—Ä—É–∑—å—è–º–∏', imageUrl: 'https://picsum.photos/seed/friends-picnic-august/400/400' },
                { id: 302, type: 'videos', emoji: 'üé¨', title: '–†–µ–∫—Å –±–µ–≥–∞–µ—Ç –ø–æ –ø–æ–ª—é', imageUrl: 'https://picsum.photos/seed/rex-running-field/400/400' },
                { id: 303, type: 'photos', emoji: 'üñºÔ∏è', title: '–ë–∞—Ä—Å–∏–∫ –Ω–∞ –¥–µ—Ä–µ–≤–µ', imageUrl: 'https://picsum.photos/seed/barsik-tree-climbing/400/400' },
                { id: 304, type: 'voice', emoji: 'üé§', title: '–ì–æ–ª–æ—Å–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞ –æ –≤—ã—Ö–æ–¥–Ω—ã—Ö' },
                { id: 305, type: 'gifs', emoji: 'GIF', title: '–ë–∞—Ä—Å–∏–∫ –ø—Ä—ã–≥–∞–µ—Ç', imageUrl: 'https://picsum.photos/seed/cat-jumping-gif/400/400' },
                { id: 306, type: 'gifs', emoji: 'GIF', title: '–†–µ–∫—Å –∏–≥—Ä–∞–µ—Ç', imageUrl: 'https://picsum.photos/seed/dog-playing-gif/400/400' },
              ],
              totalCount: 12,
              suggestion: '–õ–µ—Ç–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω—ã–µ'
            },
            {
              period: '–ò—é–ª—å 2025',
              items: [
                { id: 401, type: 'files', emoji: 'üìÑ', title: '–î–æ–≥–æ–≤–æ—Ä –Ω–∞ –∫–≤–∞—Ä—Ç–∏—Ä—É', imageUrl: 'https://picsum.photos/seed/apartment-contract/400/400' },
                { id: 402, type: 'files', emoji: 'üìÑ', title: '–ë–∞–±—É—à–∫–∏–Ω—ã —Ä–µ—Ü–µ–ø—Ç—ã', imageUrl: 'https://picsum.photos/seed/grandma-recipes/400/400' },
                { id: 403, type: 'gifs', emoji: 'GIF', title: '–°–º–µ—à–Ω–æ–π –∫–æ—Ç', imageUrl: 'https://picsum.photos/seed/barsik-hunt/400/400' },
              ],
              totalCount: 8,
              suggestion: '–î–æ–º–∞—à–Ω–∏–µ –¥–µ–ª–∞'
            }
          ];

          // Filter smart feed data based on selected filter
          const getFilteredSmartFeed = () => {
            if (mediaFilter === 'all') {
              return allSmartFeedData;
            }
            return allSmartFeedData.map(period => ({
              ...period,
              items: period.items.filter(item => item.type === mediaFilter)
            })).filter(period => period.items.length > 0);
          };

          const smartFeedData = getFilteredSmartFeed();

          // Media items for grid/list view
          const allMediaItems = [
            {
              id: 1,
              type: 'photos',
              icon: 'üì∑',
              name: 'IMG_2025_0315.jpg',
              date: '15 –º–∞—Ä—Ç–∞ 2025',
              event: '–£—Ç—Ä–µ–Ω–Ω–∏–∫',
              people: '–ê—Ä–∏–Ω–∞, 4.5 –≥–æ–¥–∞',
              size: '2.4 –ú–ë',
              hasDescription: true,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/arina-mom/400/400',
              title: '–ê—Ä–∏–Ω–∞ —Å –º–∞–º–æ–π'
            },
            {
              id: 2,
              type: 'videos',
              icon: 'üé¨',
              name: 'VIDEO_2025_0820.mp4',
              date: '20 –∞–≤–≥—É—Å—Ç–∞ 2025',
              event: '–ú–æ—Ä–µ',
              people: null,
              size: '45.8 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/dasha-sea/400/400',
              title: '–° –î–∞—à–µ–π –Ω–∞ –º–æ—Ä–µ'
            },
            {
              id: 3,
              type: 'photos',
              icon: 'üì∑',
              name: 'IMG_2025_0822.jpg',
              date: '22 –∞–≤–≥—É—Å—Ç–∞ 2025',
              event: '–ü–∏–∫–Ω–∏–∫',
              people: '–î—Ä—É–∑—å—è',
              size: '3.1 –ú–ë',
              hasDescription: true,
              isFavorite: true,
              imageUrl: 'https://picsum.photos/seed/friends-picnic/400/400',
              title: '–î—Ä—É–∑—å—è –Ω–∞ –ø–∏–∫–Ω–∏–∫–µ'
            },
            {
              id: 4,
              type: 'photos',
              icon: 'üì∑',
              name: 'IMG_2025_0905.jpg',
              date: '5 —Å–µ–Ω—Ç—è–±—Ä—è 2025',
              event: '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è',
              people: '–ê—Ä–∏–Ω–∞',
              size: '2.8 –ú–ë',
              hasDescription: true,
              isFavorite: true,
              imageUrl: 'https://picsum.photos/seed/arina-blowing-candles/400/400',
              title: '–ê—Ä–∏–Ω–∞ –∑–∞–¥—É–≤–∞–µ—Ç —Å–≤–µ—á–∏'
            },
            {
              id: 5,
              type: 'videos',
              icon: 'üé¨',
              name: 'VIDEO_2025_0806.mp4',
              date: '6 –∞–≤–≥—É—Å—Ç–∞ 2025',
              event: '–ü—Ä–æ–≥—É–ª–∫–∞',
              people: '–†–µ–∫—Å',
              size: '52.3 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/rex-running-field/400/400',
              title: '–†–µ–∫—Å –±–µ–≥–∞–µ—Ç –ø–æ –ø–æ–ª—é'
            },
            {
              id: 6,
              type: 'photos',
              icon: 'üì∑',
              name: 'IMG_2025_0728.jpg',
              date: '28 –∏—é–ª—è 2025',
              event: '–î–æ–º–∞',
              people: '–ë–∞—Ä—Å–∏–∫',
              size: '1.9 –ú–ë',
              hasDescription: true,
              isFavorite: true,
              imageUrl: 'https://picsum.photos/seed/barsik-sleeping/400/400',
              title: '–ë–∞—Ä—Å–∏–∫ —Å–ø–∏—Ç –Ω–∞ –¥–∏–≤–∞–Ω–µ'
            },
            {
              id: 7,
              type: 'audio',
              icon: 'üéµ',
              name: '–ü–µ—Å–Ω—è_—Å–≤–∞–¥—å–±–∞.mp3',
              date: '12 –∏—é–Ω—è 2025',
              event: '–°–≤–∞–¥—å–±–∞',
              people: null,
              size: '4.2 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              title: '–°–≤–∞–¥–µ–±–Ω–∞—è –ø–µ—Å–Ω—è'
            },
            {
              id: 8,
              type: 'voice',
              icon: 'üé§',
              name: '–ì–æ–ª–æ—Å–æ–≤–æ–µ_–∑–∞–º–µ—Ç–∫–∞_001.m4a',
              date: '3 –æ–∫—Ç—è–±—Ä—è 2025',
              event: '–ó–∞–º–µ—Ç–∫–∏',
              people: null,
              size: '856 –ö–ë',
              hasDescription: false,
              isFavorite: false,
              title: '–ó–∞–º–µ—Ç–∫–∞ –æ –ø–ª–∞–Ω–∞—Ö'
            },
            {
              id: 9,
              type: 'files',
              icon: 'üìÑ',
              name: '–î–æ–∫—É–º–µ–Ω—Ç—ã_—à–∫–æ–ª–∞.pdf',
              date: '1 —Å–µ–Ω—Ç—è–±—Ä—è 2025',
              event: '–®–∫–æ–ª–∞',
              people: '–ê—Ä–∏–Ω–∞',
              size: '1.2 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/documents-school/400/400',
              title: '–®–∫–æ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã'
            },
            {
              id: 10,
              type: 'links',
              icon: 'üîó',
              name: '–†–µ—Ü–µ–ø—Ç —Ç–æ—Ä—Ç–∞',
              date: '4 —Å–µ–Ω—Ç—è–±—Ä—è 2025',
              event: '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è',
              people: null,
              size: '12 –ö–ë',
              hasDescription: false,
              isFavorite: false,
              title: '–°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ—Ü–µ–ø—Ç'
            },
            {
              id: 11,
              type: 'gifs',
              icon: 'GIF',
              name: 'funny_cat.gif',
              date: '15 –∏—é–ª—è 2025',
              event: '–†–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ',
              people: null,
              size: '2.5 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/barsik-hunt/400/400',
              title: '–°–º–µ—à–Ω–æ–π –∫–æ—Ç'
            },
            {
              id: 12,
              type: 'photos',
              icon: 'üì∑',
              name: 'IMG_2025_1012.jpg',
              date: '12 –æ–∫—Ç—è–±—Ä—è 2025',
              event: '–ö—Ä—ã–º',
              people: '–í—Å—è —Å–µ–º—å—è',
              size: '3.5 –ú–ë',
              hasDescription: true,
              isFavorite: true,
              imageUrl: 'https://picsum.photos/seed/family-crimea-beach/400/400',
              title: '–°–µ–º—å—è –Ω–∞ –ø–ª—è–∂–µ –≤ –ö—Ä—ã–º—É'
            },
            {
              id: 13,
              type: 'files',
              icon: 'üìÑ',
              name: '–°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ_—Ä–æ–∂–¥–µ–Ω–∏—è.pdf',
              date: '15 –º–∞—Ä—Ç–∞ 2025',
              event: '–î–æ–∫—É–º–µ–Ω—Ç—ã',
              people: '–ê—Ä–∏–Ω–∞',
              size: '856 –ö–ë',
              hasDescription: false,
              isFavorite: true,
              imageUrl: 'https://picsum.photos/seed/birth-certificate/400/400',
              title: '–°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Ä–æ–∂–¥–µ–Ω–∏–∏'
            },
            {
              id: 14,
              type: 'files',
              icon: 'üìÑ',
              name: '–î–æ–≥–æ–≤–æ—Ä_–∫–≤–∞—Ä—Ç–∏—Ä–∞.pdf',
              date: '5 –∏—é–Ω—è 2025',
              event: '–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å',
              people: null,
              size: '2.4 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/apartment-contract/400/400',
              title: '–î–æ–≥–æ–≤–æ—Ä –Ω–∞ –∫–≤–∞—Ä—Ç–∏—Ä—É'
            },
            {
              id: 15,
              type: 'files',
              icon: 'üìÑ',
              name: '–ü–∞—Å–ø–æ—Ä—Ç_—Å–∫–∞–Ω.pdf',
              date: '1 —è–Ω–≤–∞—Ä—è 2025',
              event: '–î–æ–∫—É–º–µ–Ω—Ç—ã',
              people: '–Ø',
              size: '1.8 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/passport-scan/400/400',
              title: '–°–∫–∞–Ω –ø–∞—Å–ø–æ—Ä—Ç–∞'
            },
            {
              id: 16,
              type: 'gifs',
              icon: 'GIF',
              name: 'birthday_celebration.gif',
              date: '5 —Å–µ–Ω—Ç—è–±—Ä—è 2025',
              event: '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è',
              people: null,
              size: '3.2 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/birthday-gif/400/400',
              title: '–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è'
            },
            {
              id: 17,
              type: 'gifs',
              icon: 'GIF',
              name: 'dog_playing.gif',
              date: '6 –∞–≤–≥—É—Å—Ç–∞ 2025',
              event: '–ü—Ä–æ–≥—É–ª–∫–∞',
              people: '–†–µ–∫—Å',
              size: '2.8 –ú–ë',
              hasDescription: false,
              isFavorite: true,
              imageUrl: 'https://picsum.photos/seed/dog-playing-gif/400/400',
              title: '–†–µ–∫—Å –∏–≥—Ä–∞–µ—Ç'
            },
            {
              id: 18,
              type: 'gifs',
              icon: 'GIF',
              name: 'family_fun.gif',
              date: '12 –æ–∫—Ç—è–±—Ä—è 2025',
              event: '–û—Ç–ø—É—Å–∫',
              people: '–í—Å—è —Å–µ–º—å—è',
              size: '4.1 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/family-fun-gif/400/400',
              title: '–°–µ–º–µ–π–Ω–æ–µ –≤–µ—Å–µ–ª—å–µ'
            },
            {
              id: 19,
              type: 'files',
              icon: 'üìÑ',
              name: '–†–µ—Ü–µ–ø—Ç—ã_–±–∞–±—É—à–∫–∏.docx',
              date: '20 –º–∞—è 2025',
              event: '–°–µ–º—å—è',
              people: '–†–æ–¥–∏—Ç–µ–ª–∏',
              size: '542 –ö–ë',
              hasDescription: true,
              isFavorite: true,
              imageUrl: 'https://picsum.photos/seed/grandma-recipes/400/400',
              title: '–ë–∞–±—É—à–∫–∏–Ω—ã —Ä–µ—Ü–µ–ø—Ç—ã'
            },
            {
              id: 20,
              type: 'gifs',
              icon: 'GIF',
              name: 'cat_jumping.gif',
              date: '28 –∏—é–ª—è 2025',
              event: '–î–æ–º–∞',
              people: '–ë–∞—Ä—Å–∏–∫',
              size: '1.9 –ú–ë',
              hasDescription: false,
              isFavorite: false,
              imageUrl: 'https://picsum.photos/seed/cat-jumping-gif/400/400',
              title: '–ë–∞—Ä—Å–∏–∫ –ø—Ä—ã–≥–∞–µ—Ç'
            },
          ];

          // Filter media items based on selected filter
          const getFilteredMedia = () => {
            if (mediaFilter === 'all') {
              return allMediaItems;
            }
            return allMediaItems.filter(item => item.type === mediaFilter);
          };

          const mediaItems = getFilteredMedia();

          return (
            <div className="flex h-screen bg-gray-50 overflow-hidden">
              {/* Sidebar */}
              <div className={`${isSidebarCollapsed ? 'w-20' : 'w-72'} h-screen bg-white border-r border-gray-200 flex flex-col transition-all duration-300`}>
                <div className={`${isSidebarCollapsed ? 'p-4' : 'p-6'} border-b border-gray-200 flex items-center ${isSidebarCollapsed ? 'justify-center' : 'justify-between'}`}>
                  <button
                    onClick={() => setActiveSection('home')}
                    className={`flex items-center ${isSidebarCollapsed ? 'justify-center' : 'gap-3'} hover:opacity-80 transition-opacity cursor-pointer`}
                  >
                    <div className="w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center flex-shrink-0">
                      <span className="text-xl">‚ú®</span>
                    </div>
                    {!isSidebarCollapsed && (
                      <div className="text-left">
                        <h1 className="font-bold text-lg text-gray-800">Nadi</h1>
                        <p className="text-xs text-gray-500">–ü–æ–º–æ—â–Ω–∏–∫ –ø–∞–º—è—Ç–∏</p>
                      </div>
                    )}
                  </button>
                  {/* –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —Å–∞–π–¥–±–∞—Ä–∞ */}
                  <button
                    onClick={() => setIsSidebarCollapsed(!isSidebarCollapsed)}
                    className="p-2 hover:bg-gray-100 rounded-lg transition-all"
                    title={isSidebarCollapsed ? '–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–µ–Ω—é' : '–°–≤–µ—Ä–Ω—É—Ç—å –º–µ–Ω—é'}
                  >
                    <span className="text-gray-600 text-lg">{isSidebarCollapsed ? '‚Üí' : '‚Üê'}</span>
                  </button>
                </div>

                {/* –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ */}
                {!isSidebarCollapsed && (
                  <div className="px-4 pt-4 pb-2">
                    <button
                      onClick={() => {
                        setActiveSection('chat');
                        setMessages([]);
                      }}
                      className="w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all"
                    >
                      <span className="text-lg">+</span>
                      <span>–ù–æ–≤—ã–π —á–∞—Ç</span>
                    </button>
                  </div>
                )}

                <div className="flex-1 overflow-y-auto">
                  <div className={`${isSidebarCollapsed ? 'p-2' : 'p-4'} space-y-1`}>
                    {menuItems.map(item => (
                      <button
                        key={item.id}
                        onClick={() => setActiveSection(item.id)}
                        className={`w-full flex items-center ${isSidebarCollapsed ? 'justify-center px-2 py-3' : 'gap-3 px-4 py-3'} rounded-lg transition-all ${
                          activeSection === item.id
                            ? 'bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 font-medium'
                            : 'text-gray-600 hover:bg-gray-50'
                        }`}
                        title={isSidebarCollapsed ? item.label : ''}
                      >
                        <span className="text-xl">{item.icon}</span>
                        {!isSidebarCollapsed && <span>{item.label}</span>}
                      </button>
                    ))}
                  </div>

                  {activeSection === 'chat' && !isSidebarCollapsed && (
                    <div className="px-4 py-2">
                      <div className="flex items-center justify-between mb-2 px-4">
                        <h3 className="text-xs font-semibold text-gray-500 uppercase">–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤</h3>
                        <button
                          onClick={handleNewChat}
                          className="text-xs text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1"
                        >
                          <span>+</span>
                          <span>–ù–æ–≤—ã–π —á–∞—Ç</span>
                        </button>
                      </div>
                      <div className="space-y-1">
                        {chatHistory.map(chat => (
                          <button
                            key={chat.id}
                            className="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition-all"
                          >
                            <div className="font-medium text-sm text-gray-800 truncate">{chat.title}</div>
                            <div className="text-xs text-gray-500 flex items-center gap-2 mt-1">
                              <span>{chat.date}</span>
                              <span>‚Ä¢</span>
                              <span className="truncate">{chat.preview}</span>
                            </div>
                          </button>
                        ))}
                      </div>
                    </div>
                  )}

                </div>

                <div className="border-t border-gray-200 p-4">
                  <button
                    onClick={() => setShowProfile(!showProfile)}
                    className={`w-full flex items-center ${isSidebarCollapsed ? 'justify-center p-2' : 'gap-3 p-3'} rounded-lg hover:bg-gray-50 transition-all`}
                  >
                    <div className="w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-400 rounded-full flex items-center justify-center text-white font-semibold">
                      –ê–ü
                    </div>
                    {!isSidebarCollapsed && (
                      <>
                        <div className="flex-1 text-left">
                          <div className="font-medium text-sm text-gray-800">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–æ–≤</div>
                          <div className="text-xs text-green-600 font-medium">–ë–∞–∑–æ–≤—ã–π ‚Ä¢ 5/20 –ì–ë</div>
                        </div>
                        <span className="text-gray-400">‚öôÔ∏è</span>
                      </>
                    )}
                  </button>

                  {showProfile && !isSidebarCollapsed && (
                    <div className="mt-2 p-3 bg-gray-50 rounded-lg space-y-2 text-sm">
                      <div className="px-3 py-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded border border-purple-200">
                        <div className="flex items-center justify-between mb-2">
                          <div>
                            <div className="text-xs text-gray-600">–¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ</div>
                            <div className="font-semibold text-purple-800 text-base">–ë–∞–∑–æ–≤—ã–π</div>
                          </div>
                          <button className="bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs px-3 py-1.5 rounded-lg hover:shadow-lg transition-all font-medium">
                            –£–ª—É—á—à–∏—Ç—å
                          </button>
                        </div>

                        {/* Storage Info */}
                        <div className="pt-2 border-t border-purple-200 space-y-2">
                          <div>
                            <div className="flex items-center justify-between text-xs mb-1">
                              <span className="text-gray-600">–•—Ä–∞–Ω–∏–ª–∏—â–µ:</span>
                              <span className="font-semibold text-gray-800">{mediaStats.storageUsed} –∏–∑ {mediaStats.storageTotal} –ì–ë</span>
                            </div>
                            <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                              <div className="h-full bg-gradient-to-r from-blue-500 to-cyan-500 transition-all" style={{width: '25%'}}></div>
                            </div>
                          </div>

                          <div className="flex items-center justify-between text-xs pt-1">
                            <span className="text-gray-600">–°—É—Ç–æ—á–Ω—ã–π –ª–∏–º–∏—Ç:</span>
                            <span className="font-semibold text-gray-800">24%</span>
                          </div>

                          <div className="flex items-center justify-between text-xs">
                            <span className="text-gray-600">–ú–µ—Å—è—á–Ω—ã–π –ª–∏–º–∏—Ç:</span>
                            <span className="font-semibold text-green-700">25.4%</span>
                          </div>
                        </div>

                        {/* Family Plan Invite */}
                        <button className="w-full mt-3 bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs px-3 py-2 rounded-lg hover:shadow-lg transition-all font-medium flex items-center justify-center gap-2">
                          <span>üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                          <span>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤ —Å–µ–º–µ–π–Ω—ã–π —Ç–∞—Ä–∏—Ñ</span>
                        </button>
                      </div>
                      <button
                        onClick={() => {
                          setActiveSection('profile');
                          setShowProfile(false);
                        }}
                        className="w-full text-left px-3 py-2 rounded hover:bg-white transition-all"
                      >
                        üë§ –ü—Ä–æ—Ñ–∏–ª—å
                      </button>
                      <button
                        onClick={() => {
                          setActiveSection('settings');
                          setShowProfile(false);
                        }}
                        className="w-full text-left px-3 py-2 rounded hover:bg-white transition-all"
                      >
                        ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                      </button>
                      <button
                        onClick={() => {
                          setActiveSection('capsule');
                          setShowProfile(false);
                        }}
                        className="w-full text-left px-3 py-2 rounded hover:bg-white transition-all"
                      >
                        üì¶ –ú–æ—è –∫–∞–ø—Å—É–ª–∞
                      </button>
                      <button className="w-full text-left px-3 py-2 rounded hover:bg-white transition-all text-red-600">üö™ –í—ã–π—Ç–∏</button>
                    </div>
                  )}
                </div>
              </div>

                {/* Main Content */}
                <div className="flex-1 flex">
                  {/* Chat Section */}
                  <div className="flex-1 flex flex-col">
                    {activeSection === 'home' ? (
                    <>
                      {/* No header - clean start */}
                      <div className="flex-1 overflow-y-auto bg-white">
                        <div className="max-w-5xl mx-auto">

                          {/* Hero Section - –ú–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ */}
                          <div className="text-center py-24 px-6">
                            <h1 className="text-5xl md:text-6xl font-bold text-gray-900 leading-tight mb-6">
                              –¢–≤–æ–π –≥–æ–ª–æ—Å. –¢–≤–æ–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è.<br/>
                              –¢–≤–æ–π –≤–∑–≥–ª—è–¥ –Ω–∞ –º–∏—Ä.
                            </h1>
                            <p className="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed mb-4">
                              Nadi –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —ç—Ç–æ —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç–æ–π —Ä–∞–∑–≥–æ–≤–æ—Ä ‚Äî<br/>
                              —Å–æ–∑–¥–∞–≤–∞–π –∏—Å—Ç–æ—Ä–∏–∏, –¥–µ–ª–∏—Å—å —Å –±–ª–∏–∑–∫–∏–º–∏ —Å–µ–≥–æ–¥–Ω—è<br/>
                              –∏ –ø–µ—Ä–µ–¥–∞–π —ç—Ç–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è–º –∑–∞–≤—Ç—Ä–∞.
                            </p>
                            <p className="text-2xl font-semibold text-gray-800 mb-12">
                              –£–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ —Å–µ–≥–æ–¥–Ω—è. –ù–∞—Å–ª–µ–¥–∏–µ –Ω–∞ –≤–µ–∫–∞.
                            </p>
                            <button
                              onClick={() => setActiveSection('chat')}
                              className="bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl px-12 py-5 rounded-2xl font-bold hover:shadow-2xl hover:scale-105 transition-all duration-300"
                            >
                              –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥
                            </button>
                          </div>

                          {/* –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç - 3 —à–∞–≥–∞ */}
                          <div className="bg-gradient-to-br from-purple-50/50 to-pink-50/50 py-20 px-6">
                            <h2 className="text-4xl font-bold text-center text-gray-900 mb-16">
                              –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-12 max-w-4xl mx-auto">
                              <div className="text-center">
                                <div className="w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-4xl mx-auto mb-6 shadow-lg">
                                  üí¨
                                </div>
                                <h3 className="text-2xl font-bold text-gray-900 mb-3">1. –†–∞—Å—Å–∫–∞–∑—ã–≤–∞–π</h3>
                                <p className="text-gray-600 text-lg">
                                  –ü—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏<br/>
                                  —Å Nadi –æ —Ç–æ–º,<br/>
                                  —á—Ç–æ –ø–æ–º–Ω–∏—à—å
                                </p>
                              </div>
                              <div className="text-center">
                                <div className="w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center text-4xl mx-auto mb-6 shadow-lg">
                                  ‚ú®
                                </div>
                                <h3 className="text-2xl font-bold text-gray-900 mb-3">2. –°–æ–∑–¥–∞–≤–∞–π</h3>
                                <p className="text-gray-600 text-lg">
                                  –ê–ª—å–±–æ–º—ã, –≤–∏–¥–µ–æ,<br/>
                                  –¥—Ä–µ–≤–æ, –∫–æ–ª–ª–∞–∂–∏ ‚Äî<br/>
                                  –∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å
                                </p>
                              </div>
                              <div className="text-center">
                                <div className="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center text-4xl mx-auto mb-6 shadow-lg">
                                  üåü
                                </div>
                                <h3 className="text-2xl font-bold text-gray-900 mb-3">3. –ü–µ—Ä–µ–¥–∞–≤–∞–π</h3>
                                <p className="text-gray-600 text-lg">
                                  –î–µ—Ç—è–º, –≤–Ω—É–∫–∞–º,<br/>
                                  —á–µ—Ä–µ–∑ 10, 100,<br/>
                                  1000 –ª–µ—Ç
                                </p>
                              </div>
                            </div>
                          </div>

                          {/* –ß—Ç–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å */}
                          <div className="py-20 px-6">
                            <h2 className="text-4xl font-bold text-center text-gray-900 mb-16">
                              –ß—Ç–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto mb-12">
                              <div
                                onClick={handleOpenPhotoStory}
                                className="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-8 shadow-lg hover:shadow-2xl hover:scale-105 transition-all cursor-pointer border-2 border-blue-200 text-center"
                              >
                                <div className="text-6xl mb-4">üì∏</div>
                                <h3 className="text-2xl font-bold text-gray-900 mb-3">–§–æ—Ç–æ–ò—Å—Ç–æ—Ä–∏–∏</h3>
                                <p className="text-gray-700">
                                  –û–∂–∏–≤–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏<br/>
                                  —á–µ—Ä–µ–∑ —Ä–∞—Å—Å–∫–∞–∑
                                </p>
                              </div>
                              <div className="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 shadow-lg hover:shadow-2xl hover:scale-105 transition-all cursor-pointer border-2 border-green-200 text-center opacity-60">
                                <div className="text-6xl mb-4">üå≥</div>
                                <h3 className="text-2xl font-bold text-gray-900 mb-3">–°–µ–º–µ–π–Ω–æ–µ –¥—Ä–µ–≤–æ</h3>
                                <p className="text-gray-700">
                                  –°–æ–∑–¥–∞–π —Å–≤—è–∑—å<br/>
                                  –ø–æ–∫–æ–ª–µ–Ω–∏–π
                                </p>
                                <div className="mt-4 inline-block bg-gray-800 text-white text-sm px-3 py-1 rounded-full">
                                  –°–∫–æ—Ä–æ
                                </div>
                              </div>
                              <div className="bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl p-8 shadow-lg hover:shadow-2xl hover:scale-105 transition-all cursor-pointer border-2 border-pink-200 text-center opacity-60">
                                <div className="text-6xl mb-4">üíå</div>
                                <h3 className="text-2xl font-bold text-gray-900 mb-3">–ü–∏—Å—å–º–æ –≤ –±—É–¥—É—â–µ–µ</h3>
                                <p className="text-gray-700">
                                  –ù–∞–ø–∏—à–∏<br/>
                                  –ø–æ—Ç–æ–º–∫–∞–º
                                </p>
                                <div className="mt-4 inline-block bg-gray-800 text-white text-sm px-3 py-1 rounded-full">
                                  –°–∫–æ—Ä–æ
                                </div>
                              </div>
                            </div>
                            <div className="text-center">
                              <button
                                onClick={() => setActiveSection('artifacts')}
                                className="text-purple-600 font-semibold text-lg hover:text-purple-700 transition-colors inline-flex items-center gap-2"
                              >
                                <span>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</span>
                                <span>‚Üí</span>
                              </button>
                            </div>
                          </div>

                          {/* –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ */}
                          <div className="bg-gradient-to-br from-purple-50/50 to-pink-50/50 py-20 px-6">
                            <div className="max-w-3xl mx-auto">
                              <div className="bg-white rounded-2xl p-10 shadow-xl border-2 border-purple-100">
                                <div className="flex items-start gap-4">
                                  <div className="text-5xl">üíú</div>
                                  <div>
                                    <p className="text-xl text-gray-700 italic mb-4 leading-relaxed">
                                      "–Ø –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ —Ä–∞–∑–æ–±—Ä–∞–ª–∞ —Ñ–æ—Ç–æ –±–∞–±—É—à–∫–∏. Nadi –ø–æ–º–æ–≥–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å 50 –ª–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞ –Ω–µ–¥–µ–ª—é"
                                    </p>
                                    <p className="text-gray-600 font-semibold">
                                      ‚Äî –ú–∞—Ä–∏—è, 34 –≥–æ–¥–∞
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* –§—É—Ç–µ—Ä */}
                          <div className="bg-gray-50 py-12 px-6 text-center border-t border-gray-200">
                            <div className="max-w-4xl mx-auto">
                              <button
                                onClick={() => setActiveSection('chat')}
                                className="bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl px-12 py-4 rounded-2xl font-bold hover:shadow-2xl hover:scale-105 transition-all duration-300 mb-8"
                              >
                                –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥
                              </button>
                              <div className="flex justify-center gap-8 text-gray-600">
                                <button
                                  onClick={() => setActiveSection('artifacts')}
                                  className="hover:text-purple-600 transition-colors"
                                >
                                  –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
                                </button>
                                <span className="text-gray-300">|</span>
                                <button className="hover:text-purple-600 transition-colors">
                                  –û –ø—Ä–æ–µ–∫—Ç–µ
                                </button>
                                <span className="text-gray-300">|</span>
                                <button className="hover:text-purple-600 transition-colors">
                                  –ö–æ–Ω—Ç–∞–∫—Ç—ã
                                </button>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                    </>
                  ) : activeSection === 'chat' ? (
                    <>
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div className="flex items-center gap-2 text-sm text-gray-600">
                          <button className="hover:text-purple-600 transition-all">–ì–ª–∞–≤–Ω–∞—è</button>
                          <span>‚Ä∫</span>
                          <button className="hover:text-purple-600 transition-all">–ß–∞—Ç—ã</button>
                          <span>‚Ä∫</span>
                          <span className="text-gray-800 font-medium">–†–∞–∑–≥–æ–≤–æ—Ä —Å Nadi</span>
                        </div>
                      </div>

                      <div className="flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        {messages.length === 0 && step === 0 && (
                          <div className="text-center py-20 space-y-6">
                            <div className="w-24 h-24 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full mx-auto flex items-center justify-center animate-pulse">
                              <span className="text-5xl">üëã</span>
                            </div>
                            <div>
                              <h2 className="text-3xl font-bold text-gray-800 mb-2">
                                –ü—Ä–∏–≤–µ—Ç, –ê–ª–µ–∫—Å–∞–Ω–¥—Ä!
                              </h2>
                              <p className="text-gray-600 text-lg mb-8">
                                –ü—Ä–æ–¥–æ–ª–∂–∏–º –Ω–∞—à —Ä–∞–∑–≥–æ–≤–æ—Ä? –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –º–Ω–µ –æ —Ç–æ–º, —á—Ç–æ –¥–ª—è –≤–∞—Å –≤–∞–∂–Ω–æ
                              </p>

                              {/* –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —á–∏–ø—Å—ã */}
                              <div className="flex flex-wrap gap-3 justify-center max-w-2xl mx-auto">
                                {storyPhotos && storyPhotos.length > 0 ? (
                                  <>
                                    {/* –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–¥–∞–≤–Ω–æ –∑–∞–≥—Ä—É–∂–∞–ª —Ñ–æ—Ç–æ */}
                                    <button
                                      onClick={handleOpenPhotoStory}
                                      className="bg-white hover:bg-purple-50 border-2 border-purple-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>üì∏</span>
                                      <span>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ñ–æ—Ç–æ</span>
                                    </button>
                                    <button
                                      onClick={() => {
                                        setStep(10);
                                        addMessage('nadi', '–û —á—ë–º —Ö–æ—Ç–∏—Ç–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å?');
                                      }}
                                      className="bg-white hover:bg-pink-50 border-2 border-pink-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>üí≠</span>
                                      <span>–ó–∞–ø–∏—Å–∞—Ç—å –Ω–æ–≤–æ–µ</span>
                                    </button>
                                    <button
                                      onClick={() => {
                                        setActiveSection('artifacts');
                                      }}
                                      className="bg-white hover:bg-green-50 border-2 border-green-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>üå≥</span>
                                      <span>–î–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä–µ–≤–æ</span>
                                    </button>
                                  </>
                                ) : messages.length > 3 ? (
                                  <>
                                    {/* –ï—Å–ª–∏ –µ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ */}
                                    <button
                                      onClick={() => {
                                        setStep(10);
                                        addMessage('nadi', '–ü—Ä–æ–¥–æ–ª–∂–∏–º –Ω–∞—à —Ä–∞–∑–≥–æ–≤–æ—Ä! –û —á—ë–º —Ö–æ—Ç–∏—Ç–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å?');
                                      }}
                                      className="bg-white hover:bg-blue-50 border-2 border-blue-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>üí¨</span>
                                      <span>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä</span>
                                    </button>
                                    <button
                                      onClick={handleOpenPhotoStory}
                                      className="bg-white hover:bg-purple-50 border-2 border-purple-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>üì∏</span>
                                      <span>–†–∞–∑–æ–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</span>
                                    </button>
                                    <button
                                      onClick={() => {
                                        setStep(10);
                                        addMessage('nadi', '–ù–∞—á–Ω—ë–º –Ω–æ–≤—É—é –∏—Å—Ç–æ—Ä–∏—é! –û —á—ë–º —Ä–∞—Å—Å–∫–∞–∂–µ—Ç–µ?');
                                      }}
                                      className="bg-white hover:bg-pink-50 border-2 border-pink-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>‚ú®</span>
                                      <span>–ù–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è</span>
                                    </button>
                                  </>
                                ) : (
                                  <>
                                    {/* –ï—Å–ª–∏ –¥–∞–≤–Ω–æ –Ω–µ –∑–∞—Ö–æ–¥–∏–ª / –ø–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç */}
                                    <button
                                      onClick={() => {
                                        setStep(10);
                                        addMessage('nadi', '–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –≤–∞–∂–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ –≤–∞—à–µ–π –∂–∏–∑–Ω–∏? –ú–æ–∂–µ—Ç –±—ã—Ç—å, –∫–∞–∫–æ–µ-—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ?');
                                      }}
                                      className="bg-white hover:bg-red-50 border-2 border-red-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>‚ù§Ô∏è</span>
                                      <span>–í—Å–ø–æ–º–Ω–∏—Ç—å –≤–∞–∂–Ω–æ–µ</span>
                                    </button>
                                    <button
                                      onClick={handleOpenPhotoStory}
                                      className="bg-white hover:bg-blue-50 border-2 border-blue-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>üì∏</span>
                                      <span>–†–∞–∑–æ–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</span>
                                    </button>
                                    <button
                                      onClick={() => {
                                        setStep(10);
                                        addMessage('nadi', '–û—Ç–ª–∏—á–Ω–æ! –Ø –≥–æ—Ç–æ–≤–∞ –∑–∞–ø–∏—Å–∞—Ç—å –≤–∞—à –≥–æ–ª–æ—Å. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Ç–æ–º, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–ª—è –ø–æ—Ç–æ–º–∫–æ–≤.');
                                      }}
                                      className="bg-white hover:bg-green-50 border-2 border-green-200 text-gray-800 px-5 py-3 rounded-full font-medium transition-all hover:scale-105 hover:shadow-lg flex items-center gap-2"
                                    >
                                      <span>üéôÔ∏è</span>
                                      <span>–ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å</span>
                                    </button>
                                  </>
                                )}
                              </div>
                            </div>
                          </div>
                        )}

                        {messages.map((msg) => (
                          <div
                            key={msg.id}
                            className={`flex ${msg.sender === 'user' ? 'justify-end' : msg.sender === 'system' ? 'justify-center' : 'justify-start'}`}
                            style={{animation: 'fadeIn 0.3s ease-in'}}
                          >
                            <div
                              className={`${msg.sender === 'system' ? 'max-w-xs' : 'max-w-[75%]'} rounded-2xl px-5 py-3 ${
                                msg.sender === 'user'
                                  ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white'
                                  : msg.sender === 'system'
                                  ? 'bg-blue-100 text-blue-800 text-sm'
                                  : 'bg-white text-gray-800 shadow-sm'
                              }`}
                            >
                              <p className="whitespace-pre-wrap">{msg.text}</p>
                            </div>
                          </div>
                        ))}

                        {isTyping && (
                          <div className="flex justify-start">
                            <div className="bg-white rounded-2xl px-5 py-3 flex items-center gap-2 shadow-sm">
                              <div className="flex gap-1">
                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.2s'}}></div>
                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.4s'}}></div>
                              </div>
                            </div>
                          </div>
                        )}


                        <div ref={messagesEndRef} />
                      </div>

                      <div className="bg-white border-t border-gray-200 p-6">
                        {step >= 10 ? (
                          <div className="space-y-3">
                            <div className="flex gap-3">
                              <input
                                type="text"
                                value={userInput}
                                onChange={(e) => setUserInput(e.target.value)}
                                onKeyPress={handleKeyPress}
                                placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                                className="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 transition-all"
                              />
                              <button
                                onClick={handleVoiceRecord}
                                className={`p-3 rounded-xl transition-all ${
                                  isRecording 
                                    ? 'bg-red-500 text-white animate-pulse' 
                                    : 'border border-gray-300 hover:bg-gray-50'
                                }`}
                                title={isRecording ? '–ó–∞–ø–∏—Å—å...' : '–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'}
                              >
                                <span className="text-xl">{isRecording ? '‚è∫Ô∏è' : 'üé§'}</span>
                              </button>
                              <button
                                onClick={handleSendMessage}
                                disabled={!userInput.trim()}
                                className="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl px-6 py-3 font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                              >
                                –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                              </button>
                            </div>
                            {isRecording && (
                              <div className="text-center text-sm text-red-600 flex items-center justify-center gap-2">
                                <span className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                                <span>–ò–¥—ë—Ç –∑–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–∞...</span>
                              </div>
                            )}
                            <button
                              onClick={handleNewChat}
                              className="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl py-3 font-semibold hover:shadow-lg transition-all"
                            >
                              üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
                            </button>
                          </div>
                        ) : (
                          <>
                            <div className="flex gap-3">
                              <button
                                onClick={handleNext}
                                className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl py-4 font-semibold hover:shadow-lg transition-all"
                              >
                                {getButtonText()}
                              </button>
                            </div>
                            
                            <div className="mt-4">
                              <div className="flex justify-between text-xs text-gray-500 mb-2">
                                <span>–®–∞–≥ {progress} –∏–∑ {totalSteps}</span>
                                <span>{Math.round((progress / totalSteps) * 100)}%</span>
                              </div>
                              <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div 
                                  className="h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500"
                                  style={{ width: `${(progress / totalSteps) * 100}%` }}
                                ></div>
                              </div>
                            </div>
                          </>
                        )}
                      </div>
                    </>
                  ) : activeSection === 'media' ? (
                    <>
                      {/* Media Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        {/* Header with storage info */}
                        <div className="flex items-center justify-between mb-4">
                          <div className="flex items-center gap-3">
                            <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                              <span className="cursor-pointer hover:text-purple-600" onClick={() => setActiveSection('home')}>‚Üê</span>
                              <span>–¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è</span>
                            </h2>
                            <div className="text-xs text-gray-500">
                              –í—Å–µ–≥–æ: <span className="font-semibold text-gray-700">{mediaStats.total.toLocaleString()} —ç–ª–µ–º–µ–Ω—Ç–æ–≤</span> | <span className="font-semibold text-gray-700">{mediaStats.storageUsed} –ì–ë –∏–∑ {mediaStats.storageTotal} –ì–ë</span>
                            </div>
                          </div>
                          <div className="flex items-center gap-3">
                            <span className="text-sm font-medium text-gray-700">–í–∏–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:</span>
                            <div className="flex gap-2">
                              <button
                                onClick={() => setDisplayMode('smartFeed')}
                                className={`p-3 rounded-lg transition-all ${displayMode === 'smartFeed' ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md' : 'bg-white border-2 border-gray-300 text-gray-600 hover:border-purple-400'}`}
                                title="–£–º–Ω–∞—è –ª–µ–Ω—Ç–∞"
                              >
                                <span className="text-xl">üì±</span>
                              </button>
                              <button
                                onClick={() => setDisplayMode('grid')}
                                className={`p-3 rounded-lg transition-all ${displayMode === 'grid' ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md' : 'bg-white border-2 border-gray-300 text-gray-600 hover:border-purple-400'}`}
                                title="–°–µ—Ç–∫–∞"
                              >
                                <span className="text-xl">‚äû</span>
                              </button>
                              <button
                                onClick={() => setDisplayMode('list')}
                                className={`p-3 rounded-lg transition-all ${displayMode === 'list' ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md' : 'bg-white border-2 border-gray-300 text-gray-600 hover:border-purple-400'}`}
                                title="–°–ø–∏—Å–æ–∫"
                              >
                                <span className="text-xl">‚â°</span>
                              </button>
                            </div>
                          </div>
                        </div>

                        {/* Search Bar with Voice Input */}
                        <div className="mb-4">
                          <div className="relative">
                            <input
                              type="text"
                              value={searchQuery}
                              onChange={(e) => setSearchQuery(e.target.value)}
                              placeholder="–ù–∞–π–¥–∏ —Ñ–æ—Ç–æ —Å –º–∞–º–æ–π..."
                              className="w-full px-4 py-3 pl-10 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 transition-all"
                            />
                            <span className="absolute left-3 top-3.5 text-xl">üîç</span>
                            <button className="absolute right-3 top-2.5 p-1.5 hover:bg-gray-100 rounded-lg transition-all" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–∏—Å–∫">
                              <span className="text-xl">üé§</span>
                            </button>
                          </div>
                        </div>

                        {/* Filter Tabs */}
                        <div className="flex gap-2 overflow-x-auto pb-2">
                          <button
                            onClick={() => setMediaFilter('all')}
                            className={`px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${
                              mediaFilter === 'all'
                                ? 'bg-purple-100 text-purple-700'
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                            }`}
                          >
                            –í—Å–µ ({mediaStats.total})
                          </button>
                          <button
                            onClick={() => setMediaFilter('photos')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${
                              mediaFilter === 'photos'
                                ? 'bg-purple-100 text-purple-700 border-2 border-purple-300'
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-transparent'
                            }`}
                          >
                            <div className="flex items-center gap-2">
                              <span className="text-lg">üì∑</span>
                              <div className="flex flex-col items-start">
                                <span className="font-bold">–§–æ—Ç–æ</span>
                                <span className="text-xs opacity-75">{mediaStats.photos} ‚Ä¢ 3.2 –ì–ë</span>
                              </div>
                            </div>
                          </button>
                          <button
                            onClick={() => setMediaFilter('videos')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${
                              mediaFilter === 'videos'
                                ? 'bg-purple-100 text-purple-700 border-2 border-purple-300'
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-transparent'
                            }`}
                          >
                            <div className="flex items-center gap-2">
                              <span className="text-lg">üé¨</span>
                              <div className="flex flex-col items-start">
                                <span className="font-bold">–í–∏–¥–µ–æ</span>
                                <span className="text-xs opacity-75">{mediaStats.videos} ‚Ä¢ 1.5 –ì–ë</span>
                              </div>
                            </div>
                          </button>
                          <button
                            onClick={() => setMediaFilter('audio')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${
                              mediaFilter === 'audio'
                                ? 'bg-purple-100 text-purple-700 border-2 border-purple-300'
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-transparent'
                            }`}
                          >
                            <div className="flex items-center gap-2">
                              <span className="text-lg">üéµ</span>
                              <div className="flex flex-col items-start">
                                <span className="font-bold">–ê—É–¥–∏–æ</span>
                                <span className="text-xs opacity-75">{mediaStats.audio} ‚Ä¢ 24 –ú–ë</span>
                              </div>
                            </div>
                          </button>
                          <button
                            onClick={() => setMediaFilter('voice')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${
                              mediaFilter === 'voice'
                                ? 'bg-purple-100 text-purple-700 border-2 border-purple-300'
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-transparent'
                            }`}
                          >
                            <div className="flex items-center gap-2">
                              <span className="text-lg">üé§</span>
                              <div className="flex flex-col items-start">
                                <span className="font-bold">–ì–æ–ª–æ—Å–æ–≤—ã–µ</span>
                                <span className="text-xs opacity-75">{mediaStats.voice} ‚Ä¢ 156 –ú–ë</span>
                              </div>
                            </div>
                          </button>
                          <button
                            onClick={() => setMediaFilter('files')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${
                              mediaFilter === 'files'
                                ? 'bg-purple-100 text-purple-700 border-2 border-purple-300'
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-transparent'
                            }`}
                          >
                            <div className="flex items-center gap-2">
                              <span className="text-lg">üìÑ</span>
                              <div className="flex flex-col items-start">
                                <span className="font-bold">–§–∞–π–ª—ã</span>
                                <span className="text-xs opacity-75">{mediaStats.files} ‚Ä¢ 95 –ú–ë</span>
                              </div>
                            </div>
                          </button>
                          <button
                            onClick={() => setMediaFilter('links')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${
                              mediaFilter === 'links'
                                ? 'bg-purple-100 text-purple-700 border-2 border-purple-300'
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-transparent'
                            }`}
                          >
                            <div className="flex items-center gap-2">
                              <span className="text-lg">üîó</span>
                              <div className="flex flex-col items-start">
                                <span className="font-bold">–°—Å—ã–ª–∫–∏</span>
                                <span className="text-xs opacity-75">{mediaStats.links} ‚Ä¢ 8 –ú–ë</span>
                              </div>
                            </div>
                          </button>
                          <button
                            onClick={() => setMediaFilter('gifs')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${
                              mediaFilter === 'gifs'
                                ? 'bg-purple-100 text-purple-700 border-2 border-purple-300'
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-transparent'
                            }`}
                          >
                            <div className="flex items-center gap-2">
                              <span className="text-lg">GIF</span>
                              <div className="flex flex-col items-start">
                                <span className="font-bold">GIF</span>
                                <span className="text-xs opacity-75">{mediaStats.gifs} ‚Ä¢ 42 –ú–ë</span>
                              </div>
                            </div>
                          </button>
                        </div>
                      </div>

                      {/* –ü–∞–Ω–µ–ª—å –º–∞—Å—Å–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π */}
                      {selectedItems.length > 0 && (
                        <div className="bg-purple-100 border-b border-purple-200 px-6 py-3">
                          <div className="flex items-center justify-between">
                            <span className="text-sm font-medium text-purple-800">–í—ã–±—Ä–∞–Ω–æ: {selectedItems.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤</span>
                            <div className="flex gap-2">
                              <button className="px-3 py-1.5 bg-white text-purple-700 text-sm rounded-lg hover:bg-purple-50 transition-all font-medium">
                                üìù –û–ø–∏—Å–∞—Ç—å —Å Nadi
                              </button>
                              <button className="px-3 py-1.5 bg-white text-purple-700 text-sm rounded-lg hover:bg-purple-50 transition-all font-medium">
                                ‚≠ê –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
                              </button>
                              <button className="px-3 py-1.5 bg-white text-purple-700 text-sm rounded-lg hover:bg-purple-50 transition-all font-medium">
                                üìÅ –í –∞–ª—å–±–æ–º
                              </button>
                              <button className="px-3 py-1.5 bg-white text-red-600 text-sm rounded-lg hover:bg-red-50 transition-all font-medium">
                                üóë –£–¥–∞–ª–∏—Ç—å
                              </button>
                              <button className="px-3 py-1.5 bg-white text-purple-700 text-sm rounded-lg hover:bg-purple-50 transition-all font-medium">
                                ‚¨á –°–∫–∞—á–∞—Ç—å
                              </button>
                            </div>
                          </div>
                        </div>
                      )}

                      {/* Media Content with Sidebar */}
                      <div className="flex-1 flex overflow-hidden bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        {/* Main Content */}
                        <div className="flex-1 overflow-y-auto p-6">
                          {/* Smart Feed View */}
                          {displayMode === 'smartFeed' && (
                          <div className="space-y-6">
                            {smartFeedData.map((period, idx) => (
                              <div key={idx} className="bg-white rounded-xl p-5 shadow-sm border border-gray-200">
                                <div className="flex items-center justify-between mb-4">
                                  <div>
                                    <h3 className="text-lg font-semibold text-gray-800 flex items-center gap-2">
                                      üìÖ {period.period}
                                    </h3>
                                    {period.event && (
                                      <p className="text-sm text-purple-600 mt-1">üéÇ {period.event}</p>
                                    )}
                                  </div>
                                </div>
                                <div className="grid grid-cols-6 gap-3 mb-4">
                                  {period.items.map((item) => (
                                    <div key={item.id} className="aspect-square bg-gradient-to-br from-purple-300 to-pink-300 rounded-lg flex items-center justify-center text-4xl cursor-pointer hover:scale-105 transition-all overflow-hidden">
                                      {item.imageUrl ? (
                                        <img src={item.imageUrl} alt={item.title} className="w-full h-full object-cover" />
                                      ) : (
                                        <span>{item.emoji}</span>
                                      )}
                                    </div>
                                  ))}
                                </div>
                                <div className="flex items-center justify-between text-sm">
                                  <span className="text-gray-600">+{period.totalCount - period.items.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤</span>
                                  <div className="flex gap-2">
                                    {period.suggestion && (
                                      <>
                                        <span className="text-gray-500 italic">"{period.suggestion}"</span>
                                        <button className="px-3 py-1 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all font-medium">
                                          –°–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º
                                        </button>
                                      </>
                                    )}
                                    {period.event && (
                                      <button className="px-3 py-1 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-all font-medium">
                                        –û—Ç–∫—Ä—ã—Ç—å —Å–æ–±—ã—Ç–∏–µ
                                      </button>
                                    )}
                                    <button className="px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all font-medium">
                                      –û–ø–∏—Å–∞—Ç—å —Å Nadi
                                    </button>
                                  </div>
                                </div>
                              </div>
                            ))}
                          </div>
                        )}

                        {/* Grid View */}
                        {displayMode === 'grid' && (
                          <div className="space-y-4">
                            <div className="grid grid-cols-6 gap-4">
                              {mediaItems.map(item => (
                                <div key={item.id} className="relative group">
                                  <div className="aspect-square bg-gradient-to-br from-purple-300 to-pink-300 rounded-xl flex items-center justify-center text-5xl cursor-pointer hover:scale-105 transition-all shadow-lg overflow-hidden">
                                    {item.imageUrl ? (
                                      <img src={item.imageUrl} alt={item.title} className="w-full h-full object-cover" />
                                    ) : (
                                      <span>{item.icon}</span>
                                    )}
                                  </div>
                                  <div className="absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <input
                                      type="checkbox"
                                      className="w-5 h-5"
                                      checked={selectedItems.includes(item.id)}
                                      onChange={(e) => {
                                        if (e.target.checked) {
                                          setSelectedItems([...selectedItems, item.id]);
                                        } else {
                                          setSelectedItems(selectedItems.filter(id => id !== item.id));
                                        }
                                      }}
                                    />
                                  </div>
                                  <div className="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded-xl transition-all flex items-center justify-center opacity-0 group-hover:opacity-100">
                                    <button className="bg-white px-3 py-1.5 rounded-lg text-sm font-medium">
                                      –ü—Ä–æ—Å–º–æ—Ç—Ä
                                    </button>
                                  </div>
                                  <div className="mt-1 text-xs text-gray-600 text-center truncate px-1">
                                    {item.title || item.name}
                                  </div>
                                </div>
                              ))}
                            </div>
                          </div>
                        )}

                        {/* List View */}
                        {displayMode === 'list' && (
                          <div className="space-y-2">
                            {mediaItems.map((item) => (
                              <div key={item.id} className="bg-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-all">
                                <div className="flex items-center gap-4">
                                  <input
                                    type="checkbox"
                                    className="w-5 h-5"
                                    checked={selectedItems.includes(item.id)}
                                    onChange={(e) => {
                                      if (e.target.checked) {
                                        setSelectedItems([...selectedItems, item.id]);
                                      } else {
                                        setSelectedItems(selectedItems.filter(id => id !== item.id));
                                      }
                                    }}
                                  />
                                  <span className="text-2xl">{item.icon}</span>
                                  <div className="flex-1">
                                    <div className="font-medium text-gray-800">{item.name}</div>
                                    <div className="text-sm text-gray-500">
                                      {item.date} ‚Ä¢ {item.event} {item.people && `‚Ä¢ ${item.people}`}
                                    </div>
                                  </div>
                                  <div className="flex gap-2">
                                    <button className="p-2 hover:bg-gray-100 rounded-lg transition-all" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">üëÅ</button>
                                    <button className="p-2 hover:bg-gray-100 rounded-lg transition-all" title="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ">‚≠ê</button>
                                    <button className="p-2 hover:bg-gray-100 rounded-lg transition-all" title="–û–ø–∏—Å–∞—Ç—å">üìù</button>
                                    <button className="p-2 hover:bg-gray-100 rounded-lg transition-all" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öô</button>
                                  </div>
                                </div>
                              </div>
                            ))}
                          </div>
                        )}
                        </div>

                        {/* Right Sidebar - Additional Filters */}
                        <div className="w-72 bg-white border-l border-gray-200 overflow-y-auto p-6">
                          <div className="space-y-6">
                            {/* –û—Å–æ–±—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */}
                            <div>
                              <h4 className="text-sm font-bold text-gray-700 mb-3">–û—Å–æ–±—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
                              <div className="space-y-2">
                                {specialCategories.map((category) => (
                                  <button key={category.id} className="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-all border border-gray-200">
                                    <span className="text-2xl">{category.emoji}</span>
                                    <div className="flex-1 text-left">
                                      <div className="text-sm font-medium text-gray-800">{category.name}</div>
                                      <div className="text-xs text-gray-500">{category.count}</div>
                                    </div>
                                  </button>
                                ))}
                              </div>
                            </div>

                            {/* –õ—é–¥–∏ */}
                            <div>
                              <h4 className="text-sm font-bold text-gray-700 mb-3">–õ—é–¥–∏</h4>
                              <div className="space-y-2">
                                {peopleAlbums.map((person) => (
                                  <button key={person.id} className="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-all border border-gray-200">
                                    <div className="w-10 h-10 bg-gradient-to-br from-purple-300 to-pink-300 rounded-full flex items-center justify-center text-xl">
                                      {person.emoji}
                                    </div>
                                    <div className="flex-1 text-left">
                                      <div className="text-sm font-medium text-gray-800">{person.name}</div>
                                      <div className="text-xs text-gray-500">{person.count}</div>
                                    </div>
                                  </button>
                                ))}
                              </div>
                            </div>

                            {/* –ü–∏—Ç–æ–º—Ü—ã */}
                            <div>
                              <h4 className="text-sm font-bold text-gray-700 mb-3">–ü–∏—Ç–æ–º—Ü—ã</h4>
                              <div className="space-y-2">
                                {petAlbums.map((pet) => (
                                  <button key={pet.id} className="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-all border border-gray-200">
                                    <div className="w-10 h-10 bg-gradient-to-br from-orange-300 to-amber-300 rounded-full flex items-center justify-center text-xl">
                                      {pet.emoji}
                                    </div>
                                    <div className="flex-1 text-left">
                                      <div className="text-sm font-medium text-gray-800">{pet.name}</div>
                                      <div className="text-xs text-gray-500">{pet.count}</div>
                                    </div>
                                  </button>
                                ))}
                              </div>
                            </div>

                            {/* –ê–ª—å–±–æ–º—ã */}
                            <div>
                              <h4 className="text-sm font-bold text-gray-700 mb-3">–ê–ª—å–±–æ–º—ã</h4>
                              <div className="space-y-2">
                                {eventAlbums.map((album) => (
                                  <button key={album.id} className="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-all border border-gray-200">
                                    <span className="text-2xl">{album.emoji}</span>
                                    <div className="flex-1 text-left">
                                      <div className="text-sm font-medium text-gray-800">{album.name}</div>
                                      <div className="text-xs text-gray-500">{album.count}</div>
                                    </div>
                                  </button>
                                ))}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </>
                  ) : activeSection === 'artifacts' ? (
                    <>
                      {/* Artifacts Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div>
                          <h2 className="text-2xl font-bold text-gray-800">AI –ö—Ä–µ–∞—Ç–æ—Ä</h2>
                          <p className="text-sm text-gray-500 mt-1">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–∑ –≤–∞—à–∏—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π —Å –ø–æ–º–æ—â—å—é AI</p>
                        </div>
                      </div>

                      {/* Artifacts Content */}
                      <div className="flex-1 overflow-y-auto p-6 bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        <div className="max-w-6xl mx-auto space-y-8">
                          {/* Active Artifact */}
                          <div>
                            <h3 className="text-lg font-semibold text-gray-700 mb-4">
                              –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
                            </h3>
                            <div className="grid grid-cols-2 gap-6 max-w-4xl">
                              <div
                                onClick={handleOpenPhotoGreeting}
                                className="bg-white rounded-xl overflow-hidden border-2 border-purple-200 hover:shadow-2xl hover:scale-105 transition-all cursor-pointer group"
                              >
                                <div className="aspect-video bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-7xl relative">
                                  <span className="group-hover:scale-110 transition-transform">üéâ</span>
                                  <div className="absolute top-3 right-3 bg-green-500 text-white text-xs px-3 py-1.5 rounded-full font-medium shadow-lg">
                                    –ê–∫—Ç–∏–≤–Ω–æ
                                  </div>
                                </div>
                                <div className="p-6">
                                  <h3 className="font-bold text-lg text-gray-800 mb-2">–§–æ—Ç–æ–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
                                  <p className="text-sm text-gray-600">–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏</p>
                                </div>
                              </div>

                              {/* Photo Story Card */}
                              <div
                                onClick={handleOpenPhotoStory}
                                className="bg-white rounded-xl overflow-hidden border-2 border-blue-200 hover:shadow-2xl hover:scale-105 transition-all cursor-pointer group"
                              >
                                <div className="aspect-video bg-gradient-to-br from-blue-400 to-cyan-400 flex items-center justify-center text-7xl relative">
                                  <span className="group-hover:scale-110 transition-transform">üì∏</span>
                                  <div className="absolute top-3 right-3 bg-green-500 text-white text-xs px-3 py-1.5 rounded-full font-medium shadow-lg">
                                    –ê–∫—Ç–∏–≤–Ω–æ
                                  </div>
                                </div>
                                <div className="p-6">
                                  <h3 className="font-bold text-lg text-gray-800 mb-2">–§–æ—Ç–æ–ò—Å—Ç–æ—Ä–∏–∏</h3>
                                  <p className="text-sm text-gray-600">–û–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∂–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</p>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* Coming Soon - Additional Services */}
                          <div>
                            <h3 className="text-lg font-semibold text-gray-700 mb-4">
                              –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (—Å–∫–æ—Ä–æ)
                            </h3>
                            <div className="grid grid-cols-3 gap-4">
                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-blue-300 to-indigo-300 flex items-center justify-center text-6xl">
                                  <span>üéôÔ∏è</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ó–∞–ø–∏—à–∏ –∏—Å—Ç–æ—Ä–∏—é —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞</h4>
                                  <p className="text-xs text-gray-600">Guided-–∏–Ω—Ç–µ—Ä–≤—å—é —Å AI —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-green-300 to-emerald-300 flex items-center justify-center text-6xl">
                                  <span>üå≥</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–°–µ–º–µ–π–Ω–æ–µ –¥—Ä–µ–≤–æ</h4>
                                  <p className="text-xs text-gray-600">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≥–µ–Ω–µ–∞–ª–æ–≥–∏–∏</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-purple-300 to-pink-300 flex items-center justify-center text-6xl">
                                  <span>üíå</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ü–∏—Å—å–º–æ –≤ –±—É–¥—É—â–µ–µ</h4>
                                  <p className="text-xs text-gray-600">–ö–∞–ø—Å—É–ª–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å —Ç–∞–π–º–µ—Ä–æ–º –æ—Ç–∫—Ä—ã—Ç–∏—è</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-yellow-300 to-orange-300 flex items-center justify-center text-6xl">
                                  <span>üìù</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–Ω—è</h4>
                                  <p className="text-xs text-gray-600">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –º–∏–∫—Ä–æ-–¥–∏–∞–ª–æ–≥ —Å Nadi</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* Content Processing */}
                          <div>
                            <h3 className="text-lg font-semibold text-gray-700 mb-4">
                              –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Å–∫–æ—Ä–æ)
                            </h3>
                            <div className="grid grid-cols-3 gap-4">
                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-gray-300 to-slate-300 flex items-center justify-center text-6xl">
                                  <span>üìÑ</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–û—Ü–∏—Ñ—Ä–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–∞</h4>
                                  <p className="text-xs text-gray-600">OCR –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–∏—Å–µ–º</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-amber-300 to-orange-300 flex items-center justify-center text-6xl">
                                  <span>üñºÔ∏è</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ</h4>
                                  <p className="text-xs text-gray-600">AI-—Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏—è –∏ –∫–æ–ª–æ—Ä–∏–∑–∞—Ü–∏—è</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-red-300 to-pink-300 flex items-center justify-center text-6xl">
                                  <span>üé¨</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–í–∏–¥–µ–æ-–∫–∞–ø—Å—É–ª–∞</h4>
                                  <p className="text-xs text-gray-600">–í–∏–¥–µ–æ-–æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ—Ç–æ–º–∫–∞–º</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* Emotional Services */}
                          <div>
                            <h3 className="text-lg font-semibold text-gray-700 mb-4">
                              –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (—Å–∫–æ—Ä–æ)
                            </h3>
                            <div className="grid grid-cols-3 gap-4">
                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-teal-300 to-cyan-300 flex items-center justify-center text-6xl">
                                  <span>üó∫Ô∏è</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ö–∞—Ä—Ç–∞ –∂–∏–∑–Ω–∏</h4>
                                  <p className="text-xs text-gray-600">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è–º–∏</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-indigo-300 to-purple-300 flex items-center justify-center text-6xl">
                                  <span>üìú</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ù–∞—Å–ª–µ–¥–∏–µ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π</h4>
                                  <p className="text-xs text-gray-600">–°–µ–º–µ–π–Ω—ã–π –∫–æ–¥–µ–∫—Å –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-gray-300 to-blue-300 flex items-center justify-center text-6xl">
                                  <span>üïäÔ∏è</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ù–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è</h4>
                                  <p className="text-xs text-gray-600">–°–±–æ—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* Practical & Social & Creative */}
                          <div>
                            <h3 className="text-lg font-semibold text-gray-700 mb-4 flex items-center gap-2">
                              <span className="text-2xl">üé®</span>
                              <span>–î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã (—Å–∫–æ—Ä–æ)</span>
                            </h3>
                            <div className="grid grid-cols-3 gap-4">
                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-red-300 to-pink-300 flex items-center justify-center text-6xl">
                                  <span>üè•</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è</h4>
                                  <p className="text-xs text-gray-600">–ù–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-orange-300 to-yellow-300 flex items-center justify-center text-6xl">
                                  <span>üç≥</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–†–µ—Ü–µ–ø—Ç—ã —Å–µ–º—å–∏</h4>
                                  <p className="text-xs text-gray-600">–ö—É–ª–∏–Ω–∞—Ä–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–∏–µ</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-pink-300 to-purple-300 flex items-center justify-center text-6xl">
                                  <span>üéä</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–°–µ–º–µ–π–Ω—ã–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏</h4>
                                  <p className="text-xs text-gray-600">–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∏—Ç—É–∞–ª–æ–≤</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-blue-300 to-indigo-300 flex items-center justify-center text-6xl">
                                  <span>üìî</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–û–±—â–∏–π –∞–ª—å–±–æ–º</h4>
                                  <p className="text-xs text-gray-600">–°–æ–≤–º–µ—Å—Ç–Ω–∞—è –∫–∞–ø—Å—É–ª–∞ –ø–∞–º—è—Ç–∏</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-green-300 to-teal-300 flex items-center justify-center text-6xl">
                                  <span>üîç</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ù–∞–π–¥–∏ —Å–≤—è–∑–∏</h4>
                                  <p className="text-xs text-gray-600">AI –ø–æ–∏—Å–∫ –ø–æ —Ñ–æ—Ç–æ</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-purple-300 to-pink-300 flex items-center justify-center text-6xl">
                                  <span>üìñ</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–§–æ—Ç–æ–∫–Ω–∏–≥–∞ –∑–∞ 5 –º–∏–Ω—É—Ç</h4>
                                  <p className="text-xs text-gray-600">AI-–¥–∏–∑–∞–π–Ω –∏ –≤–µ—Ä—Å—Ç–∫–∞</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-yellow-300 to-orange-300 flex items-center justify-center text-6xl">
                                  <span>üéûÔ∏è</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è</h4>
                                  <p className="text-xs text-gray-600">–§–æ—Ç–æ –≤ –≤–∏–¥–µ–æ —Å –º—É–∑—ã–∫–æ–π</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>

                              <div className="bg-white rounded-xl overflow-hidden border border-gray-200 opacity-60 cursor-not-allowed relative">
                                <div className="aspect-video bg-gradient-to-br from-blue-300 to-cyan-300 flex items-center justify-center text-6xl">
                                  <span>üéôÔ∏è</span>
                                </div>
                                <div className="p-4">
                                  <h4 className="font-bold text-base text-gray-800 mb-1">–ì–æ–ª–æ—Å–æ–≤–æ–µ –Ω–∞—Å–ª–µ–¥–∏–µ</h4>
                                  <p className="text-xs text-gray-600">–ê—É–¥–∏–æ-–∫–∞–ø—Å—É–ª—ã –¥–ª—è –ø–æ—Ç–æ–º–∫–æ–≤</p>
                                </div>
                                <div className="absolute inset-0 bg-gray-100/50 backdrop-blur-[1px] flex items-center justify-center">
                                  <div className="bg-gray-800 text-white px-3 py-1.5 rounded-lg text-sm font-medium">–°–∫–æ—Ä–æ</div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </>
                  ) : activeSection === 'photo-greeting' ? (
                    <>
                      {/* Photo Greeting Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div className="flex items-center justify-between">
                          <div>
                            <button
                              onClick={handleClosePhotoGreeting}
                              className="text-purple-600 hover:text-purple-700 mb-2 flex items-center gap-2"
                            >
                              <span>‚Üê</span>
                              <span>–ù–∞–∑–∞–¥ –∫ AI –ö—Ä–µ–∞—Ç–æ—Ä—É</span>
                            </button>
                            <h2 className="text-2xl font-bold text-gray-800">–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ç–æ–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
                            <p className="text-sm text-gray-500 mt-1">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –∏ —Å—Ç–∏–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</p>
                          </div>
                        </div>
                      </div>

                      {/* Photo Greeting Content */}
                      <div className="flex-1 overflow-hidden bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        {!showGreetingEditor ? (
                          <div className="flex-1 overflow-y-auto p-6 h-full">
                          <div className="max-w-4xl mx-auto space-y-6">
                            {/* Photos Section */}
                            <div className="bg-white rounded-xl p-6 shadow-sm">
                              <div className="flex items-center justify-between mb-4">
                                <div>
                                  <h3 className="text-lg font-semibold text-gray-800">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h3>
                                  <p className="text-sm text-gray-500">–î–æ–±–∞–≤—å—Ç–µ –¥–æ 20 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π ({greetingPhotos.length}/20)</p>
                                </div>
                                <button
                                  onClick={handleAddGreetingPhoto}
                                  disabled={greetingPhotos.length >= 20}
                                  className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
                                >
                                  <span>üì§</span>
                                  <span>–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</span>
                                </button>
                              </div>

                              {greetingPhotos.length === 0 ? (
                                <div className="border-2 border-dashed border-gray-300 rounded-xl p-12 text-center">
                                  <div className="text-6xl mb-4">üì∏</div>
                                  <p className="text-gray-600 mb-4">–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é</p>
                                  <button
                                    onClick={handleAddGreetingPhoto}
                                    className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-medium hover:shadow-lg transition-all"
                                  >
                                    –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                                  </button>
                                </div>
                              ) : (
                                <div className="grid grid-cols-5 gap-4">
                                  {greetingPhotos.map((photo) => (
                                    <div key={photo.id} className="relative group">
                                      <div className={`aspect-square bg-gradient-to-br ${photo.gradient} rounded-xl flex items-center justify-center text-4xl shadow-lg overflow-hidden`}>
                                        {photo.imageUrl ? (
                                          <img src={photo.imageUrl} alt="Greeting photo" className="w-full h-full object-cover" />
                                        ) : (
                                          <span>{photo.emoji}</span>
                                        )}
                                      </div>
                                      <button
                                        onClick={() => handleRemoveGreetingPhoto(photo.id)}
                                        className="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-xs font-bold"
                                      >
                                        √ó
                                      </button>
                                    </div>
                                  ))}
                                </div>
                              )}
                            </div>

                            {/* Theme Selection */}
                            <div className="bg-white rounded-xl p-6 shadow-sm">
                              <h3 className="text-lg font-semibold text-gray-800 mb-4">–¢–µ–º–∞ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
                              <select
                                value={greetingTheme}
                                onChange={(e) => setGreetingTheme(e.target.value)}
                                className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 transition-all"
                              >
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É...</option>
                                <option value="birthday">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è üéÇ</option>
                                <option value="wedding">–°–≤–∞–¥—å–±–∞ üíç</option>
                                <option value="anniversary">–ì–æ–¥–æ–≤—â–∏–Ω–∞ üíï</option>
                                <option value="graduation">–í—ã–ø—É—Å–∫–Ω–æ–π üéì</option>
                                <option value="newYear">–ù–æ–≤—ã–π –≥–æ–¥ üéÑ</option>
                                <option value="valentines">–î–µ–Ω—å –°–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞ üíù</option>
                                <option value="mothers">–î–µ–Ω—å –º–∞—Ç–µ—Ä–∏ üå∏</option>
                                <option value="fathers">–î–µ–Ω—å –æ—Ç—Ü–∞ üëî</option>
                                <option value="baby">–†–æ–∂–¥–µ–Ω–∏–µ —Ä–µ–±–µ–Ω–∫–∞ üë∂</option>
                                <option value="other">–î—Ä—É–≥–æ–µ üéâ</option>
                              </select>
                            </div>

                            {/* Style Selection */}
                            <div className="bg-white rounded-xl p-6 shadow-sm">
                              <h3 className="text-lg font-semibold text-gray-800 mb-4">–°—Ç–∏–ª—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
                              <div className="grid grid-cols-3 gap-4">
                                {[
                                  { value: 'festive', label: '–¢–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π', emoji: 'üé©', color: 'purple' },
                                  { value: 'fun', label: '–í–µ—Å–µ–ª—ã–π', emoji: 'üéâ', color: 'pink' },
                                  { value: 'romantic', label: '–†–æ–º–∞–Ω—Ç–∏—á–Ω—ã–π', emoji: 'üíï', color: 'red' },
                                  { value: 'warm', label: '–¢–µ–ø–ª—ã–π', emoji: 'üåü', color: 'orange' },
                                  { value: 'elegant', label: '–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π', emoji: '‚ú®', color: 'blue' },
                                  { value: 'playful', label: '–ò–≥—Ä–∏–≤—ã–π', emoji: 'üéà', color: 'green' }
                                ].map((style) => (
                                  <button
                                    key={style.value}
                                    onClick={() => setGreetingStyle(style.value)}
                                    className={`p-4 rounded-xl border-2 transition-all ${
                                      greetingStyle === style.value
                                        ? `border-${style.color}-500 bg-${style.color}-50`
                                        : 'border-gray-200 hover:border-gray-300'
                                    }`}
                                  >
                                    <div className="text-3xl mb-2">{style.emoji}</div>
                                    <div className="font-medium text-gray-800">{style.label}</div>
                                  </button>
                                ))}
                              </div>
                            </div>

                            {/* Additional Details */}
                            <div className="bg-white rounded-xl p-6 shadow-sm">
                              <h3 className="text-lg font-semibold text-gray-800 mb-4">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</h3>
                              <textarea
                                value={greetingDetails}
                                onChange={(e) => setGreetingDetails(e.target.value)}
                                placeholder="–î–æ–±–∞–≤—å—Ç–µ –æ—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è, –∏–º–µ–Ω–∞, –≤–∞–∂–Ω—ã–µ –¥–∞—Ç—ã –∏–ª–∏ –¥—Ä—É–≥–∏–µ –¥–µ—Ç–∞–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –≤ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ..."
                                className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 transition-all resize-none"
                                rows="5"
                              ></textarea>
                              <p className="text-xs text-gray-500 mt-2">–ù–∞–ø—Ä–∏–º–µ—Ä: "–≠—Ç–æ –¥–ª—è –º–æ–µ–π –∂–µ–Ω—ã –î–∞—à–∏, –µ–π –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è 30 –ª–µ—Ç. –ú—ã –≤–º–µ—Å—Ç–µ 10 –ª–µ—Ç."</p>
                            </div>

                            {/* Generate Button */}
                            <div className="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 border-2 border-purple-200">
                              <div className="flex items-center justify-between">
                                <div>
                                  <h3 className="text-lg font-semibold text-gray-800 mb-1">–ì–æ—Ç–æ–≤—ã —Å–æ–∑–¥–∞—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ?</h3>
                                  <p className="text-sm text-gray-600">AI —Å–æ–∑–¥–∞—Å—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π</p>
                                </div>
                                <button
                                  onClick={handleGenerateGreeting}
                                  disabled={isGeneratingGreeting || greetingPhotos.length === 0 || !greetingTheme || !greetingStyle}
                                  className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3 whitespace-nowrap"
                                >
                                  {isGeneratingGreeting ? (
                                    <>
                                      <span className="animate-spin">‚ü≥</span>
                                      <span>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</span>
                                    </>
                                  ) : (
                                    <>
                                      <span>‚ú®</span>
                                      <span>–°–æ–∑–¥–∞—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</span>
                                    </>
                                  )}
                                </button>
                              </div>
                            </div>
                          </div>
                          </div>
                        ) : (
                          /* Editor View with Chat and Preview */
                          <div className="flex h-full">
                            {/* Left Panel - Chat */}
                            <div className="w-1/2 flex flex-col border-r border-gray-200 bg-white">
                              <div className="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50">
                                <h3 className="text-lg font-semibold text-gray-800">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
                                <p className="text-sm text-gray-600 mt-1">–ü–æ–ø—Ä–æ—Å–∏—Ç–µ AI –∏–∑–º–µ–Ω–∏—Ç—å –¥–∏–∑–∞–π–Ω, —Ç–µ–∫—Å—Ç –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã</p>
                              </div>

                              <div className="flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                                {greetingMessages.map((msg) => (
                                  <div
                                    key={msg.id}
                                    className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}
                                    style={{animation: 'fadeIn 0.3s ease-in'}}
                                  >
                                    <div
                                      className={`max-w-[80%] rounded-2xl px-5 py-3 ${
                                        msg.sender === 'user'
                                          ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white'
                                          : 'bg-white text-gray-800 shadow-sm'
                                      }`}
                                    >
                                      <p className="whitespace-pre-wrap">{msg.text}</p>
                                    </div>
                                  </div>
                                ))}
                                <div ref={greetingMessagesEndRef} />
                              </div>

                              <div className="p-4 border-t border-gray-200 bg-white">
                                <div className="flex gap-2">
                                  <input
                                    type="text"
                                    value={greetingInput}
                                    onChange={(e) => setGreetingInput(e.target.value)}
                                    onKeyPress={handleGreetingKeyPress}
                                    placeholder="–ù–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å..."
                                    className="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 transition-all"
                                  />
                                  <button
                                    onClick={handleSendGreetingMessage}
                                    disabled={!greetingInput.trim()}
                                    className="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl px-6 py-3 font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                                  >
                                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                                  </button>
                                </div>
                              </div>
                            </div>

                            {/* Right Panel - Preview */}
                            <div className="w-1/2 flex flex-col bg-gray-50">
                              <div className="px-6 py-4 border-b border-gray-200 bg-white flex items-center justify-between">
                                <div>
                                  <h3 className="text-lg font-semibold text-gray-800">–ü—Ä–µ–≤—å—é –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
                                  <p className="text-sm text-gray-600 mt-1">–ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
                                </div>
                                <div className="flex gap-2">
                                  <button
                                    onClick={() => {
                                      navigator.clipboard.writeText(generatedGreetingUrl);
                                      alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
                                    }}
                                    className="px-4 py-2 border-2 border-purple-500 text-purple-700 rounded-lg font-medium hover:bg-purple-50 transition-all flex items-center gap-2"
                                  >
                                    <span>üìã</span>
                                    <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
                                  </button>
                                  <button
                                    onClick={handleShare}
                                    className="px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-medium hover:shadow-lg transition-all flex items-center gap-2"
                                  >
                                    <span>üì§</span>
                                    <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
                                  </button>
                                  <a
                                    href={generatedGreetingUrl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="px-4 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-all flex items-center gap-2"
                                  >
                                    <span>üíæ</span>
                                    <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                                  </a>
                                </div>
                              </div>

                              <div className="flex-1 overflow-hidden p-6">
                                <div className="w-full h-full bg-white rounded-xl shadow-lg overflow-hidden">
                                  <iframe
                                    src={generatedGreetingUrl}
                                    className="w-full h-full border-0"
                                    title="–ü—Ä–µ–≤—å—é –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        )}

                        {/* Loading Overlay */}
                        {isGeneratingGreeting && (
                          <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
                            <div className="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
                              <div className="text-6xl mb-4 animate-pulse">‚ú®</div>
                              <h3 className="text-2xl font-bold text-gray-800 mb-2">–°–æ–∑–¥–∞–µ–º –≤–∞—à–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
                              <p className="text-gray-600 mb-6">AI –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∞—à–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω...</p>
                              <div className="flex justify-center gap-2">
                                <div className="w-3 h-3 bg-purple-500 rounded-full animate-bounce"></div>
                                <div className="w-3 h-3 bg-pink-500 rounded-full animate-bounce" style={{animationDelay: '0.2s'}}></div>
                                <div className="w-3 h-3 bg-purple-500 rounded-full animate-bounce" style={{animationDelay: '0.4s'}}></div>
                              </div>
                            </div>
                          </div>
                        )}
                      </div>
                    </>
                  ) : activeSection === 'photo-story' ? (
                    <>
                      {/* Photo Story Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div className="flex items-center justify-between">
                          <div>
                            <button
                              onClick={handleClosePhotoStory}
                              className="text-blue-600 hover:text-blue-700 mb-2 flex items-center gap-2"
                            >
                              <span>‚Üê</span>
                              <span>–ù–∞–∑–∞–¥ –∫ AI –ö—Ä–µ–∞—Ç–æ—Ä—É</span>
                            </button>
                            <h2 className="text-2xl font-bold text-gray-800">–§–æ—Ç–æ–ò—Å—Ç–æ—Ä–∏–∏</h2>
                            <p className="text-sm text-gray-500 mt-1">–°–æ–∑–¥–∞–π—Ç–µ –∂–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ –≤–∞—à–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</p>
                          </div>
                        </div>
                      </div>

                      {/* Photo Story Content */}
                      <div className="flex-1 flex flex-col overflow-hidden bg-gradient-to-br from-blue-50/30 via-cyan-50/30 to-purple-50/30">
                        {!showStoryReview ? (
                          <div className="flex flex-1 h-full">
                            {/* Left Side - Chat */}
                            <div className="flex-1 flex flex-col bg-gray-50">
                              {/* Chat Messages */}
                              <div className="flex-1 overflow-y-auto p-6">
                                <div className="max-w-3xl mx-auto space-y-4">
                                  {storyMessages.map((message) => (
                                    <div key={message.id} className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
                                      <div className={`max-w-[80%] rounded-2xl px-4 py-3 ${
                                        message.sender === 'user'
                                          ? 'bg-blue-500 text-white'
                                          : 'bg-white text-gray-800 shadow-sm'
                                      }`}>
                                        <div className="text-sm whitespace-pre-wrap">{message.text}</div>
                                      </div>
                                    </div>
                                  ))}
                                  <div ref={storyMessagesEndRef} />
                                  {storyStep === 'completed' && (
                                    <div className="flex justify-center mt-4">
                                      <button
                                        onClick={() => setShowStoryReview(true)}
                                        className="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-8 py-3 rounded-xl font-medium hover:shadow-xl transition-all flex items-center gap-2"
                                      >
                                        <span>üëÄ</span>
                                        <span>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</span>
                                      </button>
                                    </div>
                                  )}
                                </div>
                              </div>

                              {/* Waiting for next photo response */}
                              {storyStep === 'waiting_next' && (
                                <div className="border-t border-gray-200 bg-white p-4">
                                  <div className="max-w-3xl mx-auto flex gap-3">
                                    <button
                                      onClick={handleMoveToNextPhoto}
                                      className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl font-medium hover:shadow-xl transition-all"
                                    >
                                      ‚úÖ –î–∞, –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π
                                    </button>
                                    <button
                                      onClick={handleContinueEditing}
                                      className="flex-1 bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium hover:bg-gray-50 transition-all"
                                    >
                                      ‚úèÔ∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                                    </button>
                                  </div>
                                </div>
                              )}

                              {/* Chat Input - Always Available */}
                              <div className="border-t border-gray-200 bg-white p-4">
                                <div className="max-w-3xl mx-auto">
                                  <div className="flex gap-3">
                                    <textarea
                                      value={storyInput}
                                      onChange={(e) => setStoryInput(e.target.value)}
                                      onKeyPress={handleStoryKeyPress}
                                      placeholder={
                                        storyStep === 'chatting'
                                          ? "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –æ–± —ç—Ç–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏..."
                                          : "–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                                      }
                                      className="flex-1 border border-gray-300 rounded-xl px-4 py-3 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"
                                      rows="3"
                                    />
                                    <button
                                      onClick={handleSendStoryMessage}
                                      disabled={!storyInput.trim() || storyStep !== 'chatting'}
                                      className="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-6 rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                      <span className="text-xl">‚Üë</span>
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                            {/* Right Side - Photos */}
                            <div className="w-2/5 border-l border-gray-200 bg-white flex flex-col overflow-y-auto">
                              <div className="p-6 border-b border-gray-200">
                                <div className="flex items-center justify-between mb-4">
                                  <div>
                                    <h3 className="text-lg font-semibold text-gray-800">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h3>
                                    <p className="text-sm text-gray-500">–î–æ–±–∞–≤—å—Ç–µ –æ—Ç 1 –¥–æ 6 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π ({storyPhotos.length}/6)</p>
                                  </div>
                                  <button
                                    onClick={handleAddStoryPhoto}
                                    disabled={storyPhotos.length >= 6}
                                    className="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-4 py-2 rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
                                  >
                                    <span>‚ûï</span>
                                    <span>–î–æ–±–∞–≤–∏—Ç—å</span>
                                  </button>
                                </div>

                                {storyPhotos.length === 0 ? (
                                  <div className="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center">
                                    <div className="text-5xl mb-3">üì∏</div>
                                    <p className="text-gray-600 mb-3 text-sm">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</p>
                                    <button
                                      onClick={handleAddStoryPhoto}
                                      className="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-4 py-2 rounded-lg font-medium hover:shadow-lg transition-all text-sm"
                                    >
                                      –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                                    </button>
                                  </div>
                                ) : (
                                  <>
                                    <div className="grid grid-cols-3 gap-3 mb-4">
                                      {storyPhotos.map((photo, index) => (
                                        <div key={photo.id} className="relative group">
                                          <div
                                            onClick={() => handleSelectStoryPhoto(photo, index)}
                                            className={`aspect-square bg-gradient-to-br ${photo.gradient} rounded-lg flex items-center justify-center text-3xl shadow-md overflow-hidden relative cursor-pointer transition-all hover:ring-4 hover:ring-blue-300 ${
                                              selectedStoryPhoto?.id === photo.id ? 'ring-4 ring-blue-500' : ''
                                            }`}
                                          >
                                            {photo.imageUrl ? (
                                              <img src={photo.imageUrl} alt={`Photo ${index + 1}`} className="w-full h-full object-cover" />
                                            ) : (
                                              <span>{photo.emoji}</span>
                                            )}
                                            {selectedStoryPhoto?.id === photo.id && (
                                              <div className="absolute top-2 right-2">
                                                <div className="bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-bold">
                                                  ‚úì
                                                </div>
                                              </div>
                                            )}
                                          </div>
                                          <button
                                            onClick={(e) => {
                                              e.stopPropagation();
                                              handleRemoveStoryPhoto(photo.id);
                                            }}
                                            className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-xs font-bold z-10"
                                          >
                                            √ó
                                          </button>
                                        </div>
                                      ))}
                                    </div>

                                    {/* Hint to select photo */}
                                    {storyPhotos.length > 0 && storyStep === 'uploading' && !selectedStoryPhoto && (
                                      <div className="bg-blue-50 border border-blue-200 rounded-lg p-3 text-center">
                                        <p className="text-sm text-blue-700">
                                          üëÜ –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–ø–∏—Å—ã–≤–∞—Ç—å –µ—ë –∏—Å—Ç–æ—Ä–∏—é
                                        </p>
                                      </div>
                                    )}
                                  </>
                                )}
                              </div>

                              {/* Processing indicator */}
                              {isProcessingPhotos && (
                                <div className="p-6 border-b border-gray-200">
                                  <div className="bg-blue-50 rounded-lg p-4 text-center">
                                    <div className="animate-spin text-4xl mb-2">‚öôÔ∏è</div>
                                    <p className="text-sm text-gray-600">–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏...</p>
                                  </div>
                                </div>
                              )}

                              {/* Selected photo info */}
                              {selectedStoryPhoto && (
                                <div className="p-6 border-b border-gray-200">
                                  <h4 className="text-sm font-semibold text-gray-700 mb-3">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h4>
                                  <div className="space-y-2 text-sm">
                                    <div className="flex items-start gap-2">
                                      <span className="text-gray-500">üìù</span>
                                      <div className="flex-1">
                                        <span className="text-gray-600">–û–ø–∏—Å–∞–Ω–∏–µ:</span>
                                        <p className="text-gray-800 mt-1">{selectedStoryPhoto.story || selectedStoryPhoto.aiDescription || '–ü–æ–∫–∞ –Ω–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'}</p>
                                      </div>
                                    </div>
                                    {selectedStoryPhoto.date && (
                                      <div className="flex items-center gap-2">
                                        <span>üìÖ</span>
                                        <span className="text-gray-600">–î–∞—Ç–∞:</span>
                                        <span className="text-gray-800">{selectedStoryPhoto.date}</span>
                                      </div>
                                    )}
                                    {selectedStoryPhoto.place && (
                                      <div className="flex items-center gap-2">
                                        <span>üìç</span>
                                        <span className="text-gray-600">–ú–µ—Å—Ç–æ:</span>
                                        <span className="text-gray-800">{selectedStoryPhoto.place}</span>
                                      </div>
                                    )}
                                    {selectedStoryPhoto.people && (
                                      <div className="flex items-center gap-2">
                                        <span>üë•</span>
                                        <span className="text-gray-600">–õ—é–¥–∏:</span>
                                        <span className="text-gray-800">{selectedStoryPhoto.people}</span>
                                      </div>
                                    )}
                                  </div>

                                  {/* EXIF data collapsible */}
                                  {selectedStoryPhoto.exif && (
                                    <div className="mt-4">
                                      <button
                                        onClick={() => setShowExifDetails(!showExifDetails)}
                                        className="flex items-center justify-between w-full text-sm font-semibold text-gray-700 hover:text-blue-600 transition-colors"
                                      >
                                        <span>üì∑ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (EXIF)</span>
                                        <span className="transform transition-transform" style={{ transform: showExifDetails ? 'rotate(180deg)' : 'rotate(0deg)' }}>
                                          ‚ñº
                                        </span>
                                      </button>
                                      {showExifDetails && (
                                        <div className="mt-3 space-y-2 text-xs bg-gray-50 rounded-lg p-3">
                                          <div className="flex justify-between">
                                            <span className="text-gray-600">–ö–∞–º–µ—Ä–∞:</span>
                                            <span className="text-gray-800">{selectedStoryPhoto.exif.camera}</span>
                                          </div>
                                          <div className="flex justify-between">
                                            <span className="text-gray-600">–û–±—ä–µ–∫—Ç–∏–≤:</span>
                                            <span className="text-gray-800">{selectedStoryPhoto.exif.lens}</span>
                                          </div>
                                          <div className="flex justify-between">
                                            <span className="text-gray-600">–î–∏–∞—Ñ—Ä–∞–≥–º–∞:</span>
                                            <span className="text-gray-800">{selectedStoryPhoto.exif.aperture}</span>
                                          </div>
                                          <div className="flex justify-between">
                                            <span className="text-gray-600">–í—ã–¥–µ—Ä–∂–∫–∞:</span>
                                            <span className="text-gray-800">{selectedStoryPhoto.exif.shutterSpeed}</span>
                                          </div>
                                          <div className="flex justify-between">
                                            <span className="text-gray-600">ISO:</span>
                                            <span className="text-gray-800">{selectedStoryPhoto.exif.iso}</span>
                                          </div>
                                          <div className="flex justify-between">
                                            <span className="text-gray-600">–§–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ:</span>
                                            <span className="text-gray-800">{selectedStoryPhoto.exif.focalLength}</span>
                                          </div>
                                          <div className="flex justify-between">
                                            <span className="text-gray-600">–î–∞—Ç–∞ —Å—ä—ë–º–∫–∏:</span>
                                            <span className="text-gray-800">{selectedStoryPhoto.exif.dateTime}</span>
                                          </div>
                                          <div className="flex justify-between">
                                            <span className="text-gray-600">GPS:</span>
                                            <span className="text-gray-800">{selectedStoryPhoto.exif.gps}</span>
                                          </div>
                                        </div>
                                      )}
                                    </div>
                                  )}
                                </div>
                              )}

                              {/* Action buttons - shown only when photo is selected */}
                              {selectedStoryPhoto && storyStep !== 'intro' && (
                                <div className="p-6 space-y-3">
                                  <button
                                    onClick={() => window.open('https://dmitrijburlaku.nasledie.digital/gallery/', '_blank')}
                                    className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-xl font-medium hover:shadow-xl transition-all flex items-center justify-center gap-2"
                                  >
                                    <span>üíæ</span>
                                    <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–∞–ø—Å—É–ª—É</span>
                                  </button>
                                  <button
                                    onClick={() => {
                                      if (navigator.share) {
                                        navigator.share({
                                          title: '–ú–æ—è –§–æ—Ç–æ–ò—Å—Ç–æ—Ä–∏—è',
                                          text: '–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –º–æ—é —Ñ–æ—Ç–æ–∏—Å—Ç–æ—Ä–∏—é, —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å –ø–æ–º–æ—â—å—é NaDi!',
                                          url: window.location.href
                                        });
                                      } else {
                                        alert('–§—É–Ω–∫—Ü–∏—è –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ');
                                      }
                                    }}
                                    className="w-full bg-white border-2 border-blue-300 text-blue-700 px-6 py-3 rounded-xl font-medium hover:bg-blue-50 transition-all flex items-center justify-center gap-2"
                                  >
                                    <span>üì§</span>
                                    <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
                                  </button>
                                </div>
                              )}
                            </div>
                          </div>
                        ) : (
                          /* Review Screen */
                          <div className="flex-1 overflow-y-auto p-6">
                            <div className="max-w-5xl mx-auto">
                              <div className="mb-6">
                                <h3 className="text-2xl font-bold text-gray-800 mb-2">–í–∞—à–∏ –§–æ—Ç–æ–ò—Å—Ç–æ—Ä–∏–∏ –≥–æ—Ç–æ–≤—ã!</h3>
                                <p className="text-gray-600">–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤–∞—à–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</p>
                              </div>

                              <div className="grid grid-cols-2 gap-6 mb-6">
                                {storyPhotos.map((photo, index) => (
                                  <div key={photo.id} className="bg-white rounded-xl shadow-lg overflow-hidden">
                                    <div className="aspect-video bg-gradient-to-br from-blue-400 to-cyan-400 overflow-hidden">
                                      <img
                                        src={photo.imageUrl}
                                        alt={photo.title}
                                        className="w-full h-full object-cover"
                                      />
                                    </div>
                                    <div className="p-6">
                                      <h4 className="text-lg font-bold text-gray-800 mb-3">{photo.title || `–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è ${index + 1}`}</h4>

                                      <div className="mb-4">
                                        <div className="text-sm font-semibold text-gray-700 mb-2">–û–ø–∏—Å–∞–Ω–∏–µ:</div>
                                        <textarea
                                          value={photo.finalDescription}
                                          onChange={(e) => handleEditPhotoDescription(photo.id, e.target.value)}
                                          className="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"
                                          rows="4"
                                        />
                                      </div>

                                      {photo.tags && photo.tags.length > 0 && (
                                        <div className="mb-4">
                                          <div className="text-sm font-semibold text-gray-700 mb-2">–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</div>
                                          <div className="flex flex-wrap gap-2">
                                            {photo.tags.map((tag, idx) => (
                                              <span key={idx} className="bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full">
                                                {tag}
                                              </span>
                                            ))}
                                          </div>
                                        </div>
                                      )}

                                      <div className="border-t border-gray-200 pt-4">
                                        <div className="text-xs text-gray-500 space-y-1">
                                          <div>üìÖ –î–∞—Ç–∞: {photo.date || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</div>
                                          <div>üìç –ú–µ—Å—Ç–æ: {photo.place || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</div>
                                          <div>üë• –õ—é–¥–∏: {photo.people || '–ù–µ —É–∫–∞–∑–∞–Ω—ã'}</div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                ))}
                              </div>

                              <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                                <div className="text-center">
                                  <div className="text-5xl mb-4">üéâ</div>
                                  <h3 className="text-xl font-bold text-gray-800 mb-2">–û—Ç–ª–∏—á–Ω–æ! –í—Å–µ –≥–æ—Ç–æ–≤–æ!</h3>
                                  <p className="text-gray-600 mb-6">
                                    –í–∞—à–∏ —Ñ–æ—Ç–æ–∏—Å—Ç–æ—Ä–∏–∏ –≥–æ—Ç–æ–≤—ã –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é –≤ –∫–∞–ø—Å—É–ª—É –≤—Ä–µ–º–µ–Ω–∏
                                  </p>
                                  <div className="space-y-3">
                                    <button
                                      onClick={() => setShowStoryReview(false)}
                                      className="w-full px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-all"
                                    >
                                      –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä
                                    </button>
                                    <button
                                      onClick={() => window.open('https://dmitrijburlaku.nasledie.digital/gallery/', '_blank')}
                                      className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-3 rounded-xl font-medium hover:shadow-xl transition-all flex items-center justify-center gap-2"
                                    >
                                      <span>üíæ</span>
                                      <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞ –≤ –∫–∞–ø—Å—É–ª—É</span>
                                    </button>
                                    <div className="flex gap-3">
                                      <button
                                        onClick={() => {
                                          if (navigator.share) {
                                            navigator.share({
                                              title: '–ú–æ–∏ –§–æ—Ç–æ–ò—Å—Ç–æ—Ä–∏–∏',
                                              text: '–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –º–æ–∏ —Ñ–æ—Ç–æ–∏—Å—Ç–æ—Ä–∏–∏, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é NaDi!',
                                              url: window.location.href
                                            });
                                          } else {
                                            alert('–§—É–Ω–∫—Ü–∏—è –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ');
                                          }
                                        }}
                                        className="flex-1 bg-white border-2 border-blue-300 text-blue-700 px-6 py-3 rounded-xl font-medium hover:bg-blue-50 transition-all flex items-center justify-center gap-2"
                                      >
                                        <span>üì§</span>
                                        <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
                                      </button>
                                      <button
                                        onClick={() => {
                                          const inviteText = '–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫–æ –º–Ω–µ –≤ NaDi! –°–æ–∑–¥–∞–≤–∞–π –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ —Å–≤–æ–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π: https://nasledie.digital';
                                          if (navigator.share) {
                                            navigator.share({
                                              title: '–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ NaDi',
                                              text: inviteText
                                            });
                                          } else {
                                            navigator.clipboard.writeText(inviteText);
                                            alert('–°—Å—ã–ª–∫–∞-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
                                          }
                                        }}
                                        className="flex-1 bg-white border-2 border-green-300 text-green-700 px-6 py-3 rounded-xl font-medium hover:bg-green-50 transition-all flex items-center justify-center gap-2"
                                      >
                                        <span>üë•</span>
                                        <span>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π</span>
                                      </button>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        )}
                      </div>
                    </>
                  ) : activeSection === 'capsule' ? (
                    <>
                      {/* Capsule Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div className="flex items-center justify-between">
                          <div>
                            <h2 className="text-2xl font-bold text-gray-800">–ú–æ—è –∫–∞–ø—Å—É–ª–∞</h2>
                            <p className="text-sm text-gray-500 mt-1">–í–∞—à–∞ –ª–∏—á–Ω–∞—è –∫–∞–ø—Å—É–ª–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–∞–º—è—Ç–∏</p>
                          </div>
                          <div className="flex gap-2">
                            <button className="px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-lg transition-all font-medium">
                              –≠–∫—Å–ø–æ—Ä—Ç
                            </button>
                          </div>
                        </div>
                      </div>

                      {/* Capsule Content */}
                      <div className="flex-1 overflow-y-auto p-6 bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        <div className="max-w-6xl mx-auto space-y-6">
                          {/* Meta Information */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <div className="grid grid-cols-2 gap-6">
                              <div>
                                <h3 className="text-lg font-semibold text-gray-800 mb-4">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                                <div className="space-y-2 text-sm">
                                  <div className="flex justify-between">
                                    <span className="text-gray-600">–ù–∞–∑–≤–∞–Ω–∏–µ:</span>
                                    <span className="font-semibold text-gray-800">–°–µ–º–µ–π–Ω–∞—è –∫–∞–ø—Å—É–ª–∞ –ü–µ—Ç—Ä–æ–≤—ã—Ö</span>
                                  </div>
                                  <div className="flex justify-between">
                                    <span className="text-gray-600">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</span>
                                    <span className="font-semibold text-gray-800">15.03.2025</span>
                                  </div>
                                  <div className="flex justify-between">
                                    <span className="text-gray-600">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:</span>
                                    <span className="font-semibold text-gray-800">24.10.2025, 14:23</span>
                                  </div>
                                  <div className="flex justify-between">
                                    <span className="text-gray-600">–°—Ç–∞—Ç—É—Å:</span>
                                    <span className="px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium">–í —Ä–∞–±–æ—Ç–µ</span>
                                  </div>
                                </div>
                              </div>
                              <div>
                                <h3 className="text-lg font-semibold text-gray-800 mb-4">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
                                <div className="space-y-2 text-sm">
                                  <div className="flex justify-between">
                                    <span className="text-gray-600">ID –∫–∞–ø—Å—É–ª—ã:</span>
                                    <span className="font-mono text-xs text-gray-800">CP-2025-031545</span>
                                  </div>
                                  <div className="flex justify-between">
                                    <span className="text-gray-600">–í–µ—Ä—Å–∏—è:</span>
                                    <span className="font-semibold text-gray-800">2.3</span>
                                  </div>
                                  <div className="flex justify-between">
                                    <span className="text-gray-600">–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:</span>
                                    <span className="text-green-600 flex items-center gap-1">
                                      <span>‚úì</span>
                                      <span>–ê–∫—Ç—É–∞–ª—å–Ω–æ</span>
                                    </span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* Statistics */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∞—à–µ–π –∫–∞–ø—Å—É–ª—ã</h3>

                            {/* Storage */}
                            <div className="mb-6">
                              <div className="flex items-center justify-between mb-2">
                                <span className="text-sm font-medium text-gray-700">üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞</span>
                                <span className="text-sm font-semibold text-gray-800">5 –ì–ë –∏–∑ 20 –ì–ë</span>
                              </div>
                              <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                                <div className="h-full bg-gradient-to-r from-blue-500 to-cyan-500" style={{width: '25%'}}></div>
                              </div>
                            </div>

                            {/* Content Stats */}
                            <div className="grid grid-cols-4 gap-4 mb-6">
                              <div className="text-center p-4 bg-gray-50 rounded-lg">
                                <div className="text-2xl mb-1">üì∏</div>
                                <div className="text-2xl font-bold text-gray-800">1,247</div>
                                <div className="text-xs text-gray-600">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</div>
                              </div>
                              <div className="text-center p-4 bg-gray-50 rounded-lg">
                                <div className="text-2xl mb-1">üé¨</div>
                                <div className="text-2xl font-bold text-gray-800">23</div>
                                <div className="text-xs text-gray-600">–í–∏–¥–µ–æ</div>
                              </div>
                              <div className="text-center p-4 bg-gray-50 rounded-lg">
                                <div className="text-2xl mb-1">üìÑ</div>
                                <div className="text-2xl font-bold text-gray-800">156</div>
                                <div className="text-xs text-gray-600">–î–æ–∫—É–º–µ–Ω—Ç–æ–≤</div>
                              </div>
                              <div className="text-center p-4 bg-gray-50 rounded-lg">
                                <div className="text-2xl mb-1">üéôÔ∏è</div>
                                <div className="text-2xl font-bold text-gray-800">8</div>
                                <div className="text-xs text-gray-600">–ê—É–¥–∏–æ–∑–∞–ø–∏—Å–µ–π</div>
                              </div>
                            </div>

                            {/* Other Stats */}
                            <div className="grid grid-cols-2 gap-4 text-sm">
                              <div className="space-y-2">
                                <div className="flex justify-between">
                                  <span className="text-gray-600">üìù –û–ø–∏—Å–∞–Ω–æ —Ñ–æ—Ç–æ:</span>
                                  <span className="font-semibold text-gray-800">847 (68%)</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-gray-600">üìñ –°–æ–∑–¥–∞–Ω–æ –∏—Å—Ç–æ—Ä–∏–π:</span>
                                  <span className="font-semibold text-gray-800">34</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-gray-600">üéôÔ∏è –ì–æ–ª–æ—Å–æ–≤—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π:</span>
                                  <span className="font-semibold text-gray-800">12</span>
                                </div>
                              </div>
                              <div className="space-y-2">
                                <div className="flex justify-between">
                                  <span className="text-gray-600">üë• –î–æ–±–∞–≤–ª–µ–Ω–æ –ª—é–¥–µ–π:</span>
                                  <span className="font-semibold text-gray-800">45</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-gray-600">üîó –°–≤—è–∑–µ–π —Å–æ–∑–¥–∞–Ω–æ:</span>
                                  <span className="font-semibold text-gray-800">234</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-gray-600">üìÖ –ö–ª—é—á–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π:</span>
                                  <span className="font-semibold text-gray-800">89</span>
                                </div>
                              </div>
                            </div>

                            {/* Progress */}
                            <div className="mt-6 pt-6 border-t border-gray-200">
                              <div className="flex items-center justify-between mb-2">
                                <span className="text-sm font-medium text-gray-700">üéØ –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è</span>
                                <span className="text-sm font-semibold text-gray-800">76% –∑–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                              </div>
                              <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                                <div className="h-full bg-gradient-to-r from-purple-500 to-pink-500" style={{width: '76%'}}></div>
                              </div>
                            </div>

                            {/* Activity */}
                            <div className="mt-4 grid grid-cols-3 gap-4 text-sm">
                              <div className="flex justify-between">
                                <span className="text-gray-600">üí¨ –î–∏–∞–ª–æ–≥–æ–≤ —Å Nadi:</span>
                                <span className="font-semibold text-gray-800">156</span>
                              </div>
                              <div className="flex justify-between">
                                <span className="text-gray-600">üìÜ –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–∞–Ω—Å:</span>
                                <span className="font-semibold text-gray-800">2 –¥–Ω—è –Ω–∞–∑–∞–¥</span>
                              </div>
                              <div className="flex justify-between">
                                <span className="text-gray-600">‚è±Ô∏è –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è:</span>
                                <span className="font-semibold text-gray-800">2—á 15–º–∏–Ω/–Ω–µ–¥</span>
                              </div>
                            </div>
                          </div>

                          {/* Sections */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">üìÇ –†–∞–∑–¥–µ–ª—ã –∫–∞–ø—Å—É–ª—ã</h3>
                            <div className="space-y-3">
                              <div className="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all cursor-pointer">
                                <div className="flex items-center justify-between mb-2">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üè†</span>
                                    <span className="font-semibold text-gray-800">–ú–æ—è –±–∏–æ–≥—Ä–∞—Ñ–∏—è</span>
                                  </div>
                                  <span className="text-sm font-semibold text-green-600">89%</span>
                                </div>
                                <div className="ml-11 text-xs text-gray-600 space-y-1">
                                  <div>‚îî‚îÄ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                                  <div>‚îî‚îÄ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å</div>
                                  <div>‚îî‚îÄ –¶–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –≤–∑–≥–ª—è–¥—ã</div>
                                </div>
                              </div>

                              <div className="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all cursor-pointer">
                                <div className="flex items-center justify-between mb-2">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                                    <span className="font-semibold text-gray-800">–°–µ–º–µ–π–Ω–æ–µ –¥—Ä–µ–≤–æ</span>
                                  </div>
                                  <span className="text-sm font-semibold text-yellow-600">67%</span>
                                </div>
                                <div className="ml-11 text-xs text-gray-600 space-y-1">
                                  <div>‚îî‚îÄ 4 –ø–æ–∫–æ–ª–µ–Ω–∏—è / 45 –ø–µ—Ä—Å–æ–Ω</div>
                                  <div>‚îî‚îÄ –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è: 12</div>
                                </div>
                              </div>

                              <div className="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all cursor-pointer">
                                <div className="flex items-center justify-between mb-2">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üì∏</span>
                                    <span className="font-semibold text-gray-800">–§–æ—Ç–æ–∞—Ä—Ö–∏–≤</span>
                                  </div>
                                  <span className="text-sm font-semibold text-yellow-600">68%</span>
                                </div>
                                <div className="ml-11 text-xs text-gray-600 space-y-1">
                                  <div>‚îî‚îÄ 1,247 —Ñ–æ—Ç–æ</div>
                                  <div>‚îî‚îÄ 847 –æ–ø–∏—Å–∞–Ω–æ</div>
                                  <div>‚îî‚îÄ 28 –∞–ª—å–±–æ–º–æ–≤</div>
                                </div>
                              </div>

                              <div className="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all cursor-pointer">
                                <div className="flex items-center justify-between mb-2">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üìù</span>
                                    <span className="font-semibold text-gray-800">–ò—Å—Ç–æ—Ä–∏–∏ –∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è</span>
                                  </div>
                                  <span className="text-sm font-semibold text-orange-600">45%</span>
                                </div>
                                <div className="ml-11 text-xs text-gray-600 space-y-1">
                                  <div>‚îî‚îÄ 34 —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</div>
                                  <div>‚îî‚îÄ 12 –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π</div>
                                  <div>‚îî‚îÄ 5 —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤</div>
                                </div>
                              </div>

                              <div className="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all cursor-pointer">
                                <div className="flex items-center justify-between mb-2">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üìÖ</span>
                                    <span className="font-semibold text-gray-800">–ñ–∏–∑–Ω–µ–Ω–Ω–∞—è —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è</span>
                                  </div>
                                  <span className="text-sm font-semibold text-yellow-600">56%</span>
                                </div>
                                <div className="ml-11 text-xs text-gray-600 space-y-1">
                                  <div>‚îî‚îÄ 89 –∫–ª—é—á–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π</div>
                                  <div>‚îî‚îÄ –û—Ö–≤–∞—Ç: 1956-2025 (69 –ª–µ—Ç)</div>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* Recent Activity */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">üïê –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</h3>
                            <div className="space-y-3">
                              <div className="flex items-start gap-3 p-3 bg-gray-50 rounded-lg">
                                <span className="text-gray-500 text-xs mt-1">–°–µ–≥–æ–¥–Ω—è, 14:23</span>
                                <div className="flex-1 text-sm text-gray-700">
                                  –î–æ–±–∞–≤–ª–µ–Ω–æ 12 —Ñ–æ—Ç–æ "–û—Ç–ø—É—Å–∫ –≤ –¢—É—Ä—Ü–∏–∏ 2025"
                                </div>
                              </div>
                              <div className="flex items-start gap-3 p-3 bg-gray-50 rounded-lg">
                                <span className="text-gray-500 text-xs mt-1">–í—á–µ—Ä–∞, 19:45</span>
                                <div className="flex-1 text-sm text-gray-700">
                                  –°–æ–∑–¥–∞–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è "–ö–∞–∫ —è –≤—Å—Ç—Ä–µ—Ç–∏–ª –±–∞–±—É—à–∫—É"
                                </div>
                              </div>
                              <div className="flex items-start gap-3 p-3 bg-gray-50 rounded-lg">
                                <span className="text-gray-500 text-xs mt-1">3 –¥–Ω—è –Ω–∞–∑–∞–¥</span>
                                <div className="flex-1 text-sm text-gray-700">
                                  Nadi –ø–æ–º–æ–≥ –æ–ø–∏—Å–∞—Ç—å 45 —Ñ–æ—Ç–æ
                                </div>
                              </div>
                            </div>
                            <button className="w-full mt-4 text-sm text-purple-600 hover:text-purple-700 font-medium">
                              üìú –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π
                            </button>
                          </div>

                          {/* Nadi Recommendations */}
                          <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">ü§ñ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ Nadi</h3>

                            <div className="mb-4">
                              <h4 className="text-sm font-semibold text-red-600 mb-2">‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è:</h4>
                              <ul className="text-sm text-gray-700 space-y-1 ml-4">
                                <li>‚Ä¢ 400 —Ñ–æ—Ç–æ –±–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è</li>
                                <li>‚Ä¢ 5 –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π</li>
                                <li>‚Ä¢ 12 –ø–µ—Ä—Å–æ–Ω –±–µ–∑ —Å–≤—è–∑–µ–π</li>
                              </ul>
                            </div>

                            <div className="mb-4">
                              <h4 className="text-sm font-semibold text-blue-600 mb-2">üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</h4>
                              <ul className="text-sm text-gray-700 space-y-2 ml-4">
                                <li className="p-2 bg-white rounded">
                                  "–•–æ—á–µ—à—å —Å–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º –∏–∑ —Ñ–æ—Ç–æ 1995-2000 –≥–æ–¥–æ–≤?"
                                </li>
                                <li className="p-2 bg-white rounded">
                                  "–ó–∞–º–µ—Ç–∏–ª –º–Ω–æ–≥–æ —Ñ–æ—Ç–æ —Å –º–æ—Ä–µ–º - —Ä–∞—Å—Å–∫–∞–∂–µ—à—å –æ–± —ç—Ç–∏—Ö –ø–æ–µ–∑–¥–∫–∞—Ö?"
                                </li>
                                <li className="p-2 bg-white rounded">
                                  "–£ —Ç–µ–±—è –µ—Å—Ç—å —Ñ–æ—Ç–æ –±–∞–±—É—à–∫–∏, –Ω–æ –Ω–µ—Ç –µ—ë –∏—Å—Ç–æ—Ä–∏–∏. –ó–∞–ø–∏—à–µ–º?"
                                </li>
                              </ul>
                            </div>

                            <button
                              onClick={() => setActiveSection('chat')}
                              className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg py-3 font-semibold hover:shadow-lg transition-all"
                            >
                              –û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ —Å Nadi
                            </button>
                          </div>
                        </div>
                      </div>
                    </>
                  ) : activeSection === 'settings' ? (
                    <>
                      {/* Settings Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div>
                          <h2 className="text-2xl font-bold text-gray-800">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                          <p className="text-sm text-gray-500 mt-1">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ —Ç–∞—Ä–∏—Ñ–∞–º–∏</p>
                        </div>
                      </div>

                      {/* Settings Content */}
                      <div className="flex-1 overflow-y-auto p-6 bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        <div className="max-w-4xl mx-auto space-y-6">
                          {/* Limits Section */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">‚ö° –õ–∏–º–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI</h3>

                            <div className="space-y-6">
                              {/* Current Session */}
                              <div>
                                <div className="flex items-center justify-between mb-2">
                                  <span className="text-sm font-medium text-gray-700">–¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è</span>
                                  <span className="text-xs text-gray-500">–°–±—Ä–æ—Å —á–µ—Ä–µ–∑ 3 —á–∞—Å–∞ 23 –º–∏–Ω—É—Ç—ã</span>
                                </div>
                                <div className="h-2 bg-gray-200 rounded-full overflow-hidden mb-1">
                                  <div className="h-full bg-gradient-to-r from-orange-500 to-red-500" style={{width: '59%'}}></div>
                                </div>
                                <p className="text-xs text-gray-600">59% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</p>
                              </div>

                              {/* Weekly Limits */}
                              <div>
                                <div className="flex items-center justify-between mb-2">
                                  <div>
                                    <span className="text-sm font-medium text-gray-700">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã</span>
                                    <div className="text-xs text-gray-500 mt-1">–í—Å–µ –º–æ–¥–µ–ª–∏</div>
                                  </div>
                                  <div className="text-right">
                                    <span className="text-xs text-gray-500">–°–±—Ä–æ—Å –≤ —á–µ—Ç–≤–µ—Ä–≥ –≤ 16:00</span>
                                  </div>
                                </div>
                                <div className="h-2 bg-gray-200 rounded-full overflow-hidden mb-1">
                                  <div className="h-full bg-gradient-to-r from-green-500 to-teal-500" style={{width: '11%'}}></div>
                                </div>
                                <p className="text-xs text-gray-600">11% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</p>
                              </div>

                              <div className="flex items-center justify-between pt-4 border-t border-gray-200">
                                <span className="text-xs text-gray-500">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 1 –º–∏–Ω—É—Ç—É –Ω–∞–∑–∞–¥</span>
                                <button className="text-xs text-purple-600 hover:text-purple-700 font-medium">
                                  –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö
                                </button>
                              </div>

                              <button className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg py-3 font-semibold hover:shadow-lg transition-all">
                                –†–∞—Å—à–∏—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã
                              </button>
                            </div>
                          </div>

                          {/* Storage Limits */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">üíæ –õ–∏–º–∏—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞</h3>

                            <div className="space-y-4">
                              {/* Storage */}
                              <div>
                                <div className="flex items-center justify-between mb-2">
                                  <span className="text-sm font-medium text-gray-700">–•—Ä–∞–Ω–∏–ª–∏—â–µ</span>
                                  <span className="text-sm font-semibold text-gray-800">5 / 20 –ì–ë</span>
                                </div>
                                <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                                  <div className="h-full bg-gradient-to-r from-blue-500 to-cyan-500" style={{width: '25%'}}></div>
                                </div>
                                <p className="text-xs text-gray-500 mt-1">–û—Å—Ç–∞–ª–æ—Å—å 15 –ì–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞</p>
                              </div>

                              {/* Daily Limit */}
                              <div>
                                <div className="flex items-center justify-between mb-2">
                                  <span className="text-sm font-medium text-gray-700">–°—É—Ç–æ—á–Ω—ã–π –ª–∏–º–∏—Ç –∑–∞–≥—Ä—É–∑–æ–∫</span>
                                  <span className="text-sm font-semibold text-gray-800">24%</span>
                                </div>
                                <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                                  <div className="h-full bg-gradient-to-r from-green-500 to-teal-500" style={{width: '24%'}}></div>
                                </div>
                                <p className="text-xs text-gray-500 mt-1">–û—Å—Ç–∞–ª–æ—Å—å 38 –∑–∞–≥—Ä—É–∑–æ–∫ —Å–µ–≥–æ–¥–Ω—è</p>
                              </div>

                              {/* Monthly Limit */}
                              <div>
                                <div className="flex items-center justify-between mb-2">
                                  <span className="text-sm font-medium text-gray-700">–ú–µ—Å—è—á–Ω—ã–π –ª–∏–º–∏—Ç –∑–∞–≥—Ä—É–∑–æ–∫</span>
                                  <span className="text-sm font-semibold text-gray-800">25.4%</span>
                                </div>
                                <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                                  <div className="h-full bg-gradient-to-r from-purple-500 to-pink-500" style={{width: '25.4%'}}></div>
                                </div>
                                <p className="text-xs text-gray-500 mt-1">–û—Å—Ç–∞–ª–æ—Å—å 373 –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ</p>
                              </div>
                            </div>
                          </div>

                          {/* Tariff Management */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">üí≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–º</h3>

                            <div className="p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200 mb-4">
                              <div className="flex items-center justify-between mb-3">
                                <div>
                                  <div className="text-sm text-gray-600">–¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ</div>
                                  <div className="text-xl font-bold text-purple-800">–ë–∞–∑–æ–≤—ã–π</div>
                                </div>
                                <div className="text-right">
                                  <div className="text-sm text-gray-600">–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
                                  <div className="text-xl font-bold text-gray-800">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
                                </div>
                              </div>
                              <div className="text-sm text-gray-600 space-y-1">
                                <div className="flex items-center gap-2">
                                  <span className="text-green-500">‚úì</span>
                                  <span>20 –ì–ë —Ö—Ä–∞–Ω–∏–ª–∏—â–∞</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-green-500">‚úì</span>
                                  <span>50 –∑–∞–≥—Ä—É–∑–æ–∫ –≤ –¥–µ–Ω—å</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-green-500">‚úì</span>
                                  <span>500 –∑–∞–≥—Ä—É–∑–æ–∫ –≤ –º–µ—Å—è—Ü</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-green-500">‚úì</span>
                                  <span>–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</span>
                                </div>
                              </div>
                            </div>

                            <button className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg py-3 font-semibold hover:shadow-lg transition-all mb-3">
                              –£–ª—É—á—à–∏—Ç—å —Ç–∞—Ä–∏—Ñ
                            </button>

                            <button className="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg py-3 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2">
                              <span>üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                              <span>–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–µ–º–µ–π–Ω—ã–π —Ç–∞—Ä–∏—Ñ</span>
                            </button>
                          </div>

                          {/* Privacy Policy */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">üîí –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</h3>

                            <div className="space-y-4 text-sm text-gray-700">
                              <div className="p-4 bg-gray-50 rounded-lg">
                                <h4 className="font-semibold text-gray-800 mb-2">–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö</h4>
                                <p>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞–¥–µ–∂–Ω–æ –∑–∞—â–∏—â–µ–Ω—ã –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –ú—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º –≤–∞—à—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º –±–µ–∑ –≤–∞—à–µ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è.</p>
                              </div>

                              <div className="p-4 bg-gray-50 rounded-lg">
                                <h4 className="font-semibold text-gray-800 mb-2">–î–æ—Å—Ç—É–ø –∫ –∫–∞–ø—Å—É–ª–µ</h4>
                                <p>–¢–æ–ª—å–∫–æ –≤—ã –∏ –ª—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–º –≤—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª–∏ –¥–æ—Å—Ç—É–ø, –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∞—à–µ–π –∫–∞–ø—Å—É–ª—ã –≤—Ä–µ–º–µ–Ω–∏.</p>
                              </div>

                              <div className="p-4 bg-gray-50 rounded-lg">
                                <h4 className="font-semibold text-gray-800 mb-2">–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
                                <p>–ú—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ—Ç–µ—Ä–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>
                              </div>

                              <div className="p-4 bg-gray-50 rounded-lg">
                                <h4 className="font-semibold text-gray-800 mb-2">–ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ—Ç–æ–º–∫–∞–º</h4>
                                <p>–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–µ—Ä–µ–¥–∞—á—É –∫–∞–ø—Å—É–ª—ã –≤–∞—à–∏–º –ø–æ—Ç–æ–º–∫–∞–º –ø—Ä–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π.</p>
                              </div>
                            </div>

                            <div className="mt-4 flex gap-3">
                              <button className="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all">
                                –ü–æ–ª–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞
                              </button>
                              <button className="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all">
                                –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </>
                  ) : activeSection === 'stats' ? (
                    <>
                      {/* Stats Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div>
                          <h2 className="text-2xl font-bold text-gray-800">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                          <p className="text-sm text-gray-500 mt-1">–û–±–∑–æ—Ä –≤–∞—à–∏—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
                        </div>
                      </div>

                      {/* Stats Content */}
                      <div className="flex-1 overflow-y-auto p-6 bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        <div className="max-w-6xl mx-auto space-y-6">
                          {/* Key Metrics */}
                          <div className="grid grid-cols-4 gap-4">
                            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                              <div className="flex items-center justify-between mb-3">
                                <span className="text-3xl">üì∏</span>
                                <span className="text-xs text-gray-500">–í—Å–µ–≥–æ</span>
                              </div>
                              <div className="text-3xl font-bold text-gray-800 mb-1">150</div>
                              <div className="text-sm text-gray-600">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</div>
                              <div className="mt-3 text-xs text-green-600 flex items-center gap-1">
                                <span>‚Üë</span>
                                <span>+23 –∑–∞ –º–µ—Å—è—Ü</span>
                              </div>
                            </div>

                            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                              <div className="flex items-center justify-between mb-3">
                                <span className="text-3xl">üíæ</span>
                                <span className="text-xs text-gray-500">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</span>
                              </div>
                              <div className="text-3xl font-bold text-gray-800 mb-1">5 –ì–ë</div>
                              <div className="text-sm text-gray-600">–∏–∑ 20 –ì–ë</div>
                              <div className="mt-3 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div className="h-full bg-gradient-to-r from-blue-500 to-cyan-500" style={{width: '25%'}}></div>
                              </div>
                            </div>

                            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                              <div className="flex items-center justify-between mb-3">
                                <span className="text-3xl">üë•</span>
                                <span className="text-xs text-gray-500">–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ</span>
                              </div>
                              <div className="text-3xl font-bold text-gray-800 mb-1">12</div>
                              <div className="text-sm text-gray-600">–õ—é–¥–µ–π</div>
                              <div className="mt-3 text-xs text-blue-600 flex items-center gap-1">
                                <span>+</span>
                                <span>3 –Ω–æ–≤—ã—Ö –ª–∏—Ü–∞</span>
                              </div>
                            </div>

                            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                              <div className="flex items-center justify-between mb-3">
                                <span className="text-3xl">üéâ</span>
                                <span className="text-xs text-gray-500">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                              </div>
                              <div className="text-3xl font-bold text-gray-800 mb-1">28</div>
                              <div className="text-sm text-gray-600">–°–æ–±—ã—Ç–∏–π</div>
                              <div className="mt-3 text-xs text-purple-600 flex items-center gap-1">
                                <span>‚úì</span>
                                <span>5 –∑–∞ –Ω–µ–¥–µ–ª—é</span>
                              </div>
                            </div>
                          </div>

                          {/* Usage Limits */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">–õ–∏–º–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h3>
                            <div className="space-y-4">
                              <div>
                                <div className="flex items-center justify-between mb-2">
                                  <span className="text-sm text-gray-700">–°—É—Ç–æ—á–Ω—ã–π –ª–∏–º–∏—Ç</span>
                                  <span className="text-sm font-semibold text-gray-800">24%</span>
                                </div>
                                <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                                  <div className="h-full bg-gradient-to-r from-green-500 to-teal-500" style={{width: '24%'}}></div>
                                </div>
                                <div className="text-xs text-gray-500 mt-1">–û—Å—Ç–∞–ª–æ—Å—å 38 –∑–∞–≥—Ä—É–∑–æ–∫ —Å–µ–≥–æ–¥–Ω—è</div>
                              </div>

                              <div>
                                <div className="flex items-center justify-between mb-2">
                                  <span className="text-sm text-gray-700">–ú–µ—Å—è—á–Ω—ã–π –ª–∏–º–∏—Ç</span>
                                  <span className="text-sm font-semibold text-gray-800">25.4%</span>
                                </div>
                                <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                                  <div className="h-full bg-gradient-to-r from-blue-500 to-purple-500" style={{width: '25.4%'}}></div>
                                </div>
                                <div className="text-xs text-gray-500 mt-1">–û—Å—Ç–∞–ª–æ—Å—å 373 –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ</div>
                              </div>
                            </div>
                          </div>

                          {/* Activity Timeline */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</h3>
                            <div className="space-y-3">
                              <div className="flex items-center gap-4">
                                <div className="text-center w-16">
                                  <div className="text-xs text-gray-500">–ü–Ω</div>
                                  <div className="text-sm font-semibold text-gray-800">21 –æ–∫—Ç</div>
                                </div>
                                <div className="flex-1 h-8 bg-gradient-to-r from-purple-200 to-purple-400 rounded-lg flex items-center px-3" style={{width: '80%'}}>
                                  <span className="text-xs text-white font-medium">8 —Ñ–æ—Ç–æ</span>
                                </div>
                              </div>
                              <div className="flex items-center gap-4">
                                <div className="text-center w-16">
                                  <div className="text-xs text-gray-500">–í—Ç</div>
                                  <div className="text-sm font-semibold text-gray-800">22 –æ–∫—Ç</div>
                                </div>
                                <div className="flex-1 h-8 bg-gradient-to-r from-blue-200 to-blue-400 rounded-lg flex items-center px-3" style={{width: '60%'}}>
                                  <span className="text-xs text-white font-medium">6 —Ñ–æ—Ç–æ</span>
                                </div>
                              </div>
                              <div className="flex items-center gap-4">
                                <div className="text-center w-16">
                                  <div className="text-xs text-gray-500">–°—Ä</div>
                                  <div className="text-sm font-semibold text-gray-800">23 –æ–∫—Ç</div>
                                </div>
                                <div className="flex-1 h-8 bg-gradient-to-r from-green-200 to-green-400 rounded-lg flex items-center px-3" style={{width: '40%'}}>
                                  <span className="text-xs text-white font-medium">4 —Ñ–æ—Ç–æ</span>
                                </div>
                              </div>
                              <div className="flex items-center gap-4">
                                <div className="text-center w-16">
                                  <div className="text-xs text-gray-500">–ß—Ç</div>
                                  <div className="text-sm font-semibold text-gray-800">24 –æ–∫—Ç</div>
                                </div>
                                <div className="flex-1 h-8 bg-gradient-to-r from-orange-200 to-orange-400 rounded-lg flex items-center px-3" style={{width: '90%'}}>
                                  <span className="text-xs text-white font-medium">9 —Ñ–æ—Ç–æ</span>
                                </div>
                              </div>
                              <div className="flex items-center gap-4">
                                <div className="text-center w-16">
                                  <div className="text-xs text-gray-500">–ü—Ç</div>
                                  <div className="text-sm font-semibold text-gray-800">25 –æ–∫—Ç</div>
                                </div>
                                <div className="flex-1 h-8 bg-gradient-to-r from-pink-200 to-pink-400 rounded-lg flex items-center px-3" style={{width: '70%'}}>
                                  <span className="text-xs text-white font-medium">7 —Ñ–æ—Ç–æ</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* Top Categories */}
                          <div className="grid grid-cols-2 gap-6">
                            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                              <h3 className="text-lg font-semibold text-gray-800 mb-4">–¢–æ–ø –º–µ—Å—Ç</h3>
                              <div className="space-y-3">
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üèñÔ∏è</span>
                                    <span className="text-sm font-medium text-gray-700">–ö—Ä—ã–º</span>
                                  </div>
                                  <span className="text-sm text-gray-500">42 —Ñ–æ—Ç–æ</span>
                                </div>
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üèôÔ∏è</span>
                                    <span className="text-sm font-medium text-gray-700">–ú–æ—Å–∫–≤–∞</span>
                                  </div>
                                  <span className="text-sm text-gray-500">58 —Ñ–æ—Ç–æ</span>
                                </div>
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üèõÔ∏è</span>
                                    <span className="text-sm font-medium text-gray-700">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</span>
                                  </div>
                                  <span className="text-sm text-gray-500">15 —Ñ–æ—Ç–æ</span>
                                </div>
                              </div>
                            </div>

                            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                              <h3 className="text-lg font-semibold text-gray-800 mb-4">–¢–æ–ø —Å–æ–±—ã—Ç–∏–π</h3>
                              <div className="space-y-3">
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üéÇ</span>
                                    <span className="text-sm font-medium text-gray-700">–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è</span>
                                  </div>
                                  <span className="text-sm text-gray-500">23 —Ñ–æ—Ç–æ</span>
                                </div>
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üèñÔ∏è</span>
                                    <span className="text-sm font-medium text-gray-700">–û—Ç–ø—É—Å–∫–∞</span>
                                  </div>
                                  <span className="text-sm text-gray-500">38 —Ñ–æ—Ç–æ</span>
                                </div>
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center gap-3">
                                    <span className="text-2xl">üéâ</span>
                                    <span className="text-sm font-medium text-gray-700">–ü—Ä–∞–∑–¥–Ω–∏–∫–∏</span>
                                  </div>
                                  <span className="text-sm text-gray-500">31 —Ñ–æ—Ç–æ</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </>
                  ) : activeSection === 'profile' ? (
                    <>
                      {/* Profile Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div>
                          <h2 className="text-2xl font-bold text-gray-800">–ü—Ä–æ—Ñ–∏–ª—å</h2>
                          <p className="text-sm text-gray-500 mt-1">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞</p>
                        </div>
                      </div>

                      {/* Profile Content */}
                      <div className="flex-1 overflow-y-auto p-6 bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        <div className="max-w-4xl mx-auto space-y-6">
                          {/* Profile Avatar & Name */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <div className="flex items-center gap-6">
                              <div className="w-24 h-24 bg-gradient-to-br from-blue-400 to-purple-400 rounded-full flex items-center justify-center text-white text-3xl font-semibold">
                                –ê–ü
                              </div>
                              <div className="flex-1">
                                <h3 className="text-2xl font-bold text-gray-800">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–æ–≤</h3>
                                <p className="text-sm text-gray-500 mt-1">petrov@example.com</p>
                                <button className="mt-3 text-sm text-purple-600 hover:text-purple-700 font-medium">
                                  –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è
                                </button>
                              </div>
                            </div>
                          </div>

                          {/* Personal Information */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <div className="space-y-4">
                              <div className="grid grid-cols-2 gap-4">
                                <div>
                                  <label className="block text-sm font-medium text-gray-700 mb-2">–ò–º—è</label>
                                  <input
                                    type="text"
                                    value="–ê–ª–µ–∫—Å–∞–Ω–¥—Ä"
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                  />
                                </div>
                                <div>
                                  <label className="block text-sm font-medium text-gray-700 mb-2">–§–∞–º–∏–ª–∏—è</label>
                                  <input
                                    type="text"
                                    value="–ü–µ—Ç—Ä–æ–≤"
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                  />
                                </div>
                              </div>

                              <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input
                                  type="email"
                                  value="petrov@example.com"
                                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                />
                              </div>

                              <div className="grid grid-cols-2 gap-4">
                                <div>
                                  <label className="block text-sm font-medium text-gray-700 mb-2">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                                  <input
                                    type="date"
                                    value="1985-03-15"
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                  />
                                </div>
                                <div>
                                  <label className="block text-sm font-medium text-gray-700 mb-2">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                                  <input
                                    type="tel"
                                    value="+7 (999) 123-45-67"
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                  />
                                </div>
                              </div>

                              <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">–ì–æ—Ä–æ–¥</label>
                                <input
                                  type="text"
                                  value="–ú–æ—Å–∫–≤–∞"
                                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                />
                              </div>

                              <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">–û —Å–µ–±–µ</label>
                                <textarea
                                  rows="4"
                                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                  placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..."
                                >–õ—é–±–ª—é –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å. –•–æ—á—É —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è —Å–≤–æ–∏—Ö –¥–µ—Ç–µ–π –∏ –≤–Ω—É–∫–æ–≤.</textarea>
                              </div>

                              <div className="flex gap-3 pt-4">
                                <button className="px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all">
                                  –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                                </button>
                                <button className="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all">
                                  –û—Ç–º–µ–Ω–∞
                                </button>
                              </div>
                            </div>
                          </div>

                          {/* Account Security */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
                            <div className="space-y-4">
                              <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                                <input
                                  type="password"
                                  placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                />
                              </div>

                              <div className="grid grid-cols-2 gap-4">
                                <div>
                                  <label className="block text-sm font-medium text-gray-700 mb-2">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                  <input
                                    type="password"
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                  />
                                </div>
                                <div>
                                  <label className="block text-sm font-medium text-gray-700 mb-2">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                                  <input
                                    type="password"
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                  />
                                </div>
                              </div>

                              <button className="px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all">
                                –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
                              </button>

                              <div className="pt-4 border-t border-gray-200">
                                <div className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                  <div>
                                    <h4 className="font-semibold text-gray-800">–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h4>
                                    <p className="text-sm text-gray-600 mt-1">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</p>
                                  </div>
                                  <button className="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all">
                                    –í–∫–ª—é—á–∏—Ç—å
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>

                          {/* Account Info */}
                          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ</h3>
                            <div className="space-y-3 text-sm">
                              <div className="flex justify-between">
                                <span className="text-gray-600">ID –∞–∫–∫–∞—É–Ω—Ç–∞:</span>
                                <span className="font-mono text-xs text-gray-800">ACC-2025-031545</span>
                              </div>
                              <div className="flex justify-between">
                                <span className="text-gray-600">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
                                <span className="font-semibold text-gray-800">15 –º–∞—Ä—Ç–∞ 2025</span>
                              </div>
                              <div className="flex justify-between">
                                <span className="text-gray-600">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</span>
                                <span className="font-semibold text-gray-800">–°–µ–≥–æ–¥–Ω—è –≤ 14:23</span>
                              </div>
                              <div className="flex justify-between">
                                <span className="text-gray-600">IP –∞–¥—Ä–µ—Å:</span>
                                <span className="font-mono text-xs text-gray-800">192.168.1.1</span>
                              </div>
                            </div>
                          </div>

                          {/* Danger Zone */}
                          <div className="bg-red-50 rounded-xl p-6 border-2 border-red-200">
                            <h3 className="text-lg font-semibold text-red-800 mb-4">–û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h3>
                            <p className="text-sm text-red-700 mb-4">
                              –≠—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã.
                            </p>
                            <div className="space-y-3">
                              <button className="w-full px-4 py-2 border-2 border-red-300 text-red-700 rounded-lg hover:bg-red-100 transition-all text-left">
                                –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
                              </button>
                              <button className="w-full px-4 py-2 border-2 border-red-300 text-red-700 rounded-lg hover:bg-red-100 transition-all text-left">
                                –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                              </button>
                              <button className="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all text-left font-semibold">
                                –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞–≤—Å–µ–≥–¥–∞
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </>
                  ) : (
                    <div className="flex-1 flex items-center justify-center bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                      <div className="text-center space-y-4">
                        <div className="text-6xl">‚ùì</div>
                        <h2 className="text-2xl font-bold text-gray-800">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h2>
                        <p className="text-gray-500">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –∏–∑ –º–µ–Ω—é</p>
                      </div>
                    </div>
                  )}
                </div>

                {/* Right Panel - Photo Card */}
                {activeSection === 'chat' && photos.length > 0 && currentPhoto && (
                  <div className="w-96 bg-white border-l border-gray-200 flex flex-col">
                    <div className="px-6 py-4 border-b border-gray-200">
                      <div className="flex items-center justify-between">
                        <div className="flex-1">
                          <h3 className="font-semibold text-gray-800">–î–µ—Ç–∞–ª–∏ —Ñ–æ—Ç–æ</h3>
                          <div className="text-xs text-gray-500 mt-1">
                            –§–æ—Ç–æ {currentPhotoIndex + 1} –∏–∑ {photos.length}
                          </div>
                        </div>
                        {currentPhoto.event && (
                          <button
                            onClick={handleShare}
                            className="p-2 hover:bg-gray-100 rounded-lg transition-all"
                            title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
                          >
                            <span className="text-lg">üì§</span>
                          </button>
                        )}
                      </div>
                    </div>

                    <div className="p-6">
                      <div className="relative">
                        <div className="relative rounded-xl overflow-hidden shadow-lg">
                          <div className={`bg-gradient-to-br ${currentPhoto.gradient} w-full aspect-[4/3] flex items-center justify-center text-8xl`}>
                            {currentPhoto.imageUrl ? (
                              <img src={currentPhoto.imageUrl} alt="Current photo" className="w-full h-full object-cover" />
                            ) : (
                              <span>{currentPhoto.emoji}</span>
                            )}
                          </div>
                          {currentPhoto.event && (
                            <div className="absolute top-3 right-3 bg-green-500 text-white text-xs px-3 py-1.5 rounded-full font-medium shadow-lg flex items-center gap-1">
                              <span>‚úì</span>
                              <span>–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                            </div>
                          )}
                        </div>
                        
                        {photos.length > 1 && (
                          <>
                            <div className="absolute top-1/2 -translate-y-1/2 left-0 right-0 flex justify-between px-2">
                              <button
                                onClick={prevPhoto}
                                disabled={currentPhotoIndex === 0}
                                className={`w-10 h-10 bg-white/90 backdrop-blur rounded-full shadow-lg flex items-center justify-center transition-all ${
                                  currentPhotoIndex === 0 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-white hover:scale-110'
                                }`}
                              >
                                <span className="text-xl">‚Üê</span>
                              </button>
                              <button
                                onClick={nextPhoto}
                                disabled={currentPhotoIndex === photos.length - 1}
                                className={`w-10 h-10 bg-white/90 backdrop-blur rounded-full shadow-lg flex items-center justify-center transition-all ${
                                  currentPhotoIndex === photos.length - 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-white hover:scale-110'
                                }`}
                              >
                                <span className="text-xl">‚Üí</span>
                              </button>
                            </div>
                            <div className="flex justify-center gap-2 mt-3">
                              {photos.map((_, idx) => (
                                <button
                                  key={idx}
                                  onClick={() => setCurrentPhotoIndex(idx)}
                                  className={`h-2 rounded-full transition-all ${
                                    idx === currentPhotoIndex 
                                      ? 'w-8 bg-purple-500' 
                                      : 'w-2 bg-gray-300 hover:bg-gray-400'
                                  }`}
                                />
                              ))}
                            </div>
                          </>
                        )}
                      </div>
                    </div>

                    <div className="flex-1 px-6 pb-6 space-y-4 overflow-y-auto">
                      {currentPhoto.location && (
                        <div className="space-y-2">
                          <div className="flex items-center gap-2 text-gray-500 text-sm">
                            <span>üìç</span>
                            <span className="font-medium">–ú–µ—Å—Ç–æ</span>
                          </div>
                          <div className="bg-gray-50 rounded-lg px-4 py-3">
                            <p className="text-gray-800 font-medium">{currentPhoto.location}</p>
                          </div>
                        </div>
                      )}

                      {currentPhoto.people && (
                        <div className="space-y-2">
                          <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2 text-gray-500 text-sm">
                              <span>üë•</span>
                              <span className="font-medium">–õ—é–¥–∏</span>
                            </div>
                            <button className="text-xs text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1">
                              <span>+</span>
                              <span>–î–æ–±–∞–≤–∏—Ç—å –ª–∏—Ü–æ</span>
                            </button>
                          </div>
                          <div className="bg-gray-50 rounded-lg px-4 py-3">
                            <p className="text-gray-800 font-medium">{currentPhoto.people}</p>
                          </div>
                        </div>
                      )}

                      {!currentPhoto.people && step >= 2 && (
                        <div className="space-y-2">
                          <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2 text-gray-500 text-sm">
                              <span>üë•</span>
                              <span className="font-medium">–õ—é–¥–∏</span>
                            </div>
                            <button className="text-xs text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1">
                              <span>+</span>
                              <span>–î–æ–±–∞–≤–∏—Ç—å –ª–∏—Ü–æ</span>
                            </button>
                          </div>
                          <div className="bg-gray-50 rounded-lg px-4 py-3 text-center">
                            <p className="text-gray-500 text-sm">–õ—é–¥–∏ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã</p>
                          </div>
                        </div>
                      )}

                      {currentPhoto.event && (
                        <div className="space-y-2">
                          <div className="flex items-center gap-2 text-gray-500 text-sm">
                            <span>üéâ</span>
                            <span className="font-medium">–°–æ–±—ã—Ç–∏–µ</span>
                          </div>
                          <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg px-4 py-3 border border-purple-200">
                            <p className="text-purple-800 font-semibold">{currentPhoto.event}</p>
                          </div>
                        </div>
                      )}

                      {showResult && currentPhotoIndex === 0 && (
                        <div className="space-y-2">
                          <div className="flex items-center gap-2 text-gray-500 text-sm">
                            <span>ü§ñ</span>
                            <span className="font-medium">AI —Ä–∞—Å–ø–æ–∑–Ω–∞–ª</span>
                          </div>
                          <div className="bg-blue-50 rounded-lg px-4 py-3 space-y-2 text-sm">
                            <div className="flex items-center gap-2 text-gray-700">
                              <span className="text-green-500 text-xs">‚úì</span>
                              <span>–ü–ª—è–∂ –Ω–∞ –∑–∞–∫–∞—Ç–µ</span>
                            </div>
                            <div className="flex items-center gap-2 text-gray-700">
                              <span className="text-green-500 text-xs">‚úì</span>
                              <span>2 —á–µ–ª–æ–≤–µ–∫–∞</span>
                            </div>
                            <div className="flex items-center gap-2 text-gray-700">
                              <span className="text-green-500 text-xs">‚úì</span>
                              <span>–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞</span>
                            </div>
                          </div>
                        </div>
                      )}

                      <div className="space-y-2">
                        <div className="flex items-center gap-2 text-gray-500 text-sm">
                          <span>üìÖ</span>
                          <span className="font-medium">–î–∞—Ç–∞</span>
                        </div>
                        <div className="bg-gray-50 rounded-lg px-4 py-3">
                          <p className="text-gray-800">{currentPhoto.date}</p>
                        </div>
                      </div>

                      {currentPhoto.event && generatedStory && (
                        <div className="space-y-2">
                          <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2 text-gray-500 text-sm">
                              <span>üìñ</span>
                              <span className="font-medium">–ò—Å—Ç–æ—Ä–∏—è –æ—Ç AI</span>
                            </div>
                            <button
                              onClick={generateStory}
                              disabled={isGeneratingStory}
                              className="text-xs text-purple-600 hover:text-purple-700 font-medium disabled:opacity-50 flex items-center gap-1"
                            >
                              {isGeneratingStory ? (
                                <>
                                  <span className="animate-spin">‚ü≥</span>
                                  <span>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</span>
                                </>
                              ) : (
                                <>
                                  <span>üîÑ</span>
                                  <span>–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</span>
                                </>
                              )}
                            </button>
                          </div>
                          <div className="bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg px-4 py-4 border border-amber-200">
                            {isGeneratingStory ? (
                              <div className="flex items-center gap-2 text-sm text-gray-600">
                                <span className="animate-pulse">‚ú®</span>
                                <span>–ì–µ–Ω–µ—Ä–∏—Ä—É—é –∏—Å—Ç–æ—Ä–∏—é...</span>
                              </div>
                            ) : (
                              <p className="text-sm text-gray-700 leading-relaxed whitespace-pre-wrap">
                                {generatedStory}
                              </p>
                            )}
                          </div>
                        </div>
                      )}
                    </div>

                    {currentPhoto.event && (
                      <div className="px-6 py-4 border-t border-gray-200 bg-gray-50 space-y-3">
                        <div className="text-xs text-gray-500 text-center">
                          üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –∫–∞–ø—Å—É–ª—É –≤—Ä–µ–º–µ–Ω–∏
                        </div>
                        <div className="flex gap-2">
                          <button
                            onClick={handleCopy}
                            className="flex-1 bg-white border border-gray-300 text-gray-700 text-sm py-2 px-4 rounded-lg hover:bg-gray-50 transition-all font-medium flex items-center justify-center gap-2"
                          >
                            <span>{copied ? '‚úì' : 'üìã'}</span>
                            <span>{copied ? '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ' : '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å'}</span>
                          </button>
                          <button
                            onClick={handleShare}
                            className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm py-2 px-4 rounded-lg hover:shadow-lg transition-all font-medium flex items-center justify-center gap-2"
                          >
                            <span>üì§</span>
                            <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                )}
              </div>

              {/* Photo Source Selection Modal */}
              {showPhotoSourceModal && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                  <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-fadeIn">
                    <h3 className="text-2xl font-bold text-gray-800 mb-2">–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫</h3>
                    <p className="text-sm text-gray-500 mb-6">–û—Ç–∫—É–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏?</p>

                    <div className="space-y-3">
                      <button
                        onClick={() => handleAddPhotoFromSource('nadi-media')}
                        className="w-full bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-lg transition-all text-left group"
                      >
                        <div className="flex items-center gap-4">
                          <div className="text-4xl group-hover:scale-110 transition-transform">üì∏</div>
                          <div className="flex-1">
                            <div className="font-bold text-lg text-gray-800">–ò–∑ –º–µ–¥–∏–∞—Ç–µ–∫–∏ NaDi</div>
                            <div className="text-sm text-gray-600">–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</div>
                          </div>
                        </div>
                      </button>

                      <button
                        onClick={() => handleAddPhotoFromSource('capsule-gallery')}
                        className="w-full bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200 rounded-xl p-4 hover:shadow-lg transition-all text-left group"
                      >
                        <div className="flex items-center gap-4">
                          <div className="text-4xl group-hover:scale-110 transition-transform">üì¶</div>
                          <div className="flex-1">
                            <div className="font-bold text-lg text-gray-800">–ò–∑ –ì–∞–ª–µ—Ä–µ–∏ –∫–∞–ø—Å—É–ª—ã</div>
                            <div className="text-sm text-gray-600">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ –≤–∞—à–µ–π –∫–∞–ø—Å—É–ª—ã –≤—Ä–µ–º–µ–Ω–∏</div>
                          </div>
                        </div>
                      </button>

                      <button
                        onClick={() => handleAddPhotoFromSource('device')}
                        className="w-full bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-4 hover:shadow-lg transition-all text-left group"
                      >
                        <div className="flex items-center gap-4">
                          <div className="text-4xl group-hover:scale-110 transition-transform">üíæ</div>
                          <div className="flex-1">
                            <div className="font-bold text-lg text-gray-800">–° —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                            <div className="text-sm text-gray-600">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã —Å –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                          </div>
                        </div>
                      </button>
                    </div>

                    <button
                      onClick={() => setShowPhotoSourceModal(false)}
                      className="w-full mt-4 text-gray-500 hover:text-gray-700 font-medium py-2 transition-colors"
                    >
                      –û—Ç–º–µ–Ω–∞
                    </button>
                  </div>
                </div>
              )}
            </div>
          );
        };

        ReactDOM.render(<NadiChatApp />, document.getElementById('root'));
    </script>
</body>
</html>
