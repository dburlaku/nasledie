<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nadi - –î–∏–∞–ª–æ–≥ —Å –ø–æ–º–æ—â–Ω–∏–∫–æ–º –ø–∞–º—è—Ç–∏</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const NadiChatApp = () => {
          const [step, setStep] = useState(0);
          const [messages, setMessages] = useState([]);
          const [isTyping, setIsTyping] = useState(false);
          const [photos, setPhotos] = useState([]);
          const [currentPhotoIndex, setCurrentPhotoIndex] = useState(0);
          const [showResult, setShowResult] = useState(false);
          const [activeSection, setActiveSection] = useState('chat');
          const [savedToCapsula, setSavedToCapsula] = useState(false);
          const [showProfile, setShowProfile] = useState(false);
          const [showShareMenu, setShowShareMenu] = useState(false);
          const [copied, setCopied] = useState(false);
          const [generatedStory, setGeneratedStory] = useState('');
          const [isGeneratingStory, setIsGeneratingStory] = useState(false);
          const [userInput, setUserInput] = useState('');
          const [isRecording, setIsRecording] = useState(false);
          const [mediaView, setMediaView] = useState('all'); // all, people, events, dates, places
          const [mediaFilter, setMediaFilter] = useState('all');
          const messagesEndRef = useRef(null);

          const scrollToBottom = () => {
            messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
          };

          useEffect(() => {
            scrollToBottom();
          }, [messages]);

          const addMessage = (sender, text) => {
            setMessages(prev => [...prev, { sender, text, id: Date.now() + Math.random() }]);
          };

          const addPhoto = (emoji, gradient) => {
            const newPhoto = {
              id: Date.now(),
              emoji: emoji,
              gradient: gradient,
              location: '',
              people: '',
              event: '',
              date: '–ê–≤–≥—É—Å—Ç 2024',
              tags: []
            };
            setPhotos(prev => [...prev, newPhoto]);
            setCurrentPhotoIndex(photos.length);
            return newPhoto;
          };

          const updateCurrentPhoto = (field, value) => {
            setPhotos(prev => prev.map((photo, idx) => 
              idx === currentPhotoIndex ? { ...photo, [field]: value } : photo
            ));
          };

          const nextPhoto = () => {
            if (currentPhotoIndex < photos.length - 1) {
              setCurrentPhotoIndex(currentPhotoIndex + 1);
            }
          };

          const prevPhoto = () => {
            if (currentPhotoIndex > 0) {
              setCurrentPhotoIndex(currentPhotoIndex - 1);
            }
          };

          const handleShare = () => {
            setShowShareMenu(!showShareMenu);
          };

          const handleCopy = () => {
            const currentPhoto = photos[currentPhotoIndex];
            const storyText = `
üì∏ ${currentPhoto.location || '–ú–µ—Å—Ç–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ'}
üë• ${currentPhoto.people || '–õ—é–¥–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã'}
üéâ ${currentPhoto.event || '–°–æ–±—ã—Ç–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ'}
üìÖ ${currentPhoto.date}

${currentPhoto.tags.join(' ')}
            `.trim();
            
            navigator.clipboard.writeText(storyText).then(() => {
              setCopied(true);
              setTimeout(() => setCopied(false), 2000);
            });
          };

          const generateStory = () => {
            if (!currentPhoto) return;
            
            setIsGeneratingStory(true);
            setTimeout(() => {
              const stories = [
                `–≠—Ç–æ –±—ã–ª–æ –≤–æ–ª—à–µ–±–Ω–æ–µ –ª–µ—Ç–æ 2024 –≥–æ–¥–∞. –ú—ã —Å –ª—é–±–∏–º–æ–π –æ—Ç–ø—Ä–∞–≤–∏–ª–∏—Å—å –≤ ${currentPhoto.location || '–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ'}, —á—Ç–æ–±—ã –æ—Ç–º–µ—Ç–∏—Ç—å –Ω–∞—à—É ${currentPhoto.event || '–≥–æ–¥–æ–≤—â–∏–Ω—É'}. –ó–∞–∫–∞—Ç –æ–∫—Ä–∞—Å–∏–ª –Ω–µ–±–æ –≤ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ —Ä–æ–∑–æ–≤–æ–≥–æ –∏ –æ—Ä–∞–Ω–∂–µ–≤–æ–≥–æ, –≤–æ–ª–Ω—ã —Ç–∏—Ö–æ —à–µ–ø—Ç–∞–ª–∏ —Å–≤–æ–∏ –∏—Å—Ç–æ—Ä–∏–∏, –∞ –º—ã –ø—Ä–æ—Å—Ç–æ —Å—Ç–æ—è–ª–∏ —Ä—è–¥–æ–º, –Ω–∞—Å–ª–∞–∂–¥–∞—è—Å—å –º–æ–º–µ–Ω—Ç–æ–º. –≠—Ç–æ –±—ã–ª–∏ —Ç–µ —Å–∞–º—ã–µ –º–≥–Ω–æ–≤–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ —Å—á–∞—Å—Ç—å–µ ‚Äî —ç—Ç–æ –Ω–µ –º–µ—Å—Ç–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –∞ –¥–æ—Ä–æ–≥–∞, –∫–æ—Ç–æ—Ä—É—é —Ç—ã –ø—Ä–æ—Ö–æ–¥–∏—à—å —Å –ª—é–±–∏–º—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º.`,
                
                `${currentPhoto.location || '–≠—Ç–æ –º–µ—Å—Ç–æ'} —Å—Ç–∞–ª–æ —Å–≤–∏–¥–µ—Ç–µ–ª–µ–º –Ω–∞—à–µ–π –ª—é–±–≤–∏. ${currentPhoto.event} ‚Äî –¥–µ–Ω—å, –∫–æ—Ç–æ—Ä—ã–π –º—ã –±—É–¥–µ–º –ø–æ–º–Ω–∏—Ç—å –≤—Å–µ–≥–¥–∞. –ú–æ—Ä–µ, –ø–µ—Å–æ–∫ –ø–æ–¥ –Ω–æ–≥–∞–º–∏, –∏ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ —Ä—è–¥–æ–º. –ú—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ –Ω–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Å–∞–º—ã–µ –ø—Ä–æ—Å—Ç—ã–µ –º–æ–º–µ–Ω—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–∞–º—ã–º–∏ —Ü–µ–Ω–Ω—ã–º–∏. –≠—Ç–æ—Ç –∑–∞–∫–∞—Ç, —ç—Ç–∏ —ç–º–æ—Ü–∏–∏ ‚Äî –≤—Å—ë —ç—Ç–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å –Ω–∞–º–∏ –Ω–∞–≤—Å–µ–≥–¥–∞.`,
                
                `–ö–æ–≥–¥–∞ –º—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ ${currentPhoto.event || '—ç—Ç—É –ø–æ–µ–∑–¥–∫—É'}, —è –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª, —á—Ç–æ ${currentPhoto.location || '—ç—Ç–æ –º–µ—Å—Ç–æ'} —Ç–∞–∫ –∑–∞–ø–æ–º–Ω–∏—Ç—Å—è. ${currentPhoto.people || '–ú—ã'} –≥—É–ª—è–ª–∏ –≤–¥–æ–ª—å –±–µ—Ä–µ–≥–∞, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–ª–∏ –∑–∞–∫–∞—Ç, —Å–º–µ—è–ª–∏—Å—å –Ω–∞–¥ –≥–ª—É–ø–æ—Å—Ç—è–º–∏. –í —Ç–∞–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –ø–∞–º—è—Ç—å ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –∞ —á—É–≤—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –∏—Å–ø—ã—Ç—ã–≤–∞–ª –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç.`
              ];
              
              setGeneratedStory(stories[Math.floor(Math.random() * stories.length)]);
              setIsGeneratingStory(false);
            }, 1500);
          };

          const handleNewChat = () => {
            setStep(0);
            setMessages([]);
            setPhotos([]);
            setCurrentPhotoIndex(0);
            setShowResult(false);
            setIsTyping(false);
            setSavedToCapsula(false);
            setGeneratedStory('');
            setUserInput('');
          };

          const handleSendMessage = () => {
            if (!userInput.trim()) return;
            
            addMessage('user', userInput);
            setUserInput('');
            
            setTimeout(() => {
              addMessage('nadi', '–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ! –Ø —Å–æ—Ö—Ä–∞–Ω–∏–ª —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–∞–ø—Å—É–ª—É –≤—Ä–µ–º–µ–Ω–∏. –ß—Ç–æ –µ—â—ë —Ö–æ—á–µ—à—å —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å?');
            }, 1000);
          };

          const handleKeyPress = (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              handleSendMessage();
            }
          };

          const handleVoiceRecord = () => {
            if (!isRecording) {
              setIsRecording(true);
              setTimeout(() => {
                setIsRecording(false);
                setUserInput('–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ! –•–æ—á—É –¥–æ–±–∞–≤–∏—Ç—å, —á—Ç–æ —ç—Ç–æ –±—ã–ª –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–π –¥–µ–Ω—å.');
              }, 3000);
            }
          };

          const currentPhoto = photos[currentPhotoIndex];

          const handleNext = () => {
            if (step === 0) {
              addMessage('nadi', '–ü—Ä–∏–≤–µ—Ç! –Ø Nadi ‚Äî —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π üí´');
              setTimeout(() => {
                addMessage('nadi', '–£ —Ç–µ–±—è –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —Ç—ã—Å—è—á–∏ —Ñ–æ—Ç–æ –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, –Ω–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω–æ–µ ‚Äî —Ü–µ–ª–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –ø—Ä–∞–≤–¥–∞?');
              }, 2000);
              setTimeout(() => {
                addMessage('nadi', '–î–∞–≤–∞–π –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å ‚Äî –∑–∞–≥—Ä—É–∑–∏ –æ–¥–Ω–æ —Ñ–æ—Ç–æ, –∫–æ—Ç–æ—Ä–æ–µ —Ç–µ–±–µ –¥–æ—Ä–æ–≥–æ, –∏ —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚ú®');
              }, 4000);
              setStep(1);
            } else if (step === 1) {
              addPhoto('üåÖüèñÔ∏è', 'from-orange-300 via-pink-400 to-purple-400');
              addMessage('system', 'üì∏ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
              setIsTyping(true);
              setTimeout(() => {
                setIsTyping(false);
                setShowResult(true);
                setTimeout(() => {
                  addMessage('nadi', '–ö–∞–∫–æ–µ —Ç—ë–ø–ª–æ–µ —Ñ–æ—Ç–æ! üåä');
                  setTimeout(() => {
                    addMessage('nadi', '–Ø –≤–∏–∂—É: –º–æ—Ä–µ, –∑–∞–∫–∞—Ç, –¥–≤–æ–µ –ª—é–¥–µ–π –Ω–∞ –ø–ª—è–∂–µ... –ì–¥–µ —ç—Ç–æ –±—ã–ª–æ?');
                  }, 1500);
                }, 500);
              }, 2000);
              setStep(2);
            } else if (step === 2) {
              addMessage('user', '–≠—Ç–æ –ö—Ä—ã–º, –ö–æ–∫—Ç–µ–±–µ–ª—å');
              updateCurrentPhoto('location', '–ö—Ä—ã–º, –ö–æ–∫—Ç–µ–±–µ–ª—å');
              setTimeout(() => {
                addMessage('nadi', '–ö—Ä—ã–º ‚Äî –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ! üèñÔ∏è –ê —Å –∫–µ–º —Ç—ã –±—ã–ª?');
              }, 1500);
              setStep(3);
            } else if (step === 3) {
              addMessage('user', '–° –∂–µ–Ω–æ–π');
              updateCurrentPhoto('people', '–° –∂–µ–Ω–æ–π –î–∞—à–µ–π');
              setTimeout(() => {
                addMessage('nadi', '–ö–∞–∫ –∑–¥–æ—Ä–æ–≤–æ! –ê —ç—Ç–æ –±—ã–ª–æ —á—Ç–æ-—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ ‚Äî —é–±–∏–ª–µ–π, –≥–æ–¥–æ–≤—â–∏–Ω–∞?');
              }, 1500);
              setStep(4);
            } else if (step === 4) {
              addMessage('user', '–î–∞, –Ω–∞—à–∞ 10-—è –≥–æ–¥–æ–≤—â–∏–Ω–∞ —Å–≤–∞–¥—å–±—ã');
              updateCurrentPhoto('event', '10-—è –≥–æ–¥–æ–≤—â–∏–Ω–∞ —Å–≤–∞–¥—å–±—ã');
              updateCurrentPhoto('tags', ['#–æ—Ç–ø—É—Å–∫', '#–º–æ—Ä–µ', '#—Å–µ–º—å—è', '#–≥–æ–¥–æ–≤—â–∏–Ω–∞']);
              setSavedToCapsula(true);
              setTimeout(() => {
                addMessage('nadi', '–í–æ—Ç —ç—Ç–æ –¥–∞! 10 –ª–µ—Ç –≤–º–µ—Å—Ç–µ ‚Äî —ç—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! üíï');
                setTimeout(() => {
                  addMessage('nadi', '–Ø —Å–æ—Ö—Ä–∞–Ω–∏–ª –≤—Å—ë:\n\nüìç –ö—Ä—ã–º, –ö–æ–∫—Ç–µ–±–µ–ª—å\nüë´ –° –∂–µ–Ω–æ–π\nüéâ 10-—è –≥–æ–¥–æ–≤—â–∏–Ω–∞ —Å–≤–∞–¥—å–±—ã\nüìÖ –ê–≤–≥—É—Å—Ç 2024\n\n–¢–µ–ø–µ—Ä—å —ç—Ç–æ —Ñ–æ—Ç–æ ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞, –∞ —Ü–µ–ª–∞—è –∏—Å—Ç–æ—Ä–∏—è!');
                  setTimeout(() => {
                    generateStory();
                  }, 500);
                }, 2000);
                setTimeout(() => {
                  addMessage('nadi', '–ü—Ä–µ–¥—Å—Ç–∞–≤—å: —á–µ—Ä–µ–∑ 20 –ª–µ—Ç —Ç–≤–æ–∏ –¥–µ—Ç–∏ –∏–ª–∏ –≤–Ω—É–∫–∏ —É–≤–∏–¥—è—Ç —ç—Ç–æ —Ñ–æ—Ç–æ –∏ –ø—Ä–æ—á–∏—Ç–∞—é—Ç –Ω–∞—Å—Ç–æ—è—â—É—é –∏—Å—Ç–æ—Ä–∏—é ‚Äî —Ç–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, —Å —Ç–≤–æ–∏–º–∏ —ç–º–æ—Ü–∏—è–º–∏ ‚ú®');
                }, 5000);
              }, 1500);
              setStep(5);
            } else if (step === 5) {
              setTimeout(() => {
                addMessage('nadi', '–£ –º–µ–Ω—è –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ! üöÄ');
                setTimeout(() => {
                  addMessage('nadi', '–Ø –º–æ–≥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Ç–≤–æ–∏ –Ω–æ–≤—ã–µ —Ñ–æ—Ç–æ:\n\n‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –ª–∏—Ü–∞\n‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è\n‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏–∏\n‚úÖ –ù–∏–∫–æ–≥–¥–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å\n\n–ü–æ–¥–∫–ª—é—á–∏—Ç—å?');
                }, 1500);
              }, 2000);
              setStep(6);
            } else if (step === 6) {
              addMessage('user', '–î–∞, –ø–æ–¥–∫–ª—é—á–∏!');
              setIsTyping(true);
              setTimeout(() => {
                setIsTyping(false);
                addMessage('nadi', 'üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å:\n\n‚úì –¢–≤–æ–∏ —Ñ–æ—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è\n‚úì –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é —è –±—É–¥—É –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ\n‚úì –í—Å–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã\n‚úì –ü–æ–∏—Å–∫ –ª—é–±–æ–≥–æ —Ñ–æ—Ç–æ ‚Äî –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã');
              }, 2000);
              setTimeout(() => {
                addMessage('nadi', '–¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è –ø–æ–¥ –∑–∞—â–∏—Ç–æ–π. –ù–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è. –ù–∏—á–µ–≥–æ –Ω–µ –∑–∞–±—É–¥–µ—Ç—Å—è üíô');
              }, 4500);
              setTimeout(() => {
                addMessage('nadi', '–•–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë —Ñ–æ—Ç–æ? –ó–∞–≥—Ä—É–∑–∏ —Å–ª–µ–¥—É—é—â–µ–µ!');
              }, 6500);
              setStep(7);
            } else if (step === 7) {
              addPhoto('üéÇüéâ', 'from-pink-300 via-purple-400 to-blue-400');
              addMessage('system', 'üì∏ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
              setIsTyping(true);
              setTimeout(() => {
                setIsTyping(false);
                addMessage('nadi', '–û! –í–∏–∂—É —Ç–æ—Ä—Ç –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫! –ß–µ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è?');
              }, 1500);
              setStep(8);
            } else if (step === 8) {
              addMessage('user', '–≠—Ç–æ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ—á–µ—Ä–∏ –ê—Ä–∏–Ω—ã');
              updateCurrentPhoto('event', '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –ê—Ä–∏–Ω—ã');
              updateCurrentPhoto('people', '–ê—Ä–∏–Ω–∞');
              updateCurrentPhoto('tags', ['#—Å–µ–º—å—è', '#–ø—Ä–∞–∑–¥–Ω–∏–∫', '#–¥–µ–Ω—å—Ä–æ–∂–¥–µ–Ω–∏—è']);
              setTimeout(() => {
                addMessage('nadi', '–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ! –°–∫–æ–ª—å–∫–æ –µ–π –∏—Å–ø–æ–ª–Ω–∏–ª–æ—Å—å?');
              }, 1500);
              setStep(9);
            } else if (step === 9) {
              addMessage('user', '4 –≥–æ–¥–∏–∫–∞');
              updateCurrentPhoto('date', '–°–µ–Ω—Ç—è–±—Ä—å 2024');
              setTimeout(() => {
                addMessage('nadi', '–ö–∞–∫–∞—è –º–∏–ª–∞—è! üéà –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∫–∞–ø—Å—É–ª—É. –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è ' + photos.length + ' —Ñ–æ—Ç–æ —Å –ø–æ–ª–Ω—ã–º–∏ –∏—Å—Ç–æ—Ä–∏—è–º–∏!');
              }, 1500);
              setStep(10);
            } else if (step === 10) {
              // User can continue chatting
              return;
            }
          };

          const getButtonText = () => {
            if (step === 0) return '–ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥';
            if (step === 1) return 'üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ';
            if (step === 7) return 'üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë —Ñ–æ—Ç–æ';
            return '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí';
          };

          const totalSteps = 10;
          const progress = Math.min(step, totalSteps);

          const menuItems = [
            { id: 'chat', icon: 'üí¨', label: '–ß–∞—Ç —Å Nadi' },
            { id: 'media', icon: 'üì∏', label: '–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã' },
            { id: 'artifacts', icon: 'üé®', label: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã' },
            { id: 'stats', icon: 'üìä', label: '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞' },
          ];

          const chatHistory = [
            { id: 1, title: '–û—Ç–ø—É—Å–∫ –≤ –ö—Ä—ã–º—É 2024', date: '21 –æ–∫—Ç', preview: '–ú–æ—Ä–µ, –∑–∞–∫–∞—Ç...' },
            { id: 2, title: '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ—á–µ—Ä–∏', date: '15 –æ–∫—Ç', preview: '–ê—Ä–∏–Ω–∞ 4 –≥–æ–¥–∞...' },
            { id: 3, title: '–°–µ–º–µ–π–Ω—ã–π –∞—Ä—Ö–∏–≤', date: '10 –æ–∫—Ç', preview: '–°—Ç–∞—Ä—ã–µ —Ñ–æ—Ç–æ...' },
          ];

          // Mock data for media library
          const mediaStats = {
            total: 150,
            people: 12,
            events: 28,
            places: 15,
            recent: 23
          };

          const peopleAlbums = [
            { id: 1, name: '–ê—Ä–∏–Ω–∞', count: 45, emoji: 'üëß', lastUpdate: '2 –¥–Ω—è –Ω–∞–∑–∞–¥' },
            { id: 2, name: '–ñ–µ–Ω–∞ (–î–∞—à–∞)', count: 67, emoji: 'üë©', lastUpdate: '1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥' },
            { id: 3, name: '–Ø', count: 89, emoji: 'üë®', lastUpdate: '–°–µ–≥–æ–¥–Ω—è' },
            { id: 4, name: '–†–æ–¥–∏—Ç–µ–ª–∏', count: 34, emoji: 'üë¥üëµ', lastUpdate: '1 –Ω–µ–¥–µ–ª—è –Ω–∞–∑–∞–¥' },
            { id: 5, name: '–î—Ä—É–∑—å—è', count: 28, emoji: 'üë•', lastUpdate: '3 –¥–Ω—è –Ω–∞–∑–∞–¥' },
            { id: 6, name: '–ö–æ–ª–ª–µ–≥–∏', count: 15, emoji: 'üíº', lastUpdate: '5 –¥–Ω–µ–π –Ω–∞–∑–∞–¥' },
          ];

          const eventAlbums = [
            { id: 1, name: '–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è', count: 23, emoji: 'üéÇ', lastUpdate: '2 –¥–Ω—è –Ω–∞–∑–∞–¥' },
            { id: 2, name: '–û—Ç–ø—É—Å–∫–∞', count: 38, emoji: 'üèñÔ∏è', lastUpdate: '1 –Ω–µ–¥–µ–ª—è –Ω–∞–∑–∞–¥' },
            { id: 3, name: '–ü—Ä–∞–∑–¥–Ω–∏–∫–∏', count: 31, emoji: 'üéâ', lastUpdate: '1 –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥' },
            { id: 4, name: '–°–≤–∞–¥—å–±–∞', count: 12, emoji: 'üíç', lastUpdate: '10 –ª–µ—Ç –Ω–∞–∑–∞–¥' },
            { id: 5, name: '–í—ã–ø—É—Å–∫–Ω—ã–µ', count: 8, emoji: 'üéì', lastUpdate: '2 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥' },
            { id: 6, name: '–°–ø–æ—Ä—Ç', count: 19, emoji: '‚öΩ', lastUpdate: '1 –Ω–µ–¥–µ–ª—è –Ω–∞–∑–∞–¥' },
          ];

          const placeAlbums = [
            { id: 1, name: '–ö—Ä—ã–º', count: 42, emoji: 'üèñÔ∏è', lastUpdate: '2 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥' },
            { id: 2, name: '–ú–æ—Å–∫–≤–∞', count: 58, emoji: 'üèôÔ∏è', lastUpdate: '–°–µ–≥–æ–¥–Ω—è' },
            { id: 3, name: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', count: 15, emoji: 'üèõÔ∏è', lastUpdate: '3 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥' },
            { id: 4, name: '–°–æ—á–∏', count: 28, emoji: 'üåä', lastUpdate: '1 –≥–æ–¥ –Ω–∞–∑–∞–¥' },
            { id: 5, name: '–ö–∞–∑–∞–Ω—å', count: 12, emoji: 'üïå', lastUpdate: '6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' },
          ];

          const dateAlbums = [
            { id: 1, name: '2024', count: 87, emoji: 'üìÖ', lastUpdate: '–°–µ–≥–æ–¥–Ω—è' },
            { id: 2, name: '2023', count: 45, emoji: 'üìÖ', lastUpdate: '1 –≥–æ–¥ –Ω–∞–∑–∞–¥' },
            { id: 3, name: '2022', count: 12, emoji: 'üìÖ', lastUpdate: '2 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥' },
            { id: 4, name: '2021', count: 6, emoji: 'üìÖ', lastUpdate: '3 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥' },
          ];

          const recentPhotos = [
            { id: 1, emoji: 'üåÖüèñÔ∏è', title: '–ö—Ä—ã–º 2024' },
            { id: 2, emoji: 'üéÇüéâ', title: '–î–† –ê—Ä–∏–Ω—ã' },
            { id: 3, emoji: 'üèôÔ∏è‚ú®', title: '–ú–æ—Å–∫–≤–∞ –≤–µ—á–µ—Ä–æ–º' },
            { id: 4, emoji: 'üë®‚Äçüë©‚Äçüëß', title: '–°–µ–º–µ–π–Ω–æ–µ —Ñ–æ—Ç–æ' },
            { id: 5, emoji: 'üçΩÔ∏èüç∑', title: '–†–µ—Å—Ç–æ—Ä–∞–Ω' },
            { id: 6, emoji: 'üå≥üö∂', title: '–ü—Ä–æ–≥—É–ª–∫–∞' },
            { id: 7, emoji: 'üéÑ‚ùÑÔ∏è', title: '–ù–æ–≤—ã–π –≥–æ–¥' },
            { id: 8, emoji: '‚öΩüèÜ', title: '–§—É—Ç–±–æ–ª' },
          ];

          return (
            <div className="flex h-screen bg-gray-50">
              {/* Sidebar */}
              <div className="w-72 bg-white border-r border-gray-200 flex flex-col">
                <div className="p-6 border-b border-gray-200">
                  <div className="flex items-center gap-3">
                    <div className="w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center">
                      <span className="text-xl">‚ú®</span>
                    </div>
                    <div>
                      <h1 className="font-bold text-lg text-gray-800">Nadi</h1>
                      <p className="text-xs text-gray-500">–ü–æ–º–æ—â–Ω–∏–∫ –ø–∞–º—è—Ç–∏</p>
                    </div>
                  </div>
                </div>

                <div className="flex-1 overflow-y-auto">
                  <div className="p-4 space-y-1">
                    {menuItems.map(item => (
                      <button
                        key={item.id}
                        onClick={() => setActiveSection(item.id)}
                        className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${
                          activeSection === item.id
                            ? 'bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 font-medium'
                            : 'text-gray-600 hover:bg-gray-50'
                        }`}
                      >
                        <span className="text-xl">{item.icon}</span>
                        <span>{item.label}</span>
                      </button>
                    ))}
                  </div>

                  {activeSection === 'chat' && (
                    <div className="px-4 py-2">
                      <div className="flex items-center justify-between mb-2 px-4">
                        <h3 className="text-xs font-semibold text-gray-500 uppercase">–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤</h3>
                        <button
                          onClick={handleNewChat}
                          className="text-xs text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1"
                        >
                          <span>+</span>
                          <span>–ù–æ–≤—ã–π —á–∞—Ç</span>
                        </button>
                      </div>
                      <div className="space-y-1">
                        {chatHistory.map(chat => (
                          <button
                            key={chat.id}
                            className="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition-all"
                          >
                            <div className="font-medium text-sm text-gray-800 truncate">{chat.title}</div>
                            <div className="text-xs text-gray-500 flex items-center gap-2 mt-1">
                              <span>{chat.date}</span>
                              <span>‚Ä¢</span>
                              <span className="truncate">{chat.preview}</span>
                            </div>
                          </button>
                        ))}
                      </div>
                    </div>
                  )}

                  {savedToCapsula && (
                    <div className="mx-4 my-4 p-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-xl border border-green-200">
                      <div className="flex items-center gap-3 mb-3">
                        <div className="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center pulse-animation">
                          <span className="text-xl">üíæ</span>
                        </div>
                        <div className="flex-1">
                          <div className="text-sm font-semibold text-green-800">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div>
                          <div className="text-xs text-green-600">{photos.length} —Ñ–æ—Ç–æ</div>
                        </div>
                      </div>
                      <button className="w-full bg-white border-2 border-green-300 text-green-700 rounded-lg py-2 px-4 text-sm font-medium hover:bg-green-50 transition-all flex items-center justify-center gap-2">
                        <span>üë•</span>
                        <span>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å</span>
                      </button>
                    </div>
                  )}
                </div>

                <div className="border-t border-gray-200 p-4">
                  <button
                    onClick={() => setShowProfile(!showProfile)}
                    className="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-all"
                  >
                    <div className="w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-400 rounded-full flex items-center justify-center text-white font-semibold">
                      –ê–ü
                    </div>
                    <div className="flex-1 text-left">
                      <div className="font-medium text-sm text-gray-800">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–æ–≤</div>
                      <div className="text-xs text-green-600 font-medium">–ë–∞–∑–æ–≤—ã–π ‚Ä¢ 500 —Ñ–æ—Ç–æ</div>
                    </div>
                    <span className="text-gray-400">‚öôÔ∏è</span>
                  </button>

                  {showProfile && (
                    <div className="mt-2 p-3 bg-gray-50 rounded-lg space-y-2 text-sm">
                      <div className="px-3 py-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded border border-purple-200">
                        <div className="flex items-center justify-between mb-2">
                          <div>
                            <div className="text-xs text-gray-600">–¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ</div>
                            <div className="font-semibold text-purple-800 text-base">–ë–∞–∑–æ–≤—ã–π</div>
                          </div>
                          <button className="bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs px-3 py-1.5 rounded-lg hover:shadow-lg transition-all font-medium">
                            –£–ª—É—á—à–∏—Ç—å
                          </button>
                        </div>
                        <div className="flex items-center justify-between text-xs pt-2 border-t border-purple-200">
                          <span className="text-gray-600">–õ–∏–º–∏—Ç —Ñ–æ—Ç–æ:</span>
                          <span className="font-semibold text-gray-800">500 —à—Ç</span>
                        </div>
                        <div className="flex items-center justify-between text-xs mt-1">
                          <span className="text-gray-600">–û—Å—Ç–∞–ª–æ—Å—å:</span>
                          <span className="font-semibold text-green-700">400 —à—Ç</span>
                        </div>
                        <div className="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                          <div className="h-full bg-gradient-to-r from-green-500 to-teal-500 transition-all" style={{width: '80%'}}></div>
                        </div>
                      </div>
                      <button className="w-full text-left px-3 py-2 rounded hover:bg-white transition-all">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
                      <button className="w-full text-left px-3 py-2 rounded hover:bg-white transition-all">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                      <button className="w-full text-left px-3 py-2 rounded hover:bg-white transition-all">üì¶ –ú–æ—è –∫–∞–ø—Å—É–ª–∞</button>
                      <button className="w-full text-left px-3 py-2 rounded hover:bg-white transition-all text-red-600">üö™ –í—ã–π—Ç–∏</button>
                    </div>
                  )}
                </div>
              </div>

                {/* Main Content */}
                <div className="flex-1 flex">
                  {/* Chat Section */}
                  <div className="flex-1 flex flex-col">
                    {activeSection === 'chat' ? (
                    <>
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div className="flex items-center gap-2 text-sm text-gray-600">
                          <button className="hover:text-purple-600 transition-all">–ì–ª–∞–≤–Ω–∞—è</button>
                          <span>‚Ä∫</span>
                          <button className="hover:text-purple-600 transition-all">–ß–∞—Ç—ã</button>
                          <span>‚Ä∫</span>
                          <span className="text-gray-800 font-medium">–†–∞–∑–≥–æ–≤–æ—Ä —Å Nadi</span>
                        </div>
                      </div>

                      <div className="flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                        {messages.length === 0 && step === 0 && (
                          <div className="text-center py-20 space-y-6">
                            <div className="w-24 h-24 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full mx-auto flex items-center justify-center animate-pulse">
                              <span className="text-5xl">‚ù§Ô∏è</span>
                            </div>
                            <div>
                              <h2 className="text-3xl font-bold text-gray-800 mb-2">
                                –°–æ—Ö—Ä–∞–Ω–∏ —Ç–æ, —á—Ç–æ –≤–∞–∂–Ω–æ
                              </h2>
                              <p className="text-gray-600 text-lg">
                                –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –∂–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏
                              </p>
                            </div>
                          </div>
                        )}

                        {messages.map((msg) => (
                          <div
                            key={msg.id}
                            className={`flex ${msg.sender === 'user' ? 'justify-end' : msg.sender === 'system' ? 'justify-center' : 'justify-start'}`}
                            style={{animation: 'fadeIn 0.3s ease-in'}}
                          >
                            <div
                              className={`${msg.sender === 'system' ? 'max-w-xs' : 'max-w-[75%]'} rounded-2xl px-5 py-3 ${
                                msg.sender === 'user'
                                  ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white'
                                  : msg.sender === 'system'
                                  ? 'bg-blue-100 text-blue-800 text-sm'
                                  : 'bg-white text-gray-800 shadow-sm'
                              }`}
                            >
                              <p className="whitespace-pre-wrap">{msg.text}</p>
                            </div>
                          </div>
                        ))}

                        {isTyping && (
                          <div className="flex justify-start">
                            <div className="bg-white rounded-2xl px-5 py-3 flex items-center gap-2 shadow-sm">
                              <div className="flex gap-1">
                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.2s'}}></div>
                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.4s'}}></div>
                              </div>
                            </div>
                          </div>
                        )}

                        {showResult && currentPhotoIndex === 0 && (
                          <div className="flex justify-start" style={{animation: 'fadeIn 0.5s ease-in'}}>
                            <div className="bg-blue-50 border-2 border-blue-200 rounded-2xl px-5 py-4 max-w-[85%]">
                              <div className="flex items-center gap-2 mb-3">
                                <span className="text-blue-500 text-xl">‚ö°</span>
                                <span className="font-semibold text-blue-800">AI —Ä–∞—Å–ø–æ–∑–Ω–∞–ª:</span>
                              </div>
                              <div className="space-y-2 text-sm text-gray-700">
                                <div className="flex items-center gap-2">
                                  <span className="text-green-500">‚úì</span>
                                  <span>–°—Ü–µ–Ω–∞: –ø–ª—è–∂ –Ω–∞ –∑–∞–∫–∞—Ç–µ</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-green-500">‚úì</span>
                                  <span>–õ—é–¥–∏: 2 —á–µ–ª–æ–≤–µ–∫–∞</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-green-500">‚úì</span>
                                  <span>–≠–º–æ—Ü–∏—è: —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        )}

                        <div ref={messagesEndRef} />
                      </div>

                      <div className="bg-white border-t border-gray-200 p-6">
                        {step >= 10 ? (
                          <div className="space-y-3">
                            <div className="flex gap-3">
                              <input
                                type="text"
                                value={userInput}
                                onChange={(e) => setUserInput(e.target.value)}
                                onKeyPress={handleKeyPress}
                                placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                                className="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 transition-all"
                              />
                              <button
                                onClick={handleVoiceRecord}
                                className={`p-3 rounded-xl transition-all ${
                                  isRecording 
                                    ? 'bg-red-500 text-white animate-pulse' 
                                    : 'border border-gray-300 hover:bg-gray-50'
                                }`}
                                title={isRecording ? '–ó–∞–ø–∏—Å—å...' : '–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'}
                              >
                                <span className="text-xl">{isRecording ? '‚è∫Ô∏è' : 'üé§'}</span>
                              </button>
                              <button
                                onClick={handleSendMessage}
                                disabled={!userInput.trim()}
                                className="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl px-6 py-3 font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                              >
                                –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                              </button>
                            </div>
                            {isRecording && (
                              <div className="text-center text-sm text-red-600 flex items-center justify-center gap-2">
                                <span className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                                <span>–ò–¥—ë—Ç –∑–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–∞...</span>
                              </div>
                            )}
                            <button
                              onClick={handleNewChat}
                              className="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl py-3 font-semibold hover:shadow-lg transition-all"
                            >
                              üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
                            </button>
                          </div>
                        ) : (
                          <>
                            <div className="flex gap-3">
                              <button
                                onClick={handleNext}
                                className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl py-4 font-semibold hover:shadow-lg transition-all"
                              >
                                {getButtonText()}
                              </button>
                            </div>
                            
                            <div className="mt-4">
                              <div className="flex justify-between text-xs text-gray-500 mb-2">
                                <span>–®–∞–≥ {progress} –∏–∑ {totalSteps}</span>
                                <span>{Math.round((progress / totalSteps) * 100)}%</span>
                              </div>
                              <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div 
                                  className="h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500"
                                  style={{ width: `${(progress / totalSteps) * 100}%` }}
                                ></div>
                              </div>
                            </div>
                          </>
                        )}
                      </div>
                    </>
                  ) : activeSection === 'media' ? (
                    <div className="flex-1 flex flex-col bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                      {/* Media Header */}
                      <div className="bg-white border-b border-gray-200 px-6 py-4">
                        <div className="flex items-center justify-between">
                          <div>
                            <h2 className="text-2xl font-bold text-gray-800">–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã</h2>
                            <p className="text-sm text-gray-500 mt-1">{mediaStats.total} —Ñ–æ—Ç–æ ‚Ä¢ {mediaStats.people} —á–µ–ª–æ–≤–µ–∫ ‚Ä¢ {mediaStats.events} —Å–æ–±—ã—Ç–∏–π</p>
                          </div>
                          <div className="flex gap-2">
                            <button className="px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-lg transition-all font-medium flex items-center gap-2">
                              <span>üì§</span>
                              <span>–ó–∞–≥—Ä—É–∑–∏—Ç—å</span>
                            </button>
                            <button className="p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all">
                              <span className="text-xl">üîç</span>
                            </button>
                          </div>
                        </div>

                        {/* Filter Tabs */}
                        <div className="flex gap-2 mt-4 overflow-x-auto">
                          <button
                            onClick={() => setMediaView('all')}
                            className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${
                              mediaView === 'all' 
                                ? 'bg-purple-100 text-purple-700' 
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                            }`}
                          >
                            –í—Å–µ —Ñ–æ—Ç–æ
                          </button>
                          <button
                            onClick={() => setMediaView('people')}
                            className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${
                              mediaView === 'people' 
                                ? 'bg-purple-100 text-purple-700' 
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                            }`}
                          >
                            üë• –õ—é–¥–∏ ({mediaStats.people})
                          </button>
                          <button
                            onClick={() => setMediaView('events')}
                            className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${
                              mediaView === 'events' 
                                ? 'bg-purple-100 text-purple-700' 
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                            }`}
                          >
                            üéâ –°–æ–±—ã—Ç–∏—è ({mediaStats.events})
                          </button>
                          <button
                            onClick={() => setMediaView('places')}
                            className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${
                              mediaView === 'places' 
                                ? 'bg-purple-100 text-purple-700' 
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                            }`}
                          >
                            üìç –ú–µ—Å—Ç–∞ ({mediaStats.places})
                          </button>
                          <button
                            onClick={() => setMediaView('dates')}
                            className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${
                              mediaView === 'dates' 
                                ? 'bg-purple-100 text-purple-700' 
                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                            }`}
                          >
                            üìÖ –ü–æ –≥–æ–¥–∞–º
                          </button>
                        </div>
                      </div>

                      {/* Media Content */}
                      <div className="flex-1 overflow-y-auto p-6">
                        {/* All Photos View */}
                        {mediaView === 'all' && (
                          <div className="space-y-6">
                            <div>
                              <h3 className="text-lg font-semibold text-gray-800 mb-4">–ù–µ–¥–∞–≤–Ω–∏–µ —Ñ–æ—Ç–æ</h3>
                              <div className="grid grid-cols-4 gap-4">
                                {recentPhotos.map(photo => (
                                  <div key={photo.id} className="aspect-square bg-gradient-to-br from-purple-300 to-pink-300 rounded-xl flex items-center justify-center text-6xl cursor-pointer hover:scale-105 transition-all shadow-lg">
                                    {photo.emoji}
                                  </div>
                                ))}
                              </div>
                            </div>

                            <div>
                              <h3 className="text-lg font-semibold text-gray-800 mb-4">–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h3>
                              <div className="grid grid-cols-3 gap-4">
                                <div className="bg-white rounded-xl p-4 border border-gray-200 hover:shadow-lg transition-all cursor-pointer">
                                  <div className="flex items-center gap-3">
                                    <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-2xl">
                                      üëß
                                    </div>
                                    <div>
                                      <div className="font-semibold text-gray-800">–ê—Ä–∏–Ω–∞</div>
                                      <div className="text-sm text-gray-500">45 —Ñ–æ—Ç–æ</div>
                                    </div>
                                  </div>
                                </div>
                                <div className="bg-white rounded-xl p-4 border border-gray-200 hover:shadow-lg transition-all cursor-pointer">
                                  <div className="flex items-center gap-3">
                                    <div className="w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center text-2xl">
                                      üèñÔ∏è
                                    </div>
                                    <div>
                                      <div className="font-semibold text-gray-800">–û—Ç–ø—É—Å–∫–∞</div>
                                      <div className="text-sm text-gray-500">38 —Ñ–æ—Ç–æ</div>
                                    </div>
                                  </div>
                                </div>
                                <div className="bg-white rounded-xl p-4 border border-gray-200 hover:shadow-lg transition-all cursor-pointer">
                                  <div className="flex items-center gap-3">
                                    <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-2xl">
                                      üìÖ
                                    </div>
                                    <div>
                                      <div className="font-semibold text-gray-800">2024</div>
                                      <div className="text-sm text-gray-500">87 —Ñ–æ—Ç–æ</div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        )}

                        {/* People View */}
                        {mediaView === 'people' && (
                          <div className="space-y-4">
                            <h3 className="text-lg font-semibold text-gray-800">–ê–ª—å–±–æ–º—ã –ø–æ –ª—é–¥—è–º</h3>
                            <div className="grid grid-cols-3 gap-4">
                              {peopleAlbums.map(album => (
                                <div key={album.id} className="bg-white rounded-xl overflow-hidden border border-gray-200 hover:shadow-lg transition-all cursor-pointer">
                                  <div className="aspect-video bg-gradient-to-br from-blue-300 to-purple-300 flex items-center justify-center text-7xl">
                                    {album.emoji}
                                  </div>
                                  <div className="p-4">
                                    <div className="font-semibold text-gray-800">{album.name}</div>
                                    <div className="text-sm text-gray-500 mt-1">{album.count} —Ñ–æ—Ç–æ ‚Ä¢ {album.lastUpdate}</div>
                                  </div>
                                </div>
                              ))}
                            </div>
                          </div>
                        )}

                        {/* Events View */}
                        {mediaView === 'events' && (
                          <div className="space-y-4">
                            <h3 className="text-lg font-semibold text-gray-800">–ê–ª—å–±–æ–º—ã –ø–æ —Å–æ–±—ã—Ç–∏—è–º</h3>
                            <div className="grid grid-cols-3 gap-4">
                              {eventAlbums.map(album => (
                                <div key={album.id} className="bg-white rounded-xl overflow-hidden border border-gray-200 hover:shadow-lg transition-all cursor-pointer">
                                  <div className="aspect-video bg-gradient-to-br from-pink-300 to-orange-300 flex items-center justify-center text-7xl">
                                    {album.emoji}
                                  </div>
                                  <div className="p-4">
                                    <div className="font-semibold text-gray-800">{album.name}</div>
                                    <div className="text-sm text-gray-500 mt-1">{album.count} —Ñ–æ—Ç–æ ‚Ä¢ {album.lastUpdate}</div>
                                  </div>
                                </div>
                              ))}
                            </div>
                          </div>
                        )}

                        {/* Places View */}
                        {mediaView === 'places' && (
                          <div className="space-y-4">
                            <h3 className="text-lg font-semibold text-gray-800">–ê–ª—å–±–æ–º—ã –ø–æ –º–µ—Å—Ç–∞–º</h3>
                            <div className="grid grid-cols-3 gap-4">
                              {placeAlbums.map(album => (
                                <div key={album.id} className="bg-white rounded-xl overflow-hidden border border-gray-200 hover:shadow-lg transition-all cursor-pointer">
                                  <div className="aspect-video bg-gradient-to-br from-green-300 to-teal-300 flex items-center justify-center text-7xl">
                                    {album.emoji}
                                  </div>
                                  <div className="p-4">
                                    <div className="font-semibold text-gray-800">{album.name}</div>
                                    <div className="text-sm text-gray-500 mt-1">{album.count} —Ñ–æ—Ç–æ ‚Ä¢ {album.lastUpdate}</div>
                                  </div>
                                </div>
                              ))}
                            </div>
                          </div>
                        )}

                        {/* Dates View */}
                        {mediaView === 'dates' && (
                          <div className="space-y-4">
                            <h3 className="text-lg font-semibold text-gray-800">–ê–ª—å–±–æ–º—ã –ø–æ –≥–æ–¥–∞–º</h3>
                            <div className="grid grid-cols-3 gap-4">
                              {dateAlbums.map(album => (
                                <div key={album.id} className="bg-white rounded-xl overflow-hidden border border-gray-200 hover:shadow-lg transition-all cursor-pointer">
                                  <div className="aspect-video bg-gradient-to-br from-purple-300 to-pink-300 flex items-center justify-center text-7xl">
                                    {album.emoji}
                                  </div>
                                  <div className="p-4">
                                    <div className="font-semibold text-gray-800">{album.name}</div>
                                    <div className="text-sm text-gray-500 mt-1">{album.count} —Ñ–æ—Ç–æ ‚Ä¢ {album.lastUpdate}</div>
                                  </div>
                                </div>
                              ))}
                            </div>
                          </div>
                        )}
                      </div>
                    </div>
                  ) : (
                    <div className="flex-1 flex items-center justify-center bg-gradient-to-br from-purple-50/30 via-pink-50/30 to-blue-50/30">
                      <div className="text-center space-y-4">
                        <div className="text-6xl">
                          {activeSection === 'artifacts' && 'üé®'}
                          {activeSection === 'stats' && 'üìä'}
                        </div>
                        <h2 className="text-2xl font-bold text-gray-800">
                          {activeSection === 'artifacts' && '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã'}
                          {activeSection === 'stats' && '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞'}
                        </h2>
                        <p className="text-gray-500">–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p>
                      </div>
                    </div>
                  )}
                </div>

                {/* Right Panel - Photo Card */}
                {activeSection === 'chat' && photos.length > 0 && currentPhoto && (
                  <div className="w-96 bg-white border-l border-gray-200 flex flex-col">
                    <div className="px-6 py-4 border-b border-gray-200">
                      <div className="flex items-center justify-between">
                        <div className="flex-1">
                          <h3 className="font-semibold text-gray-800">–î–µ—Ç–∞–ª–∏ —Ñ–æ—Ç–æ</h3>
                          <div className="text-xs text-gray-500 mt-1">
                            –§–æ—Ç–æ {currentPhotoIndex + 1} –∏–∑ {photos.length}
                          </div>
                        </div>
                        {currentPhoto.event && (
                          <button
                            onClick={handleShare}
                            className="p-2 hover:bg-gray-100 rounded-lg transition-all"
                            title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
                          >
                            <span className="text-lg">üì§</span>
                          </button>
                        )}
                      </div>
                    </div>

                    <div className="p-6">
                      <div className="relative">
                        <div className="relative rounded-xl overflow-hidden shadow-lg">
                          <div className={`bg-gradient-to-br ${currentPhoto.gradient} w-full aspect-[4/3] flex items-center justify-center text-8xl`}>
                            {currentPhoto.emoji}
                          </div>
                          {currentPhoto.event && (
                            <div className="absolute top-3 right-3 bg-green-500 text-white text-xs px-3 py-1.5 rounded-full font-medium shadow-lg flex items-center gap-1">
                              <span>‚úì</span>
                              <span>–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                            </div>
                          )}
                        </div>
                        
                        {photos.length > 1 && (
                          <>
                            <div className="absolute top-1/2 -translate-y-1/2 left-0 right-0 flex justify-between px-2">
                              <button
                                onClick={prevPhoto}
                                disabled={currentPhotoIndex === 0}
                                className={`w-10 h-10 bg-white/90 backdrop-blur rounded-full shadow-lg flex items-center justify-center transition-all ${
                                  currentPhotoIndex === 0 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-white hover:scale-110'
                                }`}
                              >
                                <span className="text-xl">‚Üê</span>
                              </button>
                              <button
                                onClick={nextPhoto}
                                disabled={currentPhotoIndex === photos.length - 1}
                                className={`w-10 h-10 bg-white/90 backdrop-blur rounded-full shadow-lg flex items-center justify-center transition-all ${
                                  currentPhotoIndex === photos.length - 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-white hover:scale-110'
                                }`}
                              >
                                <span className="text-xl">‚Üí</span>
                              </button>
                            </div>
                            <div className="flex justify-center gap-2 mt-3">
                              {photos.map((_, idx) => (
                                <button
                                  key={idx}
                                  onClick={() => setCurrentPhotoIndex(idx)}
                                  className={`h-2 rounded-full transition-all ${
                                    idx === currentPhotoIndex 
                                      ? 'w-8 bg-purple-500' 
                                      : 'w-2 bg-gray-300 hover:bg-gray-400'
                                  }`}
                                />
                              ))}
                            </div>
                          </>
                        )}
                      </div>
                    </div>

                    <div className="flex-1 px-6 pb-6 space-y-4 overflow-y-auto">
                      {currentPhoto.location && (
                        <div className="space-y-2">
                          <div className="flex items-center gap-2 text-gray-500 text-sm">
                            <span>üìç</span>
                            <span className="font-medium">–ú–µ—Å—Ç–æ</span>
                          </div>
                          <div className="bg-gray-50 rounded-lg px-4 py-3">
                            <p className="text-gray-800 font-medium">{currentPhoto.location}</p>
                          </div>
                        </div>
                      )}

                      {currentPhoto.people && (
                        <div className="space-y-2">
                          <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2 text-gray-500 text-sm">
                              <span>üë•</span>
                              <span className="font-medium">–õ—é–¥–∏</span>
                            </div>
                            <button className="text-xs text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1">
                              <span>+</span>
                              <span>–î–æ–±–∞–≤–∏—Ç—å –ª–∏—Ü–æ</span>
                            </button>
                          </div>
                          <div className="bg-gray-50 rounded-lg px-4 py-3">
                            <p className="text-gray-800 font-medium">{currentPhoto.people}</p>
                          </div>
                        </div>
                      )}

                      {!currentPhoto.people && step >= 2 && (
                        <div className="space-y-2">
                          <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2 text-gray-500 text-sm">
                              <span>üë•</span>
                              <span className="font-medium">–õ—é–¥–∏</span>
                            </div>
                            <button className="text-xs text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1">
                              <span>+</span>
                              <span>–î–æ–±–∞–≤–∏—Ç—å –ª–∏—Ü–æ</span>
                            </button>
                          </div>
                          <div className="bg-gray-50 rounded-lg px-4 py-3 text-center">
                            <p className="text-gray-500 text-sm">–õ—é–¥–∏ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã</p>
                          </div>
                        </div>
                      )}

                      {currentPhoto.event && (
                        <div className="space-y-2">
                          <div className="flex items-center gap-2 text-gray-500 text-sm">
                            <span>üéâ</span>
                            <span className="font-medium">–°–æ–±—ã—Ç–∏–µ</span>
                          </div>
                          <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg px-4 py-3 border border-purple-200">
                            <p className="text-purple-800 font-semibold">{currentPhoto.event}</p>
                          </div>
                        </div>
                      )}

                      {showResult && currentPhotoIndex === 0 && (
                        <div className="space-y-2">
                          <div className="flex items-center gap-2 text-gray-500 text-sm">
                            <span>ü§ñ</span>
                            <span className="font-medium">AI —Ä–∞—Å–ø–æ–∑–Ω–∞–ª</span>
                          </div>
                          <div className="bg-blue-50 rounded-lg px-4 py-3 space-y-2 text-sm">
                            <div className="flex items-center gap-2 text-gray-700">
                              <span className="text-green-500 text-xs">‚úì</span>
                              <span>–ü–ª—è–∂ –Ω–∞ –∑–∞–∫–∞—Ç–µ</span>
                            </div>
                            <div className="flex items-center gap-2 text-gray-700">
                              <span className="text-green-500 text-xs">‚úì</span>
                              <span>2 —á–µ–ª–æ–≤–µ–∫–∞</span>
                            </div>
                            <div className="flex items-center gap-2 text-gray-700">
                              <span className="text-green-500 text-xs">‚úì</span>
                              <span>–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞</span>
                            </div>
                          </div>
                        </div>
                      )}

                      <div className="space-y-2">
                        <div className="flex items-center gap-2 text-gray-500 text-sm">
                          <span>üìÖ</span>
                          <span className="font-medium">–î–∞—Ç–∞</span>
                        </div>
                        <div className="bg-gray-50 rounded-lg px-4 py-3">
                          <p className="text-gray-800">{currentPhoto.date}</p>
                        </div>
                      </div>

                      {currentPhoto.event && generatedStory && (
                        <div className="space-y-2">
                          <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2 text-gray-500 text-sm">
                              <span>üìñ</span>
                              <span className="font-medium">–ò—Å—Ç–æ—Ä–∏—è –æ—Ç AI</span>
                            </div>
                            <button
                              onClick={generateStory}
                              disabled={isGeneratingStory}
                              className="text-xs text-purple-600 hover:text-purple-700 font-medium disabled:opacity-50 flex items-center gap-1"
                            >
                              {isGeneratingStory ? (
                                <>
                                  <span className="animate-spin">‚ü≥</span>
                                  <span>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</span>
                                </>
                              ) : (
                                <>
                                  <span>üîÑ</span>
                                  <span>–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</span>
                                </>
                              )}
                            </button>
                          </div>
                          <div className="bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg px-4 py-4 border border-amber-200">
                            {isGeneratingStory ? (
                              <div className="flex items-center gap-2 text-sm text-gray-600">
                                <span className="animate-pulse">‚ú®</span>
                                <span>–ì–µ–Ω–µ—Ä–∏—Ä—É—é –∏—Å—Ç–æ—Ä–∏—é...</span>
                              </div>
                            ) : (
                              <p className="text-sm text-gray-700 leading-relaxed whitespace-pre-wrap">
                                {generatedStory}
                              </p>
                            )}
                          </div>
                        </div>
                      )}
                    </div>

                    {currentPhoto.event && (
                      <div className="px-6 py-4 border-t border-gray-200 bg-gray-50 space-y-3">
                        <div className="text-xs text-gray-500 text-center">
                          üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –∫–∞–ø—Å—É–ª—É –≤—Ä–µ–º–µ–Ω–∏
                        </div>
                        <div className="flex gap-2">
                          <button
                            onClick={handleCopy}
                            className="flex-1 bg-white border border-gray-300 text-gray-700 text-sm py-2 px-4 rounded-lg hover:bg-gray-50 transition-all font-medium flex items-center justify-center gap-2"
                          >
                            <span>{copied ? '‚úì' : 'üìã'}</span>
                            <span>{copied ? '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ' : '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å'}</span>
                          </button>
                          <button
                            onClick={handleShare}
                            className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm py-2 px-4 rounded-lg hover:shadow-lg transition-all font-medium flex items-center justify-center gap-2"
                          >
                            <span>üì§</span>
                            <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          );
        };

        ReactDOM.render(<NadiChatApp />, document.getElementById('root'));
    </script>
</body>
</html>
